<html><head>
<style>
 .web { color: red; }
 .popup { color: navy; }
 .SMes { font-family: "Terminal"; color: navy; }
 body { margin: 0px 0px 0px 0px; }
</style>
</head>
<body bgcolor=006000 text=navy link=navy vlink=navy alink=red ondragstart="return false" onselectstart="return false">

<div background="http://queville.com/images/POPUP4.png" id="PopUp" style="background-image:url(http://queville.com/images/POPUP4.png);position:absolute;top:100;left:100;visibility:visible;z-index:254;" onMouseOver='PopUpVis="visible";' onMouseOut='PopUpVis=PopForce; Keyboard=""; PUV=setTimeout("document.getElementById(\"PopUp\").style.visibility=PopUpVis;",100);'>&nbsp;</div>

<div id="fg" style="position:absolute;top:99;left:228;visibility:hidden;z-index:244;padding: 2px 2px 5px 2px;">&nbsp;</div>

<img src=http://queville.com/images/Cursor.gif id=MH name=MH style="position:absolute;top:0;left:0;visibility:hidden;z-index:255;">

<table border=0 bordercolor=#80FF80><tr><td width=448 height=320>

</td><td width=160 bgcolor=#ffffd0 valign=top align=center rowspan=2>
 <p align=center><img src=http://queville.com/quevillev10.gif>
 <table border=0 width=100%><tr><td id=SIDE name=SIDE valign=top align=center>
 </td></tr></table>
</td></tr><tr><td bgcolor=#ffffd0 height=150 valign=bottom align=left>

 <div id=CBOX style="position:relative; width:434; height:148; overflow:hidden; clip:rect(0,434,148,0);">
 <div ID=CHAT style="position:absolute; left:0; top:0; width:434; ">
 
 </div></div>
 
</td></tr>
</table>

<img src="http://queville.com/images/CHATUP.gif" onmousedown="javascript:ChatUp();" style="position:absolute; left:435; top:350;">
<img src="http://queville.com/images/CHATDOWN.gif" onmousedown="javascript:ChatDown();" style="position:absolute; left:435; top:382;">

<iframe id="MARS" src="login.htm" name="MARS" style="position:absolute;top:1;left:619;width:10;height:10;visibility:hidden;"></iframe>

<script language="JavaScript">
//
// copyright quintrix and crew software
// things to do for open source release:
//
// paying variable used in mars-data.lib for player hats
// house upgrades in mars-trade.lib
// remove chest coins (admin script)
//
// create character: confirm password
//
// quests:
//  have marvin give players boots to start quest
//  have marvin give players axe for reward
//
// player house:
//  require materials to build house
//   rocks for foundation
//   wood for frame
//   tin for roof
//   players can now store items
//   wood for upgrade
//   iron for upgrade
//   players can now store more items
//
// stores:
//  all items are free, players can deposit
//  and withdrawl. Inventory adjusted to ideal
//  levels every one-minte.
//
// gardening:
//  tomatoes, bugs, melons
//
 
ShowServer=1;
CVer="v10.2c-Beta";
Server="http://quintrixandcrew.com/cgi-bin/r/mars9b.cgi";
WhoServer="http://queville.com/s2/cgi-bin/who-client.cgi";
NoLights="A2eA1eB1eB0eA0eC0eC1eA6eF3eG4eD5eC5eF1eF2eE1eD1eF6eI4eJ2eK2eE8eE7eD7eD8eD9eD0eE0eC7eA7eC8e";
NoLights=NoLights+"C9eJ5eG8eH0eH8eH9eF4eI0eJ0eK0eJ9eK1eJ1eI1eH1eL7eL6eL8eK7eJ7e";
NoLights=NoLights+"K5eL5eK6eJ6eL3eK3eJ3eJ4eA4eA5eB4eB5eB3eC3eL4e";
VItems="Q1Q2Q3Q4Q5Q6Q7Q8Q9Q0QaQbQcQdQeQfB3E2E3E4K1K2K6K0J0G4G5G7G8J4J5J7J8G6J6G0I0RaRbH1H2H4H6H9A1A2A3A4A0A5A6A7B2";
VItems=VItems+"B5B6B7B8C9B4L1L2L4L5L6L7M2M4M1M3M6M7M8M9MaMbL3N1N3N5N7N9O1O4O5O8N6F4F5F6F7F8P1P4P6P9P2P5";
VItems=VItems+"P8P3P7P0B9B0PaPbPcD6D7D8E5E6E7N4R3R4R5R6RcRdReC5H3H5H8O3O6O9F3E1BaBbN0LaLbO2O7O0";
SVer="Saxon 1a";
ToDo="";
Flag="Quintrix";
LastFlag="";
TileMode=0;
TileFill="";
ZelieStore=0;
Item=new Array();
Obj=new Array();
Chat=new Array();
S=new Array();
LVL=new Array();
CItem=new Array();
InBox="";
NextDrop=0;
TotalHits=0;
DisplayCreate=0;
Ref=0;
lastr=0;
Objlastr=0;
SBMode=-1;
LSBMode=3;
LName="NEW";
GotStats=1;
GotObj=0;
SSkill="";
Skill="";
Fight="";
RefRPG=8;
RefSB=0;
RefStats=0;
RefTrade=0;
LastItem=-1;
LastStatic=-1;
RefDItems=1;
IList="";
ChatLine="";
SendChat="";
NewChatLine="";
Scroll=0;
Cht="";
SCht="Welcome to Queville, land of the Dragon Basher!<br>(C)opyright 2004 Quintrix and Crew Software<br>";
CHigh=148;
TCht=SCht;
BridgeClosed=0;
SwitchIs="";
RememberMe=0;
RememberName="";
RememberPswd="";
CMode=0;
WhoKey="";
M=new Array();
NMsgs=20;
for (Ci=0;Ci<NMsgs;Ci++) { M[Ci]=" "; }
NewMsgs=0;
AllyClan=2;
Header="<p> &nbsp; &nbsp; &nbsp; An Epic Tale of Romance and Adventure... &nbsp; &nbsp; &nbsp; <p align=center><img src=http://queville.com/quevillev10.gif><br>";
AllowScroll=0;
BLand=0;
Damage=0;
Deposit=0;
ToLevel99=0;
DeadItem=0;
Retreat=1;
LAction="";
LErr="";
IErr="";
SResults="None";
CStamp=0;
EStamp=0;
IStamp=0;
LoggedIn=0;
BSFix=0;
LastLogin="Unknown";
LastIP="Unknown";
MapSizeX=13;
MapSizeY=9;
Map="U0A2G0G0G0G0B0G0G0G0G0G0A3U0U0A2G0G0G0G0B0G0G0G0G0G0A3U0U0A2G0G0G0F1B0G0G0G0G0G0A5A0A0A4G0G0F1F1B0F1F1G0G0G0G0G0G0G0G0F1F1C5C0C6F1F1G0G0G0G0G0G0F1F1C5C0C0C2F1F1F1F1F1G0G0G0B5B1C3C0C0C3B1B1B1B1B1B1B1B1B3F1F1C7C8F1F1G0G0G0G0G0G0G0G0G0F1F1G0G0G0G0G0G0G0G0G0G0G0G0G0G0G0G0G0G0G0G0G0G0";
TopYPos=12;
TopXPos=16;
TopYPos=2;
TopXPos=2;
CharHit=60;
MaxHit=99;
CharY=5;
CharX=2;
CharZ=0;
CharMap="B2";
StartZ=0;
CharObj="NEW";
BoatObj="";
CharName="";
CharPswd="";
NewObj="";
CharDir="R";
CharSpell="";
CharConfirm="";
MoveTo=0;
InputLine="";
Que="";
KCap=0;
VKey=0;
NumInven=24;
CharInven="Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0Z0";
Admin=0;
TradeOn=0;
DrawSB=1;
Need="";
DynInven="";
DynItem="";
DynBuy="";
DynSell="";
NPCHits=1;
NPCMaxHits=1;
CharWpn=0;
CharArm=0;
CharNotes=0;
CharQuiver=0;
MaxQuiver=100;
CharPoison=0;
CharMove="";
CharStatus="";
TmpObj=""; 
CharCbt=0;
ExpCbt=-1;
MaxCbt=-1;
CharMag=0;
ExpMag=-1;
MaxMag=-1;
CharRng=0;
ExpRng=-1;
MaxRng=-1;
CharFsh=0;
ExpFsh=-1;
MaxFsh=-1;
CharCok=0;
ExpCok=-1;
MaxCok=-1;
CharMin=0;
ExpMin=-1;
MaxMin=-1;
CharSmt=0;
ExpSmt=-1;
MaxSmt=-1;
CharPVP=0;
ExpPVP=-1;
MaxPVP=-1;
CharFir=0;
ExpFir=-1;
MaxFir=-1;
StatCalc="";
LastCbt="V1";
LastCbtExp=1;
LastRng="V1";
LastRngExp=1;
LastMag="V1";
LastMagExp=1;
LastFsh="G1";
LastFshExp=1;
LastCok="J1";
LastCokExp=1;
LastMin="H1";
LastMinExp=1;
LastSmt="M1";
LastSmtExp=1;
LastFir="Z6";
LastFirExp=1;
LastPVP="..";
LastPVPExp=0;
LastStat=0;
Darkness=0;
PvParea=0;
Paying=0;
Quest="AAAAAAAAAAAAAAAAAAAAAAAAAA";
House=0;
HouseMap="C6e";
PSSet="Z0";
PStore=0;
PS1="Z0 0 Z0 0";
PSInven="";
ShiftSet=0;
Shifted=0;
PopX=0;
PopY=0;
PopHide="hidden";
PopAlign="center";
PopForce="hidden";
DirTile="http://queville.com/tile2";
DirChar="http://queville.com/char";
DirItem="http://queville.com/items";
DirBuild="http://queville.com/build";
DirKeys="http://queville.com/images/keys";
CandyGfx="J0";
FURNACEz=-1;
var SnowY=new Array ();
var SnowX=new Array ();
var Snow=new Array ();
container=document.createElement("div");
document.getElementsByTagName("body")[0].appendChild(container);
container.style.position="absolute";
container.style.top="0px";
container.style.height=320;
container.style.zIndex="100"; 

function StartSnow() { Snowing=1; setTimeout(SnowFall,50); } 
function StopSnow() { Snowing=0; } 
function SnowFall() { if (Snowing) { for (i=0; i<Snow.length; i++) { if (Math.random()>.1) { SnowX[i]+=1}; if (Math.random()<.9) { SnowX[i]-=1}; Snow[i].style.left=SnowX[i]+"px"; SnowY[i]++; Snow[i].style.top=SnowY[i]+"px"; if (SnowY[i]>320) { SnowY[i]=0-15; }} if (Snow.length<50 && Math.random()<.1) { SnowFlake(Snow.length); } setTimeout (SnowFall,50); } else { for (i=0; i<Snow.length; i++) { container.removeChild(Snow[i]); } Snow.length=0; }} 
function SnowFlake(a) { Snow[a]=document.createElement("p"); flake=document.createTextNode("*"); Snow[a].appendChild(flake); SnowX[a]=Math.random()*448; Snow[a].style.position="absolute"; Snow[a].style.left=SnowX[a]+"px"; Snow[a].style.fontSize="15px"; SnowY[a]=-15; Snow[a].style.top="-15px"; Snow[a].style.color="#ffffff"; container.appendChild(Snow[a]); } var cc=document.cookie.split(';'); for(var i=0;i < cc.length;i++) { while (cc[i].charAt(0)==' ') { cc[i]=cc[i].substring(1,cc[i].length); }} m=.05; LVL[1]=128; for (i=1;i<101;i++) { if (i>1) { LVL[i]=Math.floor(LVL[i-1]+(LVL[i-1]*m)); m=m+.0015; }} 
function CalcLevel(e) { }

StartUpGame=setTimeout('StartUp();',250); 
function StartUp() { if (ShowServer) { document.getElementById("MARS").style.width=457; document.getElementById("MARS").style.height=457; document.getElementById("MARS").style.visibility="visible"; } else { if (document.layers) { document.captureEvents(Event.MOUSEDOWN);document.onmousedown=MouseClick; } else { document.oncontextmenu=MouseClick; } document.onmousedown=RightClick; document.oncontextmenu=RightClick; document.oncontextmenu=textmenu; } docBody=document.getElementsByTagName("body").item(0); z=0; for (i=0; i<MapSizeY+1; i++) { for (j=0; j<MapSizeX+1; j++) { eval('T'+z+'=document.createElement(\"IMG\");'); eval('T'+z+'.setAttribute(\"id\",'+z+');'); eval('docBody.appendChild(T'+z+');'); eval('T'+z+'.setAttribute(\"src\",\"'+DirTile+'/G0.png\");'); eval('T'+z+'.onmousedown=new Function(\"ClickHere('+z+');\");'); eval('T'+z+'.style.position=\"absolute\";'); eval('T'+z+'.style.left='+(TopXPos+(j*32))+';'); eval('T'+z+'.style.top='+(TopYPos+(i*32))+';'); eval('T'+z+'.style.height=32;'); eval('T'+z+'.style.width=32;'); eval('T'+z+'.style.visibility=\"visible\";'); eval('T'+z+'.style.zindex=1;'); z++; }} URL1=location.search.substr(location.search.indexOf("?"),location.search.length).split("&"); URLName=""; session=""; URLPswd=""; for (i=0;i<URL1.length;i++) { URL2=URL1[i].split("="); if (URL2[0]=="N") { URLName=URL2[1]; } if (URL2[0]=="P") { URLPswd=URL2[1]; } if (URL2[0]=="session") { session=URL2[1]; } if (URL2[0]=="create") { DisplayCreate=URL2[1]; }} Welcome(); } 

function Welcome() {
 StopSnow(); PopForce="visible"; PopAlign="center";
 LAction="Welcome"; RefreshMap(); SBMode=-1; 
 if (DisplayCreate) { 
  DisplayCreate=0; NewChar();
 } else { 
  PUP=Header+"<p align=center><font color=red>"+LErr+"</font><form action=\"javascript:Login();\" name=login><p align=center>";
  PUP=PUP+"<table border=0><tr><td align=right><b>Player Name:</b> <br><b>Password:</b> </td><td align=left><input type=text size=12 name=N value=\""+RememberName+"\"><br><input type=password size=12 name=P value=\""+RememberPswd+"\"></td></tr></table>";
  PUP=PUP+"<input type=checkbox id=R name=R> Remember Me ";
  PUP=PUP+"<p align=center><input type=\"image\" name=\"login\" src=\"http://queville.com/images/buttons/b_login.gif\"></form>";
  PUP=PUP+"<p align=center><a href=\"javascript:NewChar();\">Create New Character</a> &nbsp; <a href=http://queville.com/index.htm>Return To Main Menu</a>"; PopForce="visible"; PopAlign="login"; POP(PUP); PopAlign="center";
  if (RememberMe) { document.getElementById("R").checked=true; }}
  LErr="";
  if (window.location.href.indexOf("s2.queville.com")>-1) { 
   document.getElementById('MARS').src="login2.htm";
  } else {
   document.getElementById('MARS').src="login.htm";
  }
  RefreshSB();
  if (session) { SessionLogin(); }
  if (URLPswd) { PswdLogin(); }
  ChatMessage("<p align=center><br>");
} 
function NewChar() {
 LAction="NewChar";
 CharPswd="na";
 PUP=Header+"<p align=center><font color=red>"+LErr+"</font><form action=\"javascript:GuestLogin();\" name=login>";
 PUP=PUP+"<center><table border=0><tr><td align=right><b>Player Name:</b></td><td><input type=text size=12 name=N></td></tr>";
 PUP=PUP+"<tr><td align=right><b>Select Password:</b></td><td align=left><input type=password size=12 name=P></td></tr>";
 PUP=PUP+"<tr><td align=right><b>Confirm Password:</b></td><td align=left><input type=password size=12 name=C></td></tr></table>";
 PUP=PUP+"<p align=center><input type=\"image\" name=\"create\" src=\"http://queville.com/images/buttons/b_create.gif\"></center></form>";
 PUP=PUP+"<p align=center><a href=\"javascript:Welcome();\">Existing Character</a> &nbsp; <a href=http://queville.com/index.htm>Return To Main Menu</a>";
 PopForce="visible";
 PopAlign="login";
 POP(PUP);
 PopAlign="center";
 LErr="";
} 
function GuestLogin() {
 CharName=document.forms.login.N.value;
 CharPswd=document.forms.login.P.value;
 CharConfirm=document.forms.login.C.value;
 if (CharName.length==0) { Welcome(); return; }
 SResults="";
 GotStats=0;
 var ifrm = document.getElementById('MARS');
 ifrm.contentWindow.document.forms['MarsLogin'].N.value=CharName;
 ifrm.contentWindow.document.forms['MarsLogin'].P.value=CharPswd;
 ifrm.contentWindow.document.forms['MarsLogin'].C.value=CharConfirm;
 ifrm.contentWindow.document.forms['MarsLogin'].T.value=CStamp;
 ifrm.contentWindow.document.forms['MarsLogin'].R.value=0;
 ifrm.contentWindow.document.forms['MarsLogin'].Q.value="LG";
 ifrm.contentWindow.document.forms["MarsLogin"].submit();
 LTimer=0;
 InitMap(); } 
function GuestPswd() { } 
function SessionLogin() { CharName=URLName; CharPswd=session; SResults=""; ToDo=""; GotStats=0; Scroll=0; var ifrm = document.getElementById('MARS'); ifrm.contentWindow.document.forms['MarsLogin'].N.value=CharName; ifrm.contentWindow.document.forms['MarsLogin'].P.value=CharPswd; ifrm.contentWindow.document.forms['MarsLogin'].Z.value=CharZ; ifrm.contentWindow.document.forms['MarsLogin'].S.value=StartZ; ifrm.contentWindow.document.forms['MarsLogin'].T.value=CStamp; ifrm.contentWindow.document.forms['MarsLogin'].R.value=0; ifrm.contentWindow.document.forms['MarsLogin'].Q.value="L"; ifrm.contentWindow.document.forms['MarsLogin'].session.value=session; ifrm.contentWindow.document.forms["MarsLogin"].submit(); LTimer=0; InitMap(); } 
function PswdLogin() { CharName=URLName; CharPswd=URLPswd; SResults=""; ToDo=""; GotStats=0; Scroll=0; document.getElementById('MARS').src=Server+'?N='+CharName+'&P='+CharPswd+'&Z='+CharZ+'&S='+StartZ+'+&T='+CStamp+'&R=0&Q=L'; LTimer=0; InitMap(); } 
function Login() { 
 CharName=document.forms.login.N.value;
 CharPswd=document.forms.login.P.value;
 if (CharName.length==0) { Welcome(); return; }
 if (CharPswd.length<3) { Welcome(); return; }
 SResults="";
 ToDo=""; 
 GotStats=0;
 Scroll=0;
 CharPswd=CharPswd.replace(/\#/g,"%23");
 CharPswd=CharPswd.replace(/\+/g,"%2B");
 if (document.getElementById("R").checked) { 
  RememberMe=1;
  RememberName=CharName;
  RememberPswd=CharPswd;
 } else {
  RememberMe=0;
  RememberName="";
  RememberPswd="";
 }
 var ifrm = document.getElementById('MARS');
 ifrm.contentWindow.document.forms['MarsLogin'].N.value=CharName;
 ifrm.contentWindow.document.forms['MarsLogin'].P.value=CharPswd;
 ifrm.contentWindow.document.forms['MarsLogin'].Z.value=CharZ;
 ifrm.contentWindow.document.forms['MarsLogin'].S.value=StartZ;
 ifrm.contentWindow.document.forms['MarsLogin'].T.value=CStamp;
 ifrm.contentWindow.document.forms['MarsLogin'].R.value=0;
 ifrm.contentWindow.document.forms['MarsLogin'].Q.value="L";
 ifrm.contentWindow.document.forms["MarsLogin"].submit();
 LTimer=0;
 InitMap();
} 
function LoginError() {
 session="";
 if (LErr=="00") { LErr=IErr; }
 if (LErr=="01") { LErr="Invalid Domain"; }
 if (LErr=="02") { LErr="Server Has Been Turned Off"; }
 if (LErr=="03") { LErr="Name Must Be AlphaNumeric With No Spaces"; }
 if (LErr=="04") { LErr="Player Name Must Be At Least 2 Letters"; }
 if (LErr=="05") { LErr="Player Name May Not Exceed 16 Letters"; }
 if (LErr=="06") { LErr="Restricted Player Name"; }
 if (LErr=="07") { LErr="Password Must Be Alpha Numeric Characters Only"; }
 if (LErr=="08") { LErr="Password Must Be At Least 4 Letters"; }
 if (LErr=="09") { LErr="Invalid Password"; }
 if (LErr=="10") { LErr="Player Name Already Taken"; }
 if (LErr=="11") { LErr="Passwords Do Not Match"; }
 if (LErr=="12") { LErr="Timeout Connecting To Server"; }
 if (LErr=="13") { LErr="Player Name Does Not Exist"; }
 if (LErr=="14") { LErr="Client Has Been Updated - Refresh Page"; }
 if (LErr=="15") {
  if (Need>0) {
   var a=Math.floor(Need/60);
   if (a<60) {
    a=" for "+a+" minutes";
   } else { 
    a=Math.floor(Need/(60*60));
    if (a<24) {
     a=" for "+a+" hours";
    } else {
     a=Math.floor(Need/(60*60*24));
     a=" for "+a+" days";
    }
   }    
  } else {
   a="";
  }
  LErr="Player Has Been Banned"+a+".";
 }
 if (LErr=="16") { LErr="Player Name Must Start With A Letter"; }
 if (LErr=="17") { LErr="Disconnected"; }
 if (LErr=="18") { LErr="Server Full"; }
 if (LErr=="19") { LErr="You have been logged out"; }
 if (LErr=="20") { LErr="Player Already Logged In - Wait 10 seconds"; }
 if (LErr=="21") { LErr="One client per computer please"; }
 if (LErr=="22") { LErr="Error connecting to player database"; }
 if (LErr=="23") { LErr="Please use Server #"+Need; }
 if (LErr=="24") { LErr="Checksum Error - Please try again"; }
 if (LErr=="25") { LErr="Brute Force Protection Activated"; }
 if (LErr=="26") { LErr="Proxy Server or BotNet Detected"; }
 if (LErr=="27") { LErr="Insecure Password - Please Change"; }
 if (LErr=="28") { LErr="Pay to Play Server"; }
 eval(LAction+"();");
} 
function CancelLogin() { SResults="Off"; LErr="17"; } 
function InitMap() {
 if (GotStats==0) {
  w1=(100/250)*LTimer; w2=100-w1; PUP="<p align=center>Logging In...<p align=center> &nbsp; <img src=\""+DirTile+"/DAM5.gif\" height=8 width="+w1+"><img src=\""+DirTile+"/DAM0.gif\" height=8 width="+w2+"> &nbsp; "; PUP=PUP+"<p align=center><a href=javascript:Null(); onmousedown=\"javascript:CancelLogin();\">Cancel</a>"; POP(PUP);
  if (SResults=="Off") {
   LoginError(); 
  } else {
   LTimer++;
   if (LTimer<250) { 
    UM=setTimeout("InitMap();",100);
   } else {
    LErr="12";
    LoginError();
   }
  }
 } else {
  if (SResults=="Off") { LoginError(); } else { PUP="<p align=center>Logging In...<p align=center> &nbsp; <img src=\""+DirTile+"/DAM5.gif\" height=8 width=100> &nbsp; "; UpdateStats(); if (CharObj=="NEW") { if (CharPswd!="na") { SelectChar("NEW"); } else { GuestPswd(); }} else { SBMode=1; LSBMode=1; Retreat=0; PopForce="hidden"; HPOP(); DrawSB=1; RefChat=1; RefSB=1; RefChar=1; RefMap=1; RPG=setTimeout('RefreshRPG();',250); document.onkeydown=ProcessInput; document.onkeypress=CancelKey; document.onkeyup=CancelKey; PUP=PUP+"<p align=center>Last Login:<br>"+LastLogin+"<p align=center>From IP: "+LastIP; POP(PUP); }}
 }
} 
function SelectChar(a) { Retreat=1; t="<p align=center>"; if (a=="NEW") { t=t+"Are you <a href=javascript:Null(); onmousedown=\"SelectChar(\'M\');\">MALE</a> or <a href=javascript:Null(); onmousedown=\"javascript:SelectChar(\'F\');\">FEMALE</a>?"; ChatMessage(""); } else { if (a=="M" || a=="F") { t=t+"Select Hair Style:<p align=center>"; t=t+"<a href=javascript:Null(); onmousedown=\"javascript:SelectChar(\'"+a+"1\');\"><img src="+DirChar+"/CHRH"+a+"1R.gif border=0 height=48 width=48></a> "; t=t+"<a href=javascript:Null(); onmousedown=\"javascript:SelectChar(\'"+a+"2\');\"><img src="+DirChar+"/CHRH"+a+"2R.gif border=0 height=48 width=48></a> "; t=t+"<a href=javascript:Null(); onmousedown=\"javascript:SelectChar(\'"+a+"3\');\"><img src="+DirChar+"/CHRH"+a+"3R.gif border=0 height=48 width=48></a> "; t=t+"<br>"; t=t+"<a href=javascript:Null(); onmousedown=\"javascript:SelectChar(\'"+a+"5\');\"><img src="+DirChar+"/CHRH"+a+"5R.gif border=0 height=48 width=48></a>"; t=t+"<a href=javascript:Null(); onmousedown=\"javascript:SelectChar(\'"+a+"6\');\"><img src="+DirChar+"/CHRH"+a+"6R.gif border=0 height=48 width=48></a>"; t=t+"<a href=javascript:Null(); onmousedown=\"javascript:SelectChar(\'"+a+"4\');\"><img src="+DirChar+"/CHRH"+a+"4R.gif border=0 height=48 width=48></a> "; t=t+"<a href=javascript:Null(); onmousedown=\"javascript:SelectChar(\'"+a+"7\');\"><img src="+DirChar+"/CHRH"+a+"7R.gif border=0 height=48 width=48></a>"; t=t+"<p><a href=javascript:Null(); onmousedown=\"javascript:SelectChar(\'NEW\');\">BACK</a>"; } else { t="Creating Character..."; GotStats=0; document.getElementById('MARS').src=Server+'?N='+CharName+'&P='+CharPswd+'&Z='+CharZ+'&S='+StartZ+'+&T='+CStamp+"&R=0&Q=LC&J="+a+"3&C="+CharPswd; LTimer=0; InitMap(); }} POP(t); } 
function KillItem(a) { if (S[a].charAt(0)!="K") { S[a]="K"+S[a]; DeadItem=1; } if (document.getElementById("S"+a)) { document.getElementById("S"+a).style.visibility="hidden"; } RefSItem=1; } 
function ShowItem(a,b) { if (S[a]) { IV=S[a].split("|"); S[a]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3]+"|"+b; RefSItem=1; }} 
function HideItem(a) { IV=S[a].split("|"); S[a]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3]+"|0"; } 
function ItemMenu(itemz,c) { if (c<"S1") { if (c=="F1") { return"<a href=javascript:Null(); onmousedown=\"javascript:AttkChicken2("+itemz+",'"+c+"');\">Attack "+ItemID(c)+"</a><br>"; } else { return"<a href=javascript:Null(); onmousedown=\"javascript:GetDItem2("+itemz+",'"+c+"');\">Get "+ItemID(c)+"</a><br>"; }} if (c=="Z8") { return"<a href=javascript:Null(); onmousedown=\"javascript:Fort(0);\">Enter Hidden Fort</a><br>"; } if (c=="Z7") { return"<a href=javascript:Null(); onmousedown=\"javascript:Trader(0);\">Talk to Trader</a><br>"; } if (c=="Z6") { return"<a href=javascript:Null(); onmousedown=\"javascript:UseFire2("+itemz+",'"+c+"');\">Use Fire</a><br>"; }} 
function ProcessMenu(i,j) { Rtn=""; if (IV[1]<"S0") { if (IV[1]>"A") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:GetSItem("+i+");\">Get "+ItemID(IV[1])+"</a><br>"; }} else { if (IV[1]<"R0") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:SMine("+i+");\">Mine "+ItemID(IV[1])+"</a><br>"; } else { if (IV[1]=="S1") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:Badlands("+i+");\">"+ItemID(IV[1])+"</a><br>"; } else { if (IV[1]=="S2") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:Aggressive("+i+");\">"+ItemID(IV[1])+"</a><br>"; } else { if (IV[1]=="S5" || IV[1]=="S6") { if (SwitchIs=="S6") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:WalkHere("+IV[4]+"); Switch(0);\">Switch is On</a><br>"; } else { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:WalkHere("+IV[4]+"); Switch(1);\">Switch is Off</a><br>"; }} else { if (IV[1]<"Z1") { if (IV[3].charAt(0)!="K") { f=1; if (CharObj.indexOf("P2")>-1) { Rtn="<a href=javascript:Null(); onmousedown=\"javascript:AttkSItem("+i+");\">Water Blast "+ItemID(IV[1])+" (Lvl "+ItemLevel(IV[1])+")</a><br>"; } else { if (CharObj.indexOf("P5")>-1) { Rtn="<a href=javascript:Null(); onmousedown=\"javascript:AttkSItem("+i+");\">Fire Ball "+ItemID(IV[1])+" (Lvl "+ItemLevel(IV[1])+")</a><br>"; } else { if (CharObj.indexOf("P8")>-1) { Rtn="<a href=javascript:Null(); onmousedown=\"javascript:AttkSItem("+i+");\">Wind Burst "+ItemID(IV[1])+" (Lvl "+ItemLevel(IV[1])+")</a><br>"; } else { Rtn="<a href=javascript:Null(); onmousedown=\"javascript:AttkSItem("+i+");\">Attack "+ItemID(IV[1])+" (Lvl "+ItemLevel(IV[1])+")</a><br>"; }}}}}}}}}} if (IV[1]=="Z2") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:ReadSign("+i+");\">Read Sign</a><br>"; } if (IV[1]=="Z3") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:SFish("+i+");\">Catch "+ItemID(IV[2])+"</a><br>"; } if (IV[1]=="Z4") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:EnterSCity("+i+");\">Enter City</a><br>"; } if (IV[1]=="Z5") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:UseSItem("+i+");\">Use "+ItemID(IV[1])+"</a><br>"; } if (IV[1]=="Z6") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:UseSItem("+i+");\">Use "+ItemID(IV[1])+"</a><br>"; } if (IV[1]=="Z8") { f=1; Rtn="<a href=javascript:Null(); onmousedown=\"javascript:EnterSCity("+i+");\">Enter Hidden Fort</a><br>"; } if (Admin) { Rtn=Rtn+AdminStatic(i); } return Rtn; } 
function WalkHere(i) { HPOP(); PopForce="hidden"; Destination=i; MoveTo=1; DynItem=""; MoveToY=Math.floor(i/(MapSizeX+1)); MoveToX=i-(MoveToY*(MapSizeX+1)); document.getElementById("MH").style.left=MoveToX*32+TopXPos; document.getElementById("MH").style.top=MoveToY*32+TopYPos; document.getElementById("MH").style.visibility="visible"; HideObjs=setTimeout('document.getElementById("MH").style.visibility="hidden";',250); } 
function StepHere(a) { if (Retreat==0) { if (TradeOn==0) { Que=""; Skill=""; IStamp=CStamp; HPOP(); MoveTo=1; Destination=a; MoveToY=Math.floor(a/(MapSizeX+1)); MoveToX=a-(MoveToY*(MapSizeX+1)); }}} 
function Moving() { 
 if (CMode) { CMode=0; RefChat=1; document.getElementById("msgs").src="http://queville.com/images/buttons/d_msgs.gif"; }
 if (SBMode==0) { SBMode=LSBMode; RefSB=1; }
 CharY=Math.floor(CharZ/(MapSizeX+1));
 CharX=CharZ-(CharY*(MapSizeX+1));
 NewCharZ=CharZ; NewCharX=CharX; NewCharY=CharY;
 if (CharX>MoveToX) { DistanceX=CharX-MoveToX; } else { DistanceX=MoveToX-CharX; }
 if (CharY>MoveToY) { DistanceY=CharY-MoveToY; } else { DistanceY=MoveToY-CharY; }
 if (DistanceX>DistanceY) { 
  if (CharX>MoveToX) { NewCharX=CharX-1; NewCharZ=CharZ-1; CharMove="W"; CharDir="L"; }
  if (CharX<MoveToX) { NewCharX=CharX+1; NewCharZ=CharZ+1; CharMove="E"; CharDir="R"; }
 } else {
  if (CharY>MoveToY) { NewCharY=CharY-1; NewCharZ=CharZ-(MapSizeX+1); CharMove="N"; }
  if (CharY<MoveToY) { NewCharY=CharY+1; NewCharZ=CharZ+(MapSizeX+1); CharMove="S"; }
 }
 AllowMove=1;
 if (NewCharY<0) { AllowMove=0; } if (NewCharY>MapSizeY) { AllowMove=0; }
 if (NewCharX<0) { AllowMove=0; } if (NewCharX>MapSizeX) { AllowMove=0; }
 NewCharZ=NewCharY*(MapSizeX+1)+NewCharX;
 BoatObj="";
 if (TileMode==0) { 
  b=Map.charAt(CharZ*2); c=Map.charAt(NewCharZ*2);
  if (c>"K") { AllowMove=0; }
  if (c=="R") { AllowMove=0; if (CharInven.indexOf("A1")>-1 || CharInven.indexOf("A0")>-1) { AllowMove=1; }}
  if (c=="S") { AllowMove=0; if (CharInven.indexOf("A3")>-1 || CharInven.indexOf("A0")>-1) { AllowMove=1; }}
  if (c=="T") { AllowMove=0; if (CharInven.indexOf("A2")>-1 || CharInven.indexOf("A0")>-1) { AllowMove=1; }}
  if (c=="M") { AllowMove=0; if (CharInven.indexOf("A4")>-1 || CharInven.indexOf("A0")>-1) { AllowMove=1; }}
  if (c=="G") { if (b=="U") { RefSB=1; }}
  if (c=="U") { 
   Boat=""; if (CharInven.indexOf("A5")>-1) { Boat="5"; } if (CharInven.indexOf("A6")>-1) { Boat="6"; } if (CharInven.indexOf("A7")>-1) { Boat="7"; }
   if (Boat) { 
    if (b=="U") { if (Map.charAt((NewCharZ*2)+1) != "9") { if (Map.charAt((NewCharZ*2)+1) != "8") { if (Map.charAt((NewCharZ*2)+1) != "c") { AllowMove=1; BoatObj="A"+Boat; }}}}
    if (b=="G") { if (Map.charAt((CharZ*2)+1)=="9" || Map.charAt((CharZ*2)+1)=="8" || Map.charAt((CharZ*2)+1)=="c") { if (Map.charAt((NewCharZ*2)+1)<Boat) { AllowMove=1; BoatObj="A"+Boat; RefSB=1; }}}
   } else {
    AllowMove=0;
   }
  } else {
   if (b=="U") {
    if (Map.charAt((NewCharZ*2)+1)=="9" || Map.charAt((NewCharZ*2)+1)=="8" || Map.charAt((NewCharZ*2)+1)=="c") {
     if (Map.charAt((NewCharZ*2))=="G") { AllowMove=1; } else { AllowMove=0; }
    } else {
     AllowMove=0;
    }
   }
  }
 } else {
  AdminMoving();
 }
 if (SResults) {
  if (NewCharX==0) { AllowMove=0; }
  if (NewCharX==MapSizeX) { AllowMove=0; }
  if (NewCharY==0) { AllowMove=0; }
  if (NewCharY==MapSizeY) { AllowMove=0; }
 }
 if (AllowMove) {
  CharZ=NewCharZ; CharY=NewCharY; CharX=NewCharX;
  if (CharMap=="H3e") {
   if (CharZ==65) {
    CharZ=60; MoveTo=0; RefChar=1; 
   } else {
    if (CharZ==60) {
     CharZ=65; MoveTo=0; RefChar=1;
    }
   }
  }
  if (CharMap=="I3e") {
   if (CharZ==87) {
    CharZ=45; MoveTo=0; RefChar=1;
   } else {
    if (CharZ==45) {
     CharZ=87; MoveTo=0; RefChar=1;
    }
   }
   if (CharZ==52) {
    CharZ=94; MoveTo=0; RefChar=1;
   } else {
    if (CharZ==94) {
     CharZ=52; MoveTo=0; RefChar=1;
    }
   }
  }
  InputLine=InputLine+CharMove;
  if (KCap) { ChatLine=ChatLine+CharMove; RefChat=1; }
 } else { 
  MoveTo=0;
 }
 CharObj=CharObj.substring(0,3)+CharDir+CharObj.substring(4,CharObj.length)+BoatObj;
 a="N|"+CharObj+"|"+CharName+"||"+CharZ;
 IV = a.split("|"); RenderObj(); RefChar=0;
 if (document.getElementById(IV[2]+"_DAM")) { 
  eval('docBody.removeChild('+IV[2]+'_DAM);');
  if (SSkill=="PAk") { RenderDam(); }
  if (SSkill=="PAK") { RenderDam(); }
 }
 if (AllowScroll==0) { AllowScroll=1; if (CharX==0) { AllowScroll=0; } if (CharX==MapSizeX) { AllowScroll=0; } if (CharY==0) { AllowScroll=0; } if (CharY==MapSizeY) { AllowScroll=0; } if (TileMode) { AllowScroll=0; }} if (AllowScroll) { if (GotStats) { if (CharMap.indexOf("e")>-1) { if (CharY<1) { XFlag=1; if (CharMap=="C7e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A7e"; } if (CharMap=="B1e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A1e"; } if (CharMap=="B0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A0e"; } if (CharMap=="C0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B0e"; } if (CharMap=="J0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=I0e"; } if (CharMap=="K0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=J0e"; } if (CharMap=="I3e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=H3e"; } if (CharMap=="H2e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=G2e"; } if (CharMap=="I2e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=H2e"; } if (CharMap=="L6e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=L7e"; } if (CharMap=="D6e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B8e"; } if (CharMap=="K6e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=J6e"; } if (CharMap=="K7e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=J7e"; } if (CharMap=="L5e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=K5e"; } if (CharMap=="K3e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=J3e"; } if (CharMap=="B5e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A5e"; } if (CharMap=="B4e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A4e"; } if (XFlag) { MoveTo=0; EraseAll(); ToDo="C=XC&J="+((MapSizeY*(MapSizeX+1))+CharX); }} if (CharY>MapSizeY-1) { XFlag=1; if (CharMap=="J2e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=K2e"; } if (CharMap=="A1e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B1e"; } if (CharMap=="B0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=C0e"; } if (CharMap=="A0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B0e"; } if (CharMap=="F0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=G0e"; } if (CharMap=="I0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=J0e"; } if (CharMap=="J0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=K0e"; } if (CharMap=="H3e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=I3e"; } if (CharMap=="G2e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=H2e"; } if (CharMap=="H2e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=I2e"; } if (CharMap=="L7e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=L6e"; } if (CharMap=="D6e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B8e"; } if (CharMap=="J7e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=K7e"; } if (CharMap=="K5e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=L5e"; } if (CharMap=="J6e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=K6e"; } if (CharMap=="J3e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=K3e"; } if (CharMap=="A5e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B5e"; } if (CharMap=="A4e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B4e"; } if (CharMap=="B3e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=C3e"; } if (XFlag) { MoveTo=0; EraseAll(); ToDo="C=XC&J="+CharX; }} if (CharX>MapSizeX-1) { XFlag=1; if (CharMap=="G8e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=H0e"; } if (CharMap=="H0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=H8e"; } if (CharMap=="H8e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=G8e"; } if (CharMap=="A1e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A2e"; } if (CharMap=="B0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B1e"; } if (CharMap=="C0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=C1e"; } if (CharMap=="J9e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=J0e"; } if (CharMap=="D6e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B8e"; } if (CharMap=="K5e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=K6e"; } if (CharMap=="J3e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=J4e"; } if (CharMap=="A4e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A5e"; } if (CharMap=="B4e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B5e"; } if (XFlag) { MoveTo=0; EraseAll(); ToDo="C=XC&J="+CharY*(MapSizeX+1); }} if (CharX<1) { XFlag=1; if (CharMap=="H8e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=H0e"; } if (CharMap=="G8e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=H8e"; } if (CharMap=="H0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=G8e"; } if (CharMap=="A2e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A1e"; } if (CharMap=="B1e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B0e"; } if (CharMap=="C1e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=C0e"; } if (CharMap=="J0e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=J9e"; } if (CharMap=="D6e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B8e"; } if (CharMap=="K6e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=K5e"; } if (CharMap=="J4e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=J3e"; } if (CharMap=="A6e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A5e"; } if (CharMap=="A5e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=A4e"; } if (CharMap=="B5e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B4e"; } if (CharMap=="B4e") { XFlag=0; MoveTo=0; EraseAll(); ToDo="C=TP&J=B3e"; } if (XFlag) { MoveTo=0; EraseAll(); ToDo="C=XC&J="+((CharY*(MapSizeX+1))+MapSizeX); }}} else { if (CharY<1) { MoveTo=0; AllowScroll=0; EraseAll(); InputLine=InputLine+"N"; ToDo="C=N&J="+((MapSizeY*(MapSizeX+1))+CharX); } if (CharY>MapSizeY-1) { MoveTo=0; AllowScroll=0; EraseAll(); InputLine=InputLine+"S"; ToDo="C=S&J="+CharX; } if (CharX>MapSizeX-1) { MoveTo=0; AllowScroll=0; EraseAll(); InputLine=InputLine+"E"; ToDo="C=E&J="+CharY*(MapSizeX+1); } if (CharX<1) { MoveTo=0; AllowScroll=0; EraseAll(); InputLine=InputLine+"W"; ToDo="C=W&J="+((CharY*(MapSizeX+1))+MapSizeX); }}}} if (CharY==MoveToY) { if (CharX==MoveToX) { MoveTo=0; }}
} 



function ProDItem(i) { POP("Profiling "+i+"..."); ToDo="C=PR&J="+i; } 
function Charge(i) { HPOP(); ToDo="C=CG&J="+CharInven.substring(i*2,i*2+2); } 
function FillPotion(i) { HPOP(); ToDo="C=FP&J="+CharInven.substring(i*2,i*2+2); } 
function TreatBag(i) { if (CharMap == HouseMap) { POP("Not here"); } else { HPOP(); ToDo="C=TB&J="+CharInven.substring(i*2,i*2+2); }} 
function DrinkPotion(i) { HPOP(); ToDo="C=DP&J="+CharInven.substring(i*2,i*2+2); } 
function SPizza() { HPOP(); ToDo="C=PZ"; } 
function SMatch() { HPOP(); ToDo="C=MA"; } 
function MArrows() { HPOP(); ToDo="C=AR"; } 
function StackPArrows() { HPOP(); ToDo="C=SPA"; } 
function OpenChest(i) { ToDo="C=OC&J="+CharInven.substring(i*2,i*2+2); HPOP();} 
function OpenBarrel(i) { ToDo="C=OB&J="+CharInven.substring(i*2,i*2+2); HPOP(); } 
function FixAxe(i) { ToDo="C=FX&J="+CharInven.substring(i*2,i*2+2); HPOP(); } 
function FindFire() { firefound=0; NItems=IList.length/4; for (i=0;i<NItems;i++) { z=parseInt(IList.substring(i*4,(i*4)+2),16); c=IList.substring((i*4)+2,(i*4)+4); if (c=="Z6") { if (z==CharZ) { firefound=1; }}} return firefound; } 
function LightFire(i) { HPOP(); if (Map.charAt(CharZ*2)=="U") { POP("Not here."); } else { if (FindFire()) { POP("Not here."); } else { ToDo="C=LF"; }}} 
function DropItem(i) { HPOP(); if (CharInven.substring(i*2,i*2+2)=="Z6") { if (Map.charAt(CharZ*2)=="U") { POP("Not here."); } else { if (CharMap==HouseMap) { POP("Not here."); } else { ToDo="C=D&J="+CharInven.substring(i*2,i*2+2); }}} else { ToDo="C=D&J="+CharInven.substring(i*2,i*2+2); }} 
function EatFood(i) { ToDo="C=EF&J="+CharInven.substring(i*2,i*2+2); HPOP();} 
function Cook(i) { HPOP(); if (Map.charAt(CharZ*2)=="U") { POP("Not here."); } else { if (CharMap == "C6e") { POP("Not here."); } else { Skill="Cok"+CharInven.substring(i*2,i*2+2); }}} 
function WearArmr(i) { if (CharObj.charAt(0)=="A") { POP("You can\'t wear<br>that on a boat!"); } else { ToDo="C=WA&J="+CharInven.substring(i*2,i*2+2); HPOP(); }} 
function RemoveArmr(i) { HPOP(); ToDo="C=RA&J="+CharInven.substring(i*2,i*2+2); } 
function ReadNotes(i) { HPOP(); PopAlign="center"; if (CharInven.indexOf("H7")>-1) { POP("<p align=center>It says that if you align<br>a hot iron ore north-south,<br>and tap it with a hammer<br>it will turn into a Lodestone."); } else { POP("<p align=center>There are boxes and arrows<br>and lines and a lot of strange letters.<p align=center>It says something about pyramids."); }} 
function ReadFlyer(i) { HPOP(); PopAlign="center"; PUP="<p align=center>&nbsp;&nbsp;&nbsp;*** WANTED ***&nbsp;&nbsp;&nbsp;<p align=center><img src=\""+DirItem+"/OWb.gif\"><p align=center>$5,000 Reward<br>Dead or Alive"; POP(PUP); } 
function HatHouse() { HPOP(); EraseAll(); ToDo="C=TP&J=C6"; } 
function HatCastle() { HPOP(); EraseAll(); ToDo="C=TP&J=C8"; } 
function HatBLands() { HPOP(); EraseAll(); ToDo="C=TP&J=H7"; } 
function HatOakland() { HPOP(); EraseAll(); ToDo="C=TP&J=G1"; } 
function HatButler() { HPOP(); EraseAll(); ToDo="C=TP&J=E9"; } 
function MuteDItem(a) { ChatLine="/mute "+a; RefChat=1; POP("For how long?<p align=center><a href=javascript:Null(); onmousedown=\"javascript:MuteLen(\'"+a+"\',3);\">3 Minutes</a><br><a href=javascript:Null(); onmousedown=\"javascript:MuteLen(\'"+a+"\',60);\">60 Minutes</a><br><a href=javascript:Null(); onmousedown=\"javascript:MuteLen(\'"+a+"\',720);\">12 Hours</a>"); } 
function MuteLen(a,b) { ChatLine="/mute "+a+" "+b; RefChat=1; POP("Press enter to<br>confirm command."); } 
function TeleS(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="Tel"+IV[2]; } 
function GetSItem(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="Gts"+IV[1]; } 
function GetDItem(i){ GetDItem2(parseInt(IList.substring(i*4,(i*4)+2),16),IList.substring((i*4)+2,(i*4)+4));} 
function GetDItem2(itemz,c) { WalkHere(itemz); Que="Get"+c; } 
function AttkChicken(i){ AttkChicken2(parseInt(IList.substring(i*4,(i*4)+2),16),IList.substring((i*4)+2,(i*4)+4));} 
function AttkChicken2(itemz,c) { WalkHere(itemz); Que="Chk"+c; } 
function ReadSign(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="Red"+IV[2]; } 
function EnterSCity(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="Cty"+IV[2]; } 
function ExitSCity(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="XCt"+IV[4]; } 
function UseSItem(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="Use"+IV[1]; } 
function SMine(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="Min"+IV[1]; } 
function SFish(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="Fsh"+IV[2]; } 
function UseFire(i){ UseFire2(parseInt(IList.substring(i*4,(i*4)+2),16),IList.substring((i*4)+2,(i*4)+4));} 
function UseFire2(itemz,c) { WalkHere(itemz); Que="Use"+c; } 
function Trap(a) { Game="<center><font color=purple>Guards:</font><p>"; if (a==0||a==1) { Game=Game+"Freeze! Who are you?<br>What are you doing here?<br>" } if (a==2||a==3) { Game=Game+"You are under arrest!<br>Did you kill this player?<br>"; } if (a==1||a==3) { Game=Game+"The guard punches you.<br>"; } if (a==4||a==5) { Game=Game+"The guard beats you unconscious.<br>"; } if (a==5) { z=0; for (i=0; i<MapSizeY+1; i++) { for (j=0; j<MapSizeX+1; j++) { eval('T'+z+'.setAttribute(\"src\",\"'+DirTile+'/Q5.png\");'); z++; }} RefMap=0; EraseAll(); ToDo="C=KG"; } if (a==7) { Game=Game+"<p>Wake Up Prisoner.<br>Transport to the Kings Prison<br>Labor Camp arrives in 1 minute"; S[S.length]="I|W1|||81"; Sprung=setTimeout('S.pop();',5000); } if (a<7) { Sprung=setTimeout('Trap('+(a+1)+');',2000); } POP(Game); } 
function AttkSItem(i) { IV=S[i].split("|"); Fight=ItemID(IV[1]); HPOP(); a=0; if (IV[1]=="W1") { if (CharObj.substring(4,CharObj.length).indexOf("M2")<0) { Fight=""; WalkHere(IV[4]); Que="POPHey "+CharName; }} if (IV[1]=="Y7") { if (CharObj.substring(4,CharObj.length).indexOf("M2")>-1) { Fight=""; WalkHere(IV[4]); Que="POPVICTORY!"; }} if (IV[1]=="U2") { if (ExpCbt<193) { Fight=""; POP("The fox runs from you."); }} if (IV[1]=="V9") { POP("<p align=center>You players have ruined<br>everything - you must all DIE!!!"); } if (CharObj.indexOf("P2")>-1) { a=1; } if (CharObj.indexOf("P5")>-1) { a=1; } if (CharObj.indexOf("P8")>-1) { a=1; } if (CharObj.indexOf("P3")>-1) { a=3; } if (CharObj.indexOf("P7")>-1) { a=3; } if (CharObj.indexOf("P0")>-1) { a=3; } if (CharObj.indexOf("Pa")>-1) { a=2; } if (CharObj.indexOf("Pb")>-1) { a=2; } if (CharObj.indexOf("Pc")>-1) { a=2; } if (Fight!="") { if (a==0) { WalkHere(IV[4]); Que="Atk"+i; } else { if (a==1) { Skill="Atk"+i; RenderDam(); PopAlign="char"; POP("Casting Spell..."); if (IV[1]=="V9") { POP("<p align=center>You players have ruined<br>everything - you must all DIE!!!"); }} else { if (a==2) { Skill="Atk"+i; RenderDam(); PopAlign="char"; POP("Attacking..."); } else { a=0; if (CharObj.indexOf("N2") >-1) { a=2; } if (CharObj.indexOf("N4") >-1) { a=2; } if (CharObj.indexOf("N8") >-1) { a=2; } if (a==2) { Skill="Atk"+i; RenderDam(); PopAlign="char"; POP("Shooting Arrow..."); } else { POP("You need to wear a<br>quiver to shoot arrows!"); }}}}}} 
function SrchSItem(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="Srh"+IV[2]; } 
function PAttack(i) { PUP="Attacking "+i+"..."; POP(PUP); ToDo="C=PA&J="+i; } 
function Magic(a) { HPOP(); if (SResults=="") { GotStats="No"; document.all.MARS.src=Server+'?Q=SP&N='+CharName+'&P='+CharPswd+'&I='+InputLine+"&J="+a+'&Z='+CharZ; }} 
function PipeS(i) { IV=S[i].split("|"); WalkHere(IV[4]); Que="Pip"+IV[2]; } 
function QuiverExam(a) { PUP="Your quiver<br>has "+CharQuiver+" arrows,<br>and can hold<br>"+MaxQuiver+" arrows.<p>"; w1=(100/MaxQuiver)*CharQuiver; w2=100-w1; if (w2<0) { w2=0; } if (w1>100) { w1=100; } PUP=PUP+"<img src=\""+DirTile+"/DAM5.gif\" height=8 width="+w1+"><img src=\""+DirTile+"/DAM0.gif\" height=8 width="+w2+">"; POP(PUP); } 
function Quiver(a) { HPOP(); ToDo="C=QV&J="+CharInven.substring(a*2,a*2+2); } 
function RemoveArrows(a) { HPOP(); if (CharQuiver<10) { POP("No arrows to remove."); } else { ToDo="C=QA"; }} 
function EraseAll() { EraseStatic2();var D=document.getElementById("PlayerLayer"); if(D){ while(D.childNodes.length){ while(D.lastChild.childNodes.length){ D.lastChild.removeChild(D.lastChild.lastChild);}D.removeChild(D.lastChild);}} /* for (i=0;i<Obj.length;i++) { Di=D.childNodes[i]; IV=Obj[i].split("|"); if (t=document.getElementById(IV[2])) { Di.removeChild(t); eval('Di.removeChild('+IV[2]+'_2);'); if (t=document.getElementById(IV[2]+"_3")) { Di.removeChild(t); } if (t=document.getElementById(IV[2]+"_4")) { Di.removeChild(t); } if (t=document.getElementById(IV[2]+"_5")) { Di.removeChild(t); } if (t=document.getElementById(IV[2]+"_6")) { Di.removeChild(t); } if (t=document.getElementById(IV[2]+"_DAM")) { Di.removeChild(t); } if (t=document.getElementById(IV[2]+"_p")) { Di.removeChild(t); } if (t=document.getElementById(IV[2]+"_I")) { Di.removeChild(t); }}}*/ Obj.length=0; EraseItems(); EraseStatic(); if (document.getElementById(CharName)) { eval('docBody.removeChild('+CharName+');'); eval('docBody.removeChild('+CharName+'_2);'); if (document.getElementById(CharName+"_3")) { eval('docBody.removeChild('+CharName+'_3);'); } if (document.getElementById(CharName+"_4")) { eval('docBody.removeChild('+CharName+'_4);'); } if (document.getElementById(CharName+"_5")) { eval('docBody.removeChild('+CharName+'_5);'); } if (document.getElementById(CharName+"_6")) { eval('docBody.removeChild('+CharName+'_6);'); } if (document.getElementById(CharName+"_DAM")) { eval('docBody.removeChild('+CharName+'_DAM);'); } if (document.getElementById(CharName+"_p")) { eval('docBody.removeChild('+CharName+'_p);'); }} document.getElementById("fg").style.visibility="hidden"; } 
function EraseItems() { /* NItems=IList.length/4; for (i=0;i<NItems;i++) { if (document.getElementById('I'+i)) { eval('docBody.removeChild(I'+i+');'); } if (document.getElementById('I'+i+"_DAM")) { eval('docBody.removeChild(I'+i+'_DAM);'); }} LastItem=0;*/ IList=""; } 
function EraseStatic() { EraseStatic2(); if (document.getElementById("SDAM")) { eval('docBody.removeChild(SDAM);'); } if (document.getElementById("S_p")) { eval('docBody.removeChild(S_p);'); }} 
function EraseStatic2() { } 
function UpdateItems() { RefDItems=0; var D=document.getElementById("IListLayer"),a,o,j; if(!D){ D=document.createElement("DIV"); D.setAttribute("id","IListLayer"); D.style.position="absolute"; D.style.top=D.style.left=0; docBody.appendChild(D); } a=D.childNodes; NItems=IList.length/4; while(a.length>NItems){ D.removeChild(D.lastChild);} for (j=0;j<NItems;j++) { i=(Ref+j)%NItems; if (!(o=a[j])) { o=document.createElement("IMG"); o.setAttribute("id","I"+j); o.style.position="absolute"; D.appendChild(o); } z=parseInt(IList.substring(i*4,(i*4)+2),16); c=IList.substring((i*4)+2,(i*4)+4); ItemY=Math.floor(z/(MapSizeX+1)); ItemX=z-(ItemY*(MapSizeX+1)); o.style.zIndex=z==FURNACEz?1:ItemY*12+11; o.onmousedown=new Function("ClickHere("+z+");"); o.style.left=TopXPos+ItemX*32; o.style.top=TopYPos+ItemY*32; if (c=="J0") { c=CandyGfx; } if (c=="S5") { if (SwitchIs) { c=SwitchIs; }} if (c=="S6") { if (SwitchIs) { c=SwitchIs; }} e=DirItem+'/O'+c+'.gif'; if (o.src != e) { o.src=e; }}} 
function RefreshStatic() { RefSItem=0; var D=document.getElementById("StaticLayer"),U,So,Sa,Sx,Sx_DAM,pvp=PvParea; PvParea=0;FURNACEz=-1; if(!D){ D=document.createElement("DIV"); D.setAttribute("id","StaticLayer"); D.style.position="absolute"; D.style.top=D.style.left=0; docBody.appendChild(D); } while(D.childNodes.length>S.length){ while(D.lastChild.childNodes.length){ D.lastChild.removeChild(D.lastChild.lastChild);}D.removeChild(D.lastChild);} while(D.childNodes.length<S.length){ So=document.createElement("DIV");So.style.position="absolute";So.style.top=So.style.left="0";D.appendChild(So);} for(i=0;i<S.length;i++){ if(!S[i])S[i]=""; cmd=""; IV=S[i].split("|"); if (IV[3]) { cmd=IV[3].charAt(0); RefSItem=1;} SDam=""; if (IV[0].charAt(0)=="0") { SDam="1"; } if (IV[0].charAt(0)=="1") { SDam="1"; } if (IV[0].charAt(0)=="2") { SDam="2"; } if (IV[0].charAt(0)=="3") { SDam="3"; } if (IV[0].charAt(0)=="4") { SDam="4"; } if (IV[0].charAt(0)=="5") { SDam="5"; } if (SDam) { IV[0]=IV[0].charAt(1); S[i]=S[i].substring(1,S[i].length); RefSItem=1; } ItemY=Math.floor(IV[4]/(MapSizeX+1)); ItemX=IV[4]-(ItemY*(MapSizeX+1)); Sx=(Sa=(So=D.childNodes[i]).childNodes)[0];eval("S"+i+"=Sx");Sx_DAM=Sa[1]; if (!Sx) { Sx=document.createElement("IMG"); Sx.setAttribute("id",'S'+i); So.appendChild(Sx); Sx.src=DirItem+"/OZ0.gif"; Sx.style.position="absolute"; } Sx.style.zIndex=2; if (!Sx_DAM) { Sx_DAM=document.createElement("IMG"); Sx_DAM.setAttribute("id","S"+i+'_DAM'); So.appendChild(Sx_DAM); Sx_DAM.src=DirItem+"/OZ0.gif"; Sx_DAM.style.position="absolute"; Sx_DAM.style.zIndex=253; } switch (IV[0]) { case "R": if (IV[4]>0) { So.style.visibility="visible"; Sx.style.visibility="visible"; Sx.onmousedown=new Function("ClickHere("+IV[4]+");"); Sx.style.left=TopXPos+ItemX*32; Sx.style.top=TopYPos+ItemY*32; if (IV[1].substring(0,2)=="J0") { e=DirItem+'/O'+CandyGfx+'.gif'; } else { e=DirItem+'/O'+IV[1].substring(0,2)+'.gif'; } if(Sx.src!=e){ Sx.src=e;} if(!SDam){ e=DirItem+"/OZ0.gif";if(Sx_DAM.src!=e){ Sx_DAM.src=e;}} while(Sa.length>2){ So.removeChild(So.lastChild);}} else { e=DirItem+"/OZ0.gif";if(Sx_DAM.src!=e){ Sx_DAM.src=e;}while(Sa.length>2){ So.removeChild(So.lastChild);}} break; case "KR": if (So) { So.style.visibility="hidden"; } DeadItem=1; break; case "KI": Sx.style.visibility="hidden"; DeadItem=1; break; case "I": if (IV[3]) { switch (cmd) { case "N": RefSItem=1; S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX-(MapSizeX+1)); break; case "S": RefSItem=1; S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX+(MapSizeX+1)); break; case "E": RefSItem=1; S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX+1); break; case "W": RefSItem=1; S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX-1); break; } IV=S[i].split("|"); ItemY=Math.floor(IV[4]/(MapSizeX+1)); ItemX=IV[4]-(ItemY*(MapSizeX+1)); } Sx.style.visibility="visible"; if (IV[1]=="S1") { PvParea=pvp=1; if (CharPoison) { IV[1]="S3"; }} Sx.onmousedown=new Function("ClickHere("+IV[4]+");"); Sx.style.left=TopXPos+ItemX*32; Sx.style.top=TopYPos+ItemY*32; if (IV[1]=="S5") { if (SwitchIs) { IV[1]=SwitchIs; }} e=DirItem+'/O'+IV[1].substring(0,2)+'.gif'; if (Sx.src != e) { Sx.src=e; } if(!SDam){ e=DirItem+"/OZ0.gif";if(Sx_DAM.src!=e){ Sx_DAM.src=e;}} while(Sa.length>2){ So.removeChild(So.lastChild);} Sx.style.zIndex=(ItemY+(Sx.height>32?1:0))*12+4; if (IV[1]=="S3") { IV[1]="S1"; } break; case "N": if(Sa.length>2&&So.childNodes[2].id!=IV[2]){ while(Sa.length>2){ So.removeChild(So.lastChild);}} if (IV[0]=="N") { if (IV[3].charAt(0)=="Q") { if (ECon==0) { IV[3]=IV[3].substring(1,IV[3].length); S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3]+"|"+((ItemY*(MapSizeX+1))+ItemX); } else { IV[3]="X"; IV[0]="X"; S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|X|"+((ItemY*(MapSizeX+1))+ItemX); }} switch (cmd) { case "N": RefSItem=1; S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX-(MapSizeX+1)); break; case "S": RefSItem=1; S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX+(MapSizeX+1)); break; case "E": RefSItem=1; S[i]=IV[0]+"|"+IV[1].substring(0,3)+"R"+IV[1].substring(4,IV[1].length)+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX+1); break; case "W": RefSItem=1; S[i]=IV[0]+"|"+IV[1].substring(0,3)+"L"+IV[1].substring(4,IV[1].length)+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX-1); break; } IV = S[i].split("|"); if (IV[0]!="X") { Sx.src=DirItem+"/OZ0.gif";Sx.style.visibility="hidden"; Sx_DAM.src=DirItem+"/OZ0.gif"; /*while(Sa.length>2){ So.removeChild(So.lastChild);}*/ RenderObj(So,3); }} else { if (IV[0]=="R") { RAtk=IV[1]; RDrp=IV[2]; }} break; case "B": Sx.onmousedown=new Function("ClickHere("+IV[4]+");"); e=DirBuild+"/"+IV[1]+".gif"; if (Sx.src != e) { Sx.src=e; Sx.style.visibility="hidden"; Sx.onload=new Function("BuildPos("+i+")"); }else{ Sx.style.left=TopXPos+ItemX*32-Sx.width+32; Sx.style.top=TopYPos+ItemY*32-Sx.height+32; Sx.style.visibility="visible"; } if(IV[1]=="FURNACE"){ FURNACEz=parseInt(IV[4]);} if(pvp&&Sx.height>32&&(Sx.height<65||IV[1]=="PYRAMID")){ Sx.style.zIndex=ItemY*12+2;} if(!SDam){ e=DirItem+"/OZ0.gif";if(Sx_DAM.src!=e){ Sx_DAM.src=e;}} while(Sa.length>2){ So.removeChild(So.lastChild);} break; default: e=DirItem+"/OZ0.gif"; if(Sx.src!=e){ Sx.src=e;} if(!SDam&&Sx_DAM.src!=e){ Sx_DAM.src=e;} while(Sa.length>2){ So.removeChild(So.lastChild);}} if (IV[3]) { switch (cmd) { case "*": RefSItem=1; if (CharMap=="G5e") { S[i]=IV[0]+"|SKYE|"+IV[2]+"||"+IV[4]; } else { if (CharMap=="E9e") { S[i]=IV[0]+"|WHEAT|"+IV[2]+"||"+IV[4]; } else { if (CharMap=="G8") { S[i]=IV[0]+"|TOMATO|"+IV[2]+"||"+IV[4]; } else { if (CharMap=="L1e") { S[i]=IV[0]+"|CHEESE|"+IV[2]+"||"+IV[4]; } else { S[i]=IV[0]+"|DEADTREE|"+IV[2]+"||"+IV[4]; }}}} break; case ".": RefSItem=1; S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX); break; case "K": Sx.style.visibility="hidden"; break; case "R": Sx.style.visibility="visible"; RefSItem=1; S[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+"|"+((ItemY*(MapSizeX+1))+ItemX); break; case "O": RefSItem=1; S[i]="D|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+IV[3].charAt(0)+"|"+((ItemY*(MapSizeX+1))+ItemX); while(Sa.length){ So.removeChild(So.lastChild);} break; } if (SDam) { IV[0]=IV[0].charAt(1); if (IV[4]!=0) { Sx_DAM.style.left=TopXPos+ItemX*31; Sx_DAM.style.top=TopYPos+ItemY*31-13; e=DirTile+"/DAM"+SDam+".gif"; } else { e=DirItem+"/OZ0.gif"; }} else { e=DirItem+"/OZ0.gif"; } if (Sx_DAM.src != e) { Sx_DAM.src=e; }} Sx_DAM.style.visibility=Sx_DAM.src==DirItem+"/OZ0.gif"?"hidden":"visible"; } if (CharMap=="J6") { if (Flag != LastFlag) { document.getElementById("fg").innerHTML="<b><font color=white>&nbsp;"+Flag+"&nbsp;</font></b>"; document.getElementById("fg").style.visibility="visible"; if (Flag.charAt(0)==" ") { document.getElementById("fg").style.backgroundColor="red"; } else { document.getElementById("fg").style.backgroundColor="blue"; }}} else { document.getElementById("fg").style.visibility="hidden"; }} 
function BuildPos(i){ if(!S[i])return; var o=document.getElementById("S"+i),z=parseInt(S[i].split("|")[4]),ItemY=Math.floor(z/(MapSizeX+1)),ItemX=z-(ItemY*(MapSizeX+1)); o.style.left=(TopXPos+ItemX*32)-o.width+32; o.style.top=(TopYPos+ItemY*32)-o.height+32; o.style.visibility="visible"; } 
function HideFlag() { document.getElementById("fg").style.visibility="hidden"; } 
function UpdateObjs() { if (CharObj=="NEW") { HPOP(); } else { if (CharMap=="G0e") { Que=""; Skill=""; IStamp=CStamp; HPOP(); StepHere(CharZ+MapSizeX); } if (MoveTo==1) { Moving(); } else { if (Que) { ProcessQue(); }} if (TmpObj) { if (RefRPG>4) { eval('docBody.removeChild('+CharName+'_I);'); TmpObj=""; } else { a=TmpObj.substring(1,3); if (!document.getElementById(CharName+"_I")) { eval(CharName+'_I=document.createElement(\"IMG\");'); eval(CharName+'_I.setAttribute(\"id\",\"'+CharName+'_I\");'); eval('docBody.appendChild('+CharName+'_I);'); eval(CharName+'_I.style.position=\"absolute\";'); eval(CharName+'_I.style.zIndex=\"253\";'); } eval(CharName+'_I.style.left='+(TopXPos+(CharX*32))+';'); eval(CharName+'_I.style.top='+(TopYPos+(CharY*32)-45)+';'); eval(CharName+'_I.style.height=28;'); eval(CharName+'_I.style.width=28;'); e=DirItem+"/O"+a+".gif"; if (document.getElementById(CharName+"_I").src != e) { eval(CharName+'_I.setAttribute(\"src\",e);'); }}} var Do=document.getElementById("PlayerLayer"),D,D2=[]; if(!Do){ Do=document.createElement("DIV"); Do.setAttribute("id","PlayerLayer"); Do.style.position="absolute"; Do.style.top=Do.style.left=0; docBody.appendChild(Do); } while(Do.childNodes.length>Obj.length){ while(Do.lastChild.childNodes.length){ Do.lastChild.removeChild(Do.lastChild.lastChild);}Do.removeChild(Do.lastChild);} if(Do.childNodes.length>1&&Ref!=Objlastr){ Do.appendChild(Do.removeChild(Do.firstChild));Objlastr=Ref;} for (i=0;i<Obj.length;i++) { if (Obj[i]!="delete") { IV = Obj[i].split("|"); D=document.getElementById(IV[2]); if(D){ D=D.parentNode;}else{ D=document.createElement("DIV");D.style.position="absolute";D.style.top=D.style.left="0";Do.appendChild(D);} RenderObj(D,5); if (IV[3]) { cmd=IV[3].charAt(0); if (cmd=="N") { ItemY=ItemY-1; Obj[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+"|"+((ItemY*(MapSizeX+1))+ItemX); } if (cmd=="S") { ItemY=ItemY+1; Obj[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+"|"+((ItemY*(MapSizeX+1))+ItemX); } if (cmd=="W") { ItemX=ItemX-1; Obj[i]=IV[0]+"|"+IV[1].substring(0,3)+"L"+IV[1].substring(4,IV[1].length)+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+"|"+((ItemY*(MapSizeX+1))+ItemX); } if (cmd=="E") { ItemX=ItemX+1; Obj[i]=IV[0]+"|"+IV[1].substring(0,3)+"R"+IV[1].substring(4,IV[1].length)+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length)+"|"+((ItemY*(MapSizeX+1))+ItemX); } if (cmd==".") { Obj[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[2]+"|"+IV[3].substring(1,IV[3].length); } if (cmd>"0" && cmd<"6") { if (!document.getElementById(IV[2]+"_DAM")) { eval(IV[2]+'_DAM=document.createElement(\"IMG\");'); eval(IV[2]+'_DAM.setAttribute(\"id\",\"'+IV[2]+'_DAM\");'); eval('D.appendChild('+IV[2]+'_DAM);'); eval(IV[2]+'_DAM.style.position=\"absolute\";'); eval(IV[2]+'_DAM.style.zIndex=\"253\";'); } eval(IV[2]+'_DAM.style.left='+(TopXPos+(ItemX*32))+';'); eval(IV[2]+'_DAM.style.top='+(TopYPos+(ItemY*32)-25)+';'); e=DirTile+"/DAM"+cmd+".gif"; if (document.getElementById(IV[2]+"_DAM").src != e) { eval(IV[2]+'_DAM.setAttribute(\"src\",\"'+DirTile+'/DAM'+cmd+'.gif\");'); }} else { if (document.getElementById(IV[2]+"_DAM")) { eval('D.removeChild('+IV[2]+'_DAM);'); }} if (cmd=="I" && IV[3].charAt(1)>="A") { a=IV[3].substring(1,3); IV[3]=IV[3].substring(3,IV[3].length)+"I"; Obj[i]=IV[0]+"|"+IV[1]+"|"+IV[2]+"|"+IV[3]+"|"+IV[4]; if (!document.getElementById(IV[2]+"_I")) { eval(IV[2]+'_I=document.createElement(\"IMG\");'); eval(IV[2]+'_I.setAttribute(\"id\",\"'+IV[2]+'_I\");'); eval('D.appendChild('+IV[2]+'_I);'); eval(IV[2]+'_I.style.position=\"absolute\";'); eval(IV[2]+'_I.style.zIndex=\"253\";'); } eval(IV[2]+'_I.style.left='+(TopXPos+(ItemX*32))+';'); eval(IV[2]+'_I.style.top='+(TopYPos+(ItemY*32)-45)+';'); eval(IV[2]+'_I.style.height=28;'); eval(IV[2]+'_I.style.width=28;'); e=DirItem+'/O'+a+'.gif'; if (document.getElementById(IV[2]+"_I").src != e) { eval(IV[2]+'_I.setAttribute(\"src\",\"'+DirItem+'/O'+a+'.gif\");'); }} else { if (document.getElementById(IV[2]+"_I")) { if (RefRPG>4) { eval('D.removeChild('+IV[2]+'_I);'); }}} if (cmd=="O") { eval('D.removeChild('+IV[2]+');'); eval('D.removeChild('+IV[2]+'_2);'); if (document.getElementById(IV[2]+"_3")) { eval('D.removeChild('+IV[2]+'_3);'); } if (document.getElementById(IV[2]+"_4")) { eval('D.removeChild('+IV[2]+'_4);'); } if (document.getElementById(IV[2]+"_5")) { eval('D.removeChild('+IV[2]+'_5);'); } if (document.getElementById(IV[2]+"_6")) { eval('D.removeChild('+IV[2]+'_6);'); } if (document.getElementById(IV[2]+"_DAM")) { eval('D.removeChild('+IV[2]+'_DAM);'); } if (document.getElementById(IV[2]+"_p")) { eval('D.removeChild('+IV[2]+'_p);'); } Do.removeChild(D); Obj[i]="delete"; }}}}}} 
function RenderObj(D,z) { var D1; if(!D){ D=(D=document.getElementById(IV[2]))&&D.parent?D.parent:docBody;} if (IV[0]!="T") { ItemY=Math.floor(IV[4]/(MapSizeX+1)); ItemX=IV[4]-(ItemY*(MapSizeX+1)); ItemZ=ItemY*12+(z||10); X=TopXPos+(ItemX*32); Y=TopYPos+(ItemY*32); d="R"; if ( IV[1].charAt(3)=="L") { d="L"; } if (!(D1=document.getElementById(IV[2]))) { D1=eval(IV[2]+'=document.createElement(\"IMG\");'); D1.setAttribute("id",IV[2]); eval(IV[2]+'_2=document.createElement(\"IMG\");'); eval(IV[2]+'_2.setAttribute(\"id\",\"'+IV[2]+'_2\");'); D.appendChild(D1); eval('D.appendChild('+IV[2]+'_2);'); } D1.onmousedown=new Function("ClickHere("+IV[4]+");"); D1.style.position="absolute"; D1.style.left=X; D1.style.top=Y; D1.style.visibility="visible"; D1.style.zIndex=ItemZ; eval(IV[2]+'_2.onmousedown=new Function(\"ClickHere('+(IV[4]-(MapSizeX+1))+');\");'); eval(IV[2]+'_2.style.position=\"absolute\";'); eval(IV[2]+'_2.style.left='+(X)+';'); if (document.getElementById(IV[2]+"_DAM")) { eval(IV[2]+'_DAM.style.left='+(X)+';'); eval(IV[2]+'_DAM.style.top='+(Y-25)+';'); } eval(IV[2]+'_2.style.top='+(Y-16)+';'); fb=""; if (IV[1].indexOf("A5")>-1) { fb="A5"; } if (IV[1].indexOf("A6")>-1) { fb="A6"; } if (IV[1].indexOf("A7")>-1) { fb="A7"; } if (fb) { if (Map.charAt(IV[4]*2)=="U") { e=DirItem+'/O'+fb; if (D1.src != e+".gif") { D1.setAttribute("src",e+'.gif'); } e=DirItem+'/OZ0'; if (document.getElementById(IV[2]+"_2").src != e+".gif") { eval(IV[2]+'_2.setAttribute(\"src\",\"'+e+'.gif\");'); } if (document.getElementById(IV[2]+"_3")) { eval('D.removeChild('+IV[2]+'_3);'); } if (document.getElementById(IV[2]+"_4")) { eval('D.removeChild('+IV[2]+'_4);'); } if (document.getElementById(IV[2]+"_5")) { eval('D.removeChild('+IV[2]+'_5);'); } if (document.getElementById(IV[2]+"_6")) { eval('D.removeChild('+IV[2]+'_6);'); }} else { fb=""; }} if (fb=="") { if (D1.src != DirChar+'/CHR'+IV[1].charAt(0)+IV[1].charAt(2)+d+'.gif' ) { eval(IV[2]+'.setAttribute(\"src\",\"'+DirChar+'/CHR'+IV[1].charAt(0)+IV[1].charAt(2)+d+'.gif\");'); } if (D1.src != DirChar+'/CHRH'+IV[1].charAt(0)+IV[1].charAt(1)+d+'.gif' ) { eval(IV[2]+'_2.setAttribute(\"src\",\"'+DirChar+'/CHRH'+IV[1].charAt(0)+IV[1].charAt(1)+d+'.gif\");'); } if (document.getElementById(IV[2]+"_p")) { eval('D.removeChild('+IV[2]+'_p);'); } eval(IV[2]+'_2.style.visibility=\"visible\";'); eval(IV[2]+'_2.style.zIndex=ItemZ;'); if (IV[1].length>3) { a=IV[1].substring(4,IV[1].length); if (a.indexOf("L")>-1) { if (!document.getElementById(IV[2]+"_3")) { eval(IV[2]+'_3=document.createElement(\"IMG\");'); eval(IV[2]+'_3.setAttribute(\"id\",\"'+IV[2]+'_3\");'); eval('D.appendChild('+IV[2]+'_3);'); eval(IV[2]+'_3.style.position=\"absolute\";'); } eval(IV[2]+'_3.style.zIndex=ItemZ;'); eval(IV[2]+'_3.onmousedown=new Function(\"ClickHere('+(IV[4]-(MapSizeX+1))+');\");'); eval(IV[2]+'_3.style.left='+(X)+';'); eval(IV[2]+'_3.style.top='+(Y-24)+';'); if (a.indexOf("L")>-1) { e=DirChar+'/CHI'+a.substring(a.indexOf("L"),a.indexOf("L")+2)+d; } else { e=DirChar+'/CHI'+a.substring(a.indexOf("M"),a.indexOf("M")+2)+d; } if (document.getElementById(IV[2]+"_3").src != e+".gif") { eval(IV[2]+'_3.setAttribute(\"src\",\"'+e+'.gif\");'); }} else { if (a.indexOf("M")>-1) { if (!document.getElementById(IV[2]+"_3")) { eval(IV[2]+'_3=document.createElement(\"IMG\");'); eval(IV[2]+'_3.setAttribute(\"id\",\"'+IV[2]+'_3\");'); eval('D.appendChild('+IV[2]+'_3);'); eval(IV[2]+'_3.style.position=\"absolute\";'); } eval(IV[2]+'_3.style.zIndex=ItemZ;'); eval(IV[2]+'_3.onmousedown=new Function(\"ClickHere('+(IV[4])+');\");'); eval(IV[2]+'_3.style.left='+(X)+';'); eval(IV[2]+'_3.style.top='+(Y-20)+';'); e=DirChar+'/CHI'+a.substring(a.indexOf("M"),a.indexOf("M")+2)+d; if (document.getElementById(IV[2]+"_3").src != e+".gif") { eval(IV[2]+'_3.setAttribute(\"src\",\"'+e+'.gif\");'); }} else { if (document.getElementById(IV[2]+"_3")) { eval('D.removeChild('+IV[2]+'_3);'); }}} if (a.indexOf("N")>-1) { if (!document.getElementById(IV[2]+"_6")) { eval(IV[2]+'_6=document.createElement(\"IMG\");'); eval(IV[2]+'_6.setAttribute(\"id\",\"'+IV[2]+'_6\");'); eval('D.appendChild('+IV[2]+'_6);'); eval(IV[2]+'_6.style.position=\"absolute\";'); } eval(IV[2]+'_6.style.zIndex=ItemZ;'); eval(IV[2]+'_6.onmousedown=new Function(\"ClickHere('+(IV[4])+');\");'); eval(IV[2]+'_6.style.left='+(X)+';'); if (a.indexOf("N4")>-1) { eval(IV[2]+'_6.style.top='+(Y-20)+';'); } else { if (a.indexOf("N2")>-1) { eval(IV[2]+'_6.style.top='+(Y-20)+';'); } else { if (a.indexOf("N8")>-1) { eval(IV[2]+'_6.style.top='+(Y-20)+';'); } else { eval(IV[2]+'_6.style.top='+(Y)+';'); }}} e=DirChar+'/CHI'+a.substring(a.indexOf("N"),a.indexOf("N")+2)+d; if (document.getElementById(IV[2]+"_6").src != e+".gif") { eval(IV[2]+'_6.setAttribute(\"src\",\"'+e+'.gif\");'); }} else { if (document.getElementById(IV[2]+"_6")) { eval('D.removeChild('+IV[2]+'_6);'); }} if (a.indexOf("O")>-1) { if (!document.getElementById(IV[2]+"_4")) { eval(IV[2]+'_4=document.createElement(\"IMG\");'); eval(IV[2]+'_4.setAttribute(\"id\",\"'+IV[2]+'_4\");'); eval('D.appendChild('+IV[2]+'_4);'); eval(IV[2]+'_4.style.position=\"absolute\";'); } eval(IV[2]+'_4.style.zIndex=ItemZ;'); eval(IV[2]+'_4.onmousedown=new Function(\"ClickHere('+(IV[4])+');\");'); eval(IV[2]+'_4.style.left='+(X)+';'); eval(IV[2]+'_4.style.top='+(Y)+';'); e=DirChar+'/CHI'+a.substring(a.indexOf("O"),a.indexOf("O")+2)+d; if (document.getElementById(IV[2]+"_4").src != e+".gif") { eval(IV[2]+'_4.setAttribute(\"src\",\"'+e+'.gif\");'); }} else { if (document.getElementById(IV[2]+"_4")) { eval('D.removeChild('+IV[2]+'_4);'); }} if (a.indexOf("P")>-1 || a.indexOf("B")>-1) { if (!document.getElementById(IV[2]+"_5")) { eval(IV[2]+'_5=document.createElement(\"IMG\");'); eval(IV[2]+'_5.setAttribute(\"id\",\"'+IV[2]+'_5\");'); eval('D.appendChild('+IV[2]+'_5);'); eval(IV[2]+'_5.style.position=\"absolute\";'); } eval(IV[2]+'_5.style.zIndex=ItemZ;'); eval(IV[2]+'_5.onmousedown=new Function(\"ClickHere('+(IV[4])+');\");'); if (IV[1].charAt(3)=="L") { eval(IV[2]+'_5.style.left='+(X+2)+';'); if (a.indexOf("B")>-1) { eval(IV[2]+'_5.style.left='+(X-8)+';'); }} else { eval(IV[2]+'_5.style.left='+(X-2)+';'); if (a.indexOf("B")>-1) { eval(IV[2]+'_5.style.left='+(X+8)+';'); }} if (a.indexOf("P")>-1) { e=DirChar+'/CHI'+a.substring(a.indexOf("P"),a.indexOf("P")+2)+d+'.gif'; eval(IV[2]+'_5.style.top='+(Y-14)+';'); } else { e=DirChar+'/CHI'+a.substring(a.indexOf("B"),a.indexOf("B")+2)+d+'.gif'; eval(IV[2]+'_5.style.top='+(Y-6)+';'); } if (document.getElementById(IV[2]+"_5").src != e) { eval(IV[2]+'_5.setAttribute(\"src\",\"'+e+'\");'); }} else { if (document.getElementById(IV[2]+"_5")) { eval('D.removeChild('+IV[2]+'_5);'); }}}}} else { if (IV[2]=="F") { if (document.getElementById("S_p")) { eval('D.removeChild(S_p);'); } eval('S_p=document.createElement(\"p\");'); eval('S_p.setAttribute(\"id\",\"S_p\");'); eval('S_t=document.createTextNode(\"-'+IV[1].substring(1,IV[1].length)+'-\");'); eval('S_p.appendChild(S_t);'); eval('D.appendChild(S_p);'); ItemY=Math.floor(IV[4]/(MapSizeX+1)); ItemX=IV[4]-(ItemY*(MapSizeX+1)); eval('S_p.style.position=\"absolute\";'); eval('S_p.style.left='+(TopXPos+(ItemX*32)+21)+';'); eval('S_p.style.top='+(TopYPos+(ItemY*32)+4)+';'); eval('S_p.style.fontWeight=\"bold\";'); eval('S_p.style.color=\"black\";'); if (IV[1].charAt(0)=="R") { eval('S_p.style.backgroundColor=\"#ffc6c6\";'); } else { eval('S_p.style.backgroundColor=\"#c6ffff\";'); }}}} 
function RenderDam() { DAM=Math.round((5/MaxHit)*CharHit); if (DAM<"1") { DAM="1"; } if (DAM>"5") { DAM="5"; } if (!document.getElementById(CharName+"_DAM")) { eval(CharName+'_DAM=document.createElement(\"IMG\");'); eval(CharName+'_DAM.setAttribute(\"id\",\"'+CharName+'_DAM\");'); eval('docBody.appendChild('+CharName+'_DAM);'); eval(CharName+'_DAM.style.position=\"absolute\";'); eval(CharName+'_DAM.style.zIndex=\"253\";'); } eval(CharName+'_DAM.onmousedown=new Function(\"ClickHere('+(CharZ)+');\");'); eval(CharName+'_DAM.style.left='+(TopXPos+(CharX*31))+';'); eval(CharName+'_DAM.style.top='+(TopYPos+(CharY*31)-25)+';'); e=DirTile+"/DAM"+DAM+".gif"; if (document.getElementById(CharName+"_DAM").src != e) { eval(CharName+'_DAM.setAttribute(\"src\",\"'+DirTile+'/DAM'+DAM+'.gif\");'); }} 
function CheckLights() { if (CharInven.indexOf("B2")>-1) { Darkness=0; } if (CharObj.indexOf("L4")>-1) { Darkness=1; } if (CharObj.indexOf("Ma")>-1) { Darkness=0; } if (CharObj.indexOf("Mb")>-1) { Darkness=0; } if (Darkness) { Darkness=0; if (NoLights.indexOf(CharMap)>-1) { Darkness=1; } if (CharMap=="F4e") { if (SwitchIs=="S6") { Darkness=0; }} if (Darkness) { LightsOff(); }} else { if (CharMap!="A9e") { LightsOn(); }}} 
function LightsOn() { z=0; for (i=0; i<MapSizeY+1; i++) { for (j=0; j<MapSizeX+1; j++) { eval('T'+z+'.setAttribute(\"src\",\"'+DirTile+'/'+Map.charAt(z*2)+Map.charAt((z*2)+1)+'.png\");'); z++; }}} 
function LightsOff() { z=0; for (i=0; i<MapSizeY+1; i++) { for (j=0; j<MapSizeX+1; j++) { eval('T'+z+'.setAttribute(\"src\",\"'+DirTile+'/Q5.png\");'); z++; }}} 
function RefreshSB() {
 RefSB=0; SB="<p align=center>";
 if (SBMode==-1) {
  SB=SB+"<center><font face=arial><b>"+CVer+"<p>";
  SB=SB+"<p>Server Two<br>Back Online!";
  SB=SB+"<p>All money, banking,<br>and trade removed.<br>";
  SB=SB+"<p>Players must now<br>build their houses.";
  SB=SB+"<p>Skill levels no<br>longer required.";
  SB=SB+"<p></b></font></center>";
  document.getElementById("SIDE").innerHTML=SB;
 }
 if (SBMode==0) {
  SB=SB+"<center><font face=arial><b>"+Game+"</b></font></center>";
  document.getElementById("SIDE").innerHTML=SB;
 }
 if (SBMode==1) {
  if (DrawSB) {
   DrawSB=0;
   for (i=0;i<NumInven;i++) {
    SB=SB+"<img id=\"Inv"+i+"\" src=\""+DirItem+"/OZ0.gif\" height=32 width=32 ";
    if (TradeOn) {
     SB=SB+"onmousedown=\"Offer("+i+");\"";
    } else {
     SB=SB+"onmousedown=\"ClickInven("+i+");\"";
    }
    SB=SB+" border=1> ";
   }
   SB=SB+"<br><span id=\"SBStats\"><font face=arial><b>"+CharName+"</b><br>";
   w1=(100/MaxHit)*CharHit; w2=100-w1;
   if (w1<0) { w1=0; } if (w1>100) { w1=100; }
   if (w2<0) { w2=0; } if (w2>100) { w2=100; }
   SB=SB+"<b id=HitGraph><img src=\""+DirTile+"/DAM5.gif\" height=8 width="+w1+" border=0><img src=\""+DirTile+"/DAM0.gif\" height=8 width="+w2+" border=0></b>";
   SB=SB+"<p>Hits:<font face=courier size=+1> <b id=HitMaxHit>"+CharHit+"/"+MaxHit+"</b></font>";
   SB=SB+"<br>Armor: <font face=courier size=+1><b id=Armor>"+CharArm+"</b></font>";
   SB=SB+"<br>&nbsp;Weapon: <font face=courier size=+1><b id=Weapon>"+CharWpn+"</b></font>";
   if (TradeOn==0) { SB=SB+"<p><a href=javascript:Null(); onmousedown=\"javascript:Keys(0);\"><img src=http://queville.com/images/buttons/d_key.gif height=21 width=38 border=0></a>";
   SB=SB+" <a href=javascript:Null(); onmousedown=\"javascript:WhoMode(0);\"><img src=http://queville.com/images/buttons/d_who.gif border=0></a>";
   SB=SB+" <a href=\"javascript:Null();\" onmousedown=\"javascript:Messages(0);\"><img id=\"msgs\" src=\"http://queville.com/images/buttons/d_msgs.gif\" border=0></a>";
   SB=SB+"<br><a href=javascript:Null(); onmousedown=\"javascript:ClickStat(0);\"><img src=http://queville.com/images/buttons/d_stat.gif border=0></a>";
   SB=SB+" <a href=javascript:Null(); onmousedown=\"javascript:Reset(\'\');\"><img src=http://queville.com/images/buttons/d_reset.gif border=0></a>";
   SB=SB+" <a href=javascript:Null(); onmousedown=\"javascript:Logout();\"><img src=http://queville.com/images/buttons/d_logout.gif border=0></a>";
  } else {
   SB=SB+"<p><img src=http://queville.com/images/buttons/d_key.gif height=21 width=38 border=0>";
   SB=SB+" <img src=http://queville.com/images/buttons/d_who.gif border=0>";
   SB=SB+" <a href=\"javascript:Null();\" onmousedown=\"javascript:Messages(0);\"><img id=\"msgs\" src=\"http://queville.com/images/buttons/d_msgs.gif\" border=0></a>";
   SB=SB+"<br><img src=http://queville.com/images/buttons/d_stat.gif border=0>"; SB=SB+" <img src=http://queville.com/images/buttons/d_reset.gif border=0>";
   SB=SB+" <img src=http://queville.com/images/buttons/d_logout.gif border=0>";
  }
  SB=SB+"</span>"; document.getElementById("SIDE").innerHTML=SB;
 }
 a=CharObj.substring(4,CharObj.length);
 for (i=0;i<NumInven;i++) { 
  if (CharInven.substring(i*2,i*2+2)=="J0") {
   document.getElementById("Inv"+i).src=DirItem+"/O"+CandyGfx+".gif";
  } else {
   document.getElementById("Inv"+i).src=DirItem+"/O"+CharInven.substring(i*2,i*2+2)+".gif";
  }
  bg="#ffffd0";
  if (CharInven.indexOf("F3")==(i*2)) { if (CharObj.charAt(1)=="0") { bg="#80FF80"; }}
  if (CharInven.indexOf("F4")==(i*2)) { if (CharObj.charAt(2)=="X") { bg="#80FF80"; }}
  if (CharInven.indexOf("F5")==(i*2)) { if (CharObj.charAt(2)=="Z") { bg="#80FF80"; }}
  if (CharInven.indexOf("F6")==(i*2)) { if (CharObj.charAt(2)=="W") { bg="#80FF80"; }}
  if (CharInven.indexOf("F7")==(i*2)) { if (CharObj.charAt(2)=="V") { bg="#80FF80"; }}
  if (CharInven.indexOf("F8")==(i*2)) { if (CharObj.charAt(2)=="U") { bg="#80FF80"; }}
  if (CharInven.indexOf("F9")==(i*2)) { if (CharObj.charAt(2)=="T") { bg="#80FF80"; }}
  if (CharInven.indexOf("Fa")==(i*2)) { if (CharObj.charAt(2)=="R") { bg="#80FF80"; }}
  if (a.indexOf("L")>-1) { if (CharInven.indexOf(a.substring(a.indexOf("L"),a.indexOf("L")+2)) == (i*2)) { bg="#80FF80"; }}
  if (a.indexOf("M")>-1) { if (CharInven.indexOf(a.substring(a.indexOf("M"),a.indexOf("M")+2)) == (i*2)) { bg="#80FF80"; }}
  if (a.indexOf("N")>-1) { b=a.substring(a.indexOf("N"),a.indexOf("N")+2);
  if (CharInven.indexOf(b)==(i*2)) { bg="#80FF80"; }
  if (b=="N2") { if (CharInven.indexOf("N4")==(i*2)) { bg="#80FF80"; }}
  if (b=="N8") { if (CharInven.indexOf("N4")==(i*2)) { bg="#80FF80"; }}
 }
 if (a.indexOf("O")>-1) { if (CharInven.indexOf(a.substring(a.indexOf("O"),a.indexOf("O")+2))==(i*2)) { bg="#80FF80"; }}
 if (a.indexOf("B")>-1) { if (CharInven.indexOf(a.substring(a.indexOf("B"),a.indexOf("B")+2))==(i*2)) { bg="#80FF80"; }}
 if (a.indexOf("P")>-1) { if (CharInven.indexOf(a.substring(a.indexOf("P"),a.indexOf("P")+2))==(i*2)) { bg="#80FF80"; }}
 if (CharInven.substring(i*2,i*2+2)>="N1" && CharInven.substring(i*2,i*2+2)<="N9") {
  b=".."; switch (CharObj.charAt(2)) {
   case "6": b="N1"; break;
   case "7": b="N3"; break;
   case "8": b="N5"; break;
   case "9": b="N7"; break;
   case "0": b="N9"; break;
  }
  if (CharInven.substring(i*2,i*2+2)==b) { if (CharInven.indexOf(b) == (i*2)) { bg="#80FF80"; }}
 }
 document.getElementById("Inv"+i).style.backgroundColor=bg;
 }
 w1=(100/MaxHit)*CharHit; w2=100-w1;
 if (w1<0) { w1=0; } if (w1>100) { w1=100; }
 if (w2<0) { w2=0; } if (w2>100) { w2=100; }
 document.getElementById("HitMaxHit").innerHTML=CharHit+"/"+MaxHit;
 document.getElementById("Weapon").innerHTML=CharWpn;
 document.getElementById("Armor").innerHTML=CharArm;
 document.getElementById("HitGraph").innerHTML="<img src=\""+DirTile+"/DAM5.gif\" height=8 width="+w1+" border=0><img src=\""+DirTile+"/DAM0.gif\" height=8 width="+w2+" border=0>";
}
} 
function ClickSB(s) { IStamp=CStamp; SBMode=s; RefreshSB(); } 
function Digits(a) { if (a<10) { return "0"+a; } else { if (a>99) { return "00"; } else { return a; }}} 
function Graph(a1) { } 
function DeathPot(a) { ToDo="C=DP&J=Dc"; HPOP(); } 
function WearPumpkin(a) { ToDo="C=WP"; HPOP(); } 
function WearRange(a) { ToDo="C=WRA"; HPOP(); } 
function WearRobes(i) { ToDo="C=WR&J="+CharInven.substring(i*2,i*2+2); HPOP(); } 
function ClickInven(i) { IStamp=CStamp; if (Skill!="D") { if (CharInven.substring(i*2,i*2+2)!="Z0") { PUP="<b>"; MenuItem=CharInven.substring(i*2,i*2+2); a=CharObj.substring(4,CharObj.length); BAx=0; if (MenuItem=="B4") { if (a.indexOf("B4")>-1) { BAx=1; } else { BAx=2; }} if (MenuItem=="B5") { if (a.indexOf("B5")>-1) { BAx=1; } else { BAx=2; }} if (MenuItem=="B6") { if (a.indexOf("B6")>-1) { BAx=1; } else { BAx=2; }} if (MenuItem=="B9") { if (a.indexOf("B9")>-1) { BAx=1; } else { BAx=2; }} if (MenuItem=="B0") { if (a.indexOf("B0")>-1) { BAx=1; } else { BAx=2; }} if (MenuItem=="Ba") { if (a.indexOf("Ba")>-1) { BAx=1; } else { BAx=2; }} if (MenuItem=="Bb") { if (a.indexOf("Bb")>-1) { BAx=1; } else { BAx=2; }} if (BAx==1) { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:RemoveArmr("+i+")\">Remove "+ItemID(CharInven.substring(i*2,i*2+2))+"</a><br>"; } if (BAx==2) { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WearArmr("+i+")\">Wield "+ItemID(CharInven.substring(i*2,i*2+2))+"</a><br>"; } if (MenuItem=="Ca") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:ReadNotes("+i+")\">Read Notes</a><br>"; } if (MenuItem=="Cb") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:ReadFlyer("+i+")\">Read Flyer</a><br>"; } if (MenuItem=="F3") { if (CharObj.charAt(1)=="0") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WearPumpkin("+i+")\">Remove Pumpkin</a><br>"; } else { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WearPumpkin("+i+")\">Wear Pumpkin</a><br>"; }} RFlag=""; if (MenuItem=="F4") { RFlag="X"; } if (MenuItem=="F5") { RFlag="Z"; } if (MenuItem=="F6") { RFlag="W"; } if (MenuItem=="F7") { RFlag="V"; } if (MenuItem=="F8") { RFlag="U"; } if (MenuItem=="F9") { RFlag="T"; } if (MenuItem=="Fa") { RFlag="R"; } if (RFlag) { if (CharObj.charAt(2)==RFlag) { RFlag="Remove "; } else { RFlag="Wear "; } PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WearRobes("+i+")\">"+RFlag+ItemID(MenuItem)+"</a><br>"; } if (MenuItem>="D6" && MenuItem<="D8") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:LightFire("+i+")\">Light Fire</a><br>"; if (MenuItem!="D8") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:SMatch()\">Stack Matches</a><br>"; }} if (MenuItem=="C4") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:FixAxe("+i+")\">Fix Broken Pick Axe</a><br>"; } if (MenuItem=="C6") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:FixAxe("+i+")\">Fix Broken Axe</a><br>"; } if (MenuItem=="E1") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:OpenChest("+i+")\">Open Treasure Chest</a><br>"; } if (MenuItem=="E2") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:OpenBarrel("+i+")\">Open Catfish</a><br>"; } if (MenuItem=="E3") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:OpenBarrel("+i+")\">Open Flounder</a><br>"; } if (MenuItem=="E4") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:OpenBarrel("+i+")\">Open Lobster</a><br>"; } if (MenuItem=="E6") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:MArrows()\">Make Arrows</a><br>"; } if (MenuItem=="E7") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:Quiver("+i+")\">Quiver Arrows</a><br>"; } if (MenuItem=="H3") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:Charge("+i+")\">Charge Wand</a><br>"; } if (MenuItem=="H5") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:Charge("+i+")\">Charge Wand</a><br>"; } if (MenuItem=="H8") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:Charge("+i+")\">Charge Wand</a><br>"; } if (MenuItem>="Q0" && MenuItem<="Qz" && MenuItem!="Q1") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:SCoin()\">Stack Coins</a><br>"; } if (MenuItem>="G0" && MenuItem<="Gz") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:Cook("+i+")\">Cook "+ItemID(MenuItem)+"</a><br>"; } if (MenuItem>="J0" && MenuItem<="K9") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:EatFood("+i+")\">Eat "+ItemID(MenuItem)+"</a><br>"; } if (MenuItem=="I0") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:EatFood("+i+")\">Eat "+ItemID(MenuItem)+"</a><br>"; } if (MenuItem>="K7" && MenuItem<="K9") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:SPizza("+i+")\">Stack "+ItemID(MenuItem)+"</a><br>"; } if (MenuItem>="L0" && MenuItem<="Mz") { if (a.indexOf(MenuItem)>-1) { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:RemoveArmr("+i+")\">Remove "+ItemID(MenuItem)+"</a><br>"; } else { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WearArmr("+i+")\">Wear "+ItemID(MenuItem)+"</a><br>"; } if (MenuItem=="L8"||MenuItem=="L9"||MenuItem=="L0") { if (CharObj.substring(4,CharObj.length).indexOf(MenuItem)>-1) { if (!TileMode) { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:HatHouse()\">House Teleport</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:HatCastle()\">Castle Teleport</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:HatOakland()\">Oakland Teleport</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:HatBLands()\">Badlands Teleport</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:HatButler()\">Butler Teleport</a><br>"; } if (Admin) { PUP=PUP+AdminHat(MenuItem); }}}} if (MenuItem=="N6"||MenuItem=="N2"||MenuItem=="N8"||MenuItem=="N4"||MenuItem=="N0"||MenuItem=="Na") { if (a.indexOf(MenuItem)>-1) { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:RemoveArmr("+i+")\">Remove "+ItemID(MenuItem)+"</a><br>"; } else { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WearArmr("+i+")\">Wear "+ItemID(MenuItem)+"</a><br>"; }} if (MenuItem=="N4") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:QuiverExam("+i+")\">Examine "+ItemID(MenuItem)+"</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:RemoveArrows("+i+")\">Remove Arrows</a><br>"; } if (MenuItem=="N1"||MenuItem=="N3"||MenuItem=="N5"||MenuItem=="N7"||MenuItem=="N9") { b=".."; if (CharObj.charAt(2)=="6") { b="N1"; } if (CharObj.charAt(2)=="7") { b="N3"; } if (CharObj.charAt(2)=="8") { b="N5"; } if (CharObj.charAt(2)=="9") { b="N7"; } if (CharObj.charAt(2)=="0") { b="N9"; } if (b==MenuItem) { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:RemoveArmr("+i+")\">Remove "+ItemID(MenuItem)+"</a><br>"; } else { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WearArmr("+i+")\">Wear "+ItemID(MenuItem)+"</a><br>"; }} if (MenuItem>="O0" && MenuItem<="O9") { if (a.indexOf(MenuItem)>-1) { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:RemoveArmr("+i+")\">Remove "+ItemID(MenuItem)+"</a><br>"; } else { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WearArmr("+i+")\">Wear "+ItemID(MenuItem)+"</a><br>"; }} if (MenuItem>="P0" && MenuItem<="Pf") { if (a.indexOf(MenuItem)>-1) { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:RemoveArmr("+i+")\">Remove "+ItemID(MenuItem)+"</a><br>"; if (MenuItem=="P2" || MenuItem=="P5" || MenuItem=="P8") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:CastSpell(\'Strength\');\">Cast Strength Spell</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:CastSpell(\'Accuracy\');\">Cast Accuracy Spell</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:CastSpell(\'Defense\');\">Cast Defense Spell</a><br>"; }} else { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WearArmr("+i+")\">Wield "+ItemID(MenuItem)+"</a><br>"; }} if (MenuItem>="R1" && MenuItem<="R3") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:DrinkPotion("+i+")\">Drink "+ItemID(MenuItem)+"</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:FillPotion("+i+")\">Fill Potion</a><br>"; } if (MenuItem>="R4" && MenuItem<="R6") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:StackPArrows("+i+")\">Stack Poisoned Arrowheads</a><br>"; } if (MenuItem>="R7" && MenuItem<="R9") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:DrinkPotion("+i+")\">Drink "+ItemID(MenuItem)+"</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:FillPotion("+i+")\">Fill Potion</a><br>"; } if (MenuItem=="Ra") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:TreatBag("+i+")\">Fill Treat Bag</a><br>"; } if (MenuItem=="Rb") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:TreatBag("+i+")\">Open Treat Bag</a><br>"; } if (MenuItem>="Rc" && MenuItem<="Re") { PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:DrinkPotion("+i+")\">Drink "+ItemID(MenuItem)+"</a><br>"; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:FillPotion("+i+")\">Fill Potion</a><br>"; } PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:DropItem("+i+")\">Drop "+ItemID(MenuItem)+"</a><br>"; PopAlign="inven"; PopClick=i; POP(PUP+"</font></b>"); }}} 
function ProfilePlayer(a) { PRO=a.split("-"); Game="<p align=center>"+PRO[1]; Game=Game+"<p align=right>Combat: "+Digits(PRO[2]); Game=Game+"<br>Magic: "+Digits(PRO[3]); Game=Game+"<br>Range: "+Digits(PRO[4]); Game=Game+"<br>PVP: "+Digits(PRO[5]); Game=Game+"<br>Arson: "+Digits(PRO[6]); Game=Game+"<br>Fishing: "+Digits(PRO[7]); Game=Game+"<br>Cooking: "+Digits(PRO[8]); Game=Game+"<br>Mining: "+Digits(PRO[9]); Game=Game+"<br>Smithing: "+Digits(PRO[10]); Game=Game+"<p align=center>Total: "+PRO[11]; POP(Game); } 
function Attackable() { if (CharMap>"I") { for (i=0;i<Obj.length;i++) { if (Obj[i]!="delete") { IV = Obj[i].split("|"); PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:PAttack(\'"+IV[2]+"\');\">Attack "+IV[2]+"</a><br>"; }}}} 
function CancelKey(evt) { var evt = (evt) ? evt : ((window.event) ? window.event : ""); evt.returnValue = false; evt.preventDefault(); return false; } 
function Null() { } 
function RightClick(event){ } 
function MouseClick(e) { return false; } 
function textmenu() { return false; } 
function ProcessInput(e) { if (!e) { e=window.event;} if (e.keyCode) { i=e.keyCode; } else { if (e.which) { i=e.which; }} Shifted=0; if (e.shiftKey) { Shifted=1; } if (i==59) { if (Shifted) { i=58; }} DecodeKey(i); return false; e.returnValue = false; } 
function DecodeKey(i) { IStamp=CStamp; K=0; if (VKey) { K=VKey; } if (i==27) { ChatLine=""; KCap=0; RefChat=1; } if (i==8) { if (Shifted || ShiftSet) { ChatLine=""; KCap=0; RefChat=1; } else { ChatLine=ChatLine.substring(0,ChatLine.length-1); K=8; }} if (document.getElementById("cursor").offsetLeft>400) { if (i != 13) { i=0; }} if (Retreat==0) { if (TradeOn==0) { if (i==37) { StepHere(CharZ-1); } if (i==38) { StepHere(CharZ-MapSizeX-1); } if (i==39) { StepHere(CharZ+1); } if (i==40) { StepHere(CharZ+MapSizeX+1); }}} if (TileMode) { AdminTileMode(i); } else { if (i==32) { K=32; } if (i>64 && i<91) { K=i+32; if (Shifted || ShiftSet) { K=i; }} if (i>47 && i<58) { K=i; if (Shifted || ShiftSet) { K=i-16; if (K==38) { K=94;} if (K==40) { K=42;} if (K==39) { K=38;} if (K==41) { K=40;} if (K==32) { K=41;}}} if (i==50) { if (Shifted || ShiftSet) { K=39; }} if (i==187) { K=61; if (Shifted || ShiftSet) { K=43; }} if (i==61) { K=61; if (Shifted || ShiftSet) { K=43; }} if (i==59) { K=59; } if (i==58) { K=58; } if (i==186) { K=59; if (Shifted || ShiftSet) { K=58; }} if (i==219) { K=91; } if (i==221) { K=93; } if (i==188) { K=44; if (Shifted || ShiftSet) { K=91; }} if (i==190) { K=46; if (Shifted || ShiftSet) { K=93; }} if (i==189) { K=45; } if (i==191) { if (Shifted || ShiftSet) { K=63; } else { K=47; }} if (i==222) { K=39; } if (i==107) { K=61; if (Shifted || ShiftSet) { K=43; }} if (i==13) { if (SendChat=="") { if (ChatLine.substring(0,2)=="/m") { if (window.XMLHttpRequest) { who=new XMLHttpRequest(); } else { if (window.ActiveXObject) { who=new ActiveXObject("Microsoft.XMLHTTP"); }} MsgSent(); ChatLine=ChatLine.replace(/\#/g,"%23"); ChatLine=ChatLine.replace(/\+/g,"%2B"); ChatLine=ChatLine.replace(/\=/g,"%3D"); ChatLine=ChatLine.replace(/\=/g,"%3D"); ChatLine=ChatLine.replace(/\&/g,"%26"); if (ChatLine.substr(ChatLine.indexOf(" ",ChatLine.indexOf(" ")+1)+1,ChatLine.length)) { who.open('GET', WhoServer+'?N='+CharName+'&P='+WhoKey+'&C=S&SC='+ChatLine, true); who.send(null); NewChatLine=ChatLine.substr(0,ChatLine.indexOf(" ",ChatLine.indexOf(" ")+1)+1); } ChatLine=""; } else { if (CMode) { CMode=0; RefChat=1; document.getElementById("msgs").src="http://queville.com/images/buttons/d_msgs.gif"; }} if (ChatLine.substring(0,1)=="/") { if (Admin) { AdminExecChat(); }} if (CharStatus=="MUTE") { Cht=Cht+"<br>"+CharName+": <font color=red>You Have Been Muted!</font>"; RefChat=1; ChatLine=""; K=0; } if (ChatLine) { SendChat=ChatLine; Cht=Cht+"<br>"+CharName+": "+SendChat; } if (CharStatus!="MUTE") { K=13; if (KCap==0) { ChatLine=""; }} if (NewChatLine) { ChatLine=NewChatLine; NewChatLine=""; RefreshChat(); }} else { K=0; }} if (K>0) { if (K>13) { ChatLine=ChatLine+String.fromCharCode(eval(K)); if (Admin) { AdminChat(); }} IStamp=CStamp; RefreshChat(); }} Shifted=0; if (i==1) { ShiftSet=1-ShiftSet; Keys(1); } else { if (ShiftSet) { ShiftSet=0; Keys(1); }}} 
function MsgSent() { who.onreadystatechange=function() { if(who.readyState==4) { if(who.status==200) { Game=who.responseText; if (who.responseText == "NO") { Game="Error: Can't send message"; } if (who.responseText == "OFF") { Game="Error: User not online"; } if (who.responseText == "[141]") { Game="Error: User not online [141]"; } if (who.responseText == "[167]") { Game="Error: User not online [167]"; } POP(Game); } else { POP("Error Connecting to WHO server"); }}}} 
function CastSpell(a) { HPOP(); if (Skill=="") { ToDo="C=SP&J="+a; }} 
function Reset() { HPOP(); EraseAll(); AllowScroll=0; ToDo="C=RS"; } 
function Teleport(a) { HPOP(); if (Skill=="") { EraseAll(); AllowScroll=0; ToDo="C=TP&J="+a; }} 
function Badlands(a) { POP("<center>You are in the Badlands.<p>You are allowed to<br>attack other players here.<p>Other players may attack you here!</center>"); } 
function Aggressive(a) { POP("<center>You are in an Aggresive Zone.<p>Here, enemies may attack you<br>for no reason at all!</center>"); } 
function Switch(a) { HPOP(); if (SwitchIs=="S6") { ToDo="C=UI&J=S5"; } else { ToDo="C=UI&J=S6"; }} 
function RefreshChat() { RefChat=0; spacer=ChatLine; while (spacer.indexOf(" ")>-1) { spacer=spacer.substring(0,spacer.indexOf(" "))+"&nbsp;"+spacer.substring(spacer.indexOf(" ")+1,spacer.length); } if (CMode) { Msgs=""; while (M.length>NMsgs) { M.shift(); } for (Ci=0;Ci<M.length;Ci++) { Msgs=Msgs+M[Ci]+"<br>"; } document.getElementById("CHAT").innerHTML="<br><font face=arial size=3px color=Navy><b>"+Msgs+"<br>"+CharName+": "+spacer+"<img name=cursor id=cursor src=\""+DirTile+"/Q5.png\" height=18 width=10 style=\"position:absolute; \"></font></b>"; } else { while (Cht.indexOf("~")>-1) { Cht=Cht.substring(0,Cht.indexOf("~"))+ItemID(Cht.substring(Cht.indexOf("~")+1,Cht.indexOf("~")+3))+Cht.substring(Cht.indexOf("~")+3,Cht.length); } document.getElementById("CHAT").innerHTML="<br><font face=arial size=3px color=Navy><b>"+TCht+Cht+"<br>"+CharName+": "+spacer+"<img name=cursor id=cursor src=\""+DirTile+"/Q5.png\" height=18 width=10 style=\"position:absolute; \"></font></b>"; } a=document.getElementById("CHAT").scrollHeight-CHigh; if (Scroll>a) { Scroll=a; } a=-(document.getElementById("CHAT").scrollHeight)+CHigh+Scroll; document.getElementById("CHAT").style.top=a; } 
function ChatMessage(a) { Scroll=0; document.getElementById("CHAT").innerHTML="<b>"+a+"</b>"; a=-(document.getElementById("CHAT").scrollHeight)+CHigh+Scroll; document.getElementById("CHAT").style.top=a; } 
function ChatDown(){ Scroll=Scroll-20; if (Scroll<0) { Scroll=0; } RefChat=1; } 
function ChatUp(){ Scroll=Scroll+20; a=document.getElementById("CHAT").scrollHeight-CHigh; if (Scroll>a) { Scroll=a; } RefChat=1; } 
function Keys(a) { if (a==0) { if (Keyboard) { HPOP(); } else { a=1; }} if (a==1) { PopAlign="center"; Keyboard="<center><br> "; Add2Key(49); Add2Key(50); Add2Key(51); Add2Key(52); Add2Key(53); Add2Key(54); Add2Key(55); Add2Key(56); Add2Key(57); Add2Key(48); Add2Key(8); Keyboard=Keyboard+" <br><img src="+DirKeys+"/blank.gif height=32 width=16>"; Add2Key(81); Add2Key(87); Add2Key(69); Add2Key(82); Add2Key(84); Add2Key(89); Add2Key(85); Add2Key(73); Add2Key(79); Add2Key(80); Add2Key(107); Keyboard=Keyboard+" &nbsp; <br><img src="+DirKeys+"/blank.gif height=32 width=32>"; Add2Key(65); Add2Key(83); Add2Key(68); Add2Key(70); Add2Key(71); Add2Key(72); Add2Key(74); Add2Key(75); Add2Key(76); Add2Key(13); Keyboard=Keyboard+"<br><img src="+DirKeys+"/blank.gif height=32 width=16>"; Keyboard=Keyboard+"<a href=\"javascript: DecodeKey(1); \">"; if (ShiftSet) { Keyboard=Keyboard+"<img src="+DirKeys+"/key-shifton.gif height=32 width=32 border=0></a> "; } else { Keyboard=Keyboard+"<img src="+DirKeys+"/key-shiftoff.gif height=32 width=32 border=0></a> "; } Add2Key(90); Add2Key(88); Add2Key(67); Add2Key(86); Add2Key(66); Add2Key(78); Add2Key(77); Add2Key(188); Add2Key(190); Add2Key(191); Keyboard=Keyboard+"<br><img src="+DirKeys+"/blank.gif height=32 width=96>"; Add2Key(32); Add2Key(58); Add2Key(59); Add2Key(109); Keyboard=Keyboard+"</center><p>"; POP(Keyboard); }} 
function Add2Key(a) { dckw=32; b=""; if (ShiftSet) { b="c"; } if (a>47 && a<58) { b=b+String.fromCharCode(a); } if (a>64 && a<91) { b=b+String.fromCharCode(a+32); } if (a==13) { b="enter"; } if (a==32) { b="space"; dckw=96; } if (a==8) { b=b+"back"; } if (a==188) { b=b+"comma"; } if (a==190) { b=b+"period"; } if (a==107) { b=b+"equal"; } if (a==191) { b=b+"slash"; } if (a==58) { b="colen"; } if (a==59) { b="simi"; } if (a==109) { b="minus"; } Keyboard=Keyboard+"<a href=\"javascript: DecodeKey("+a+"); \"><img src="+DirKeys+"/key-"+b+".gif height=32 width="+dckw+" border=0></a> "; } 
function Comma(number) { number = '' + number; if (number.length > 3) { mod = number.length % 3; output = (mod > 0 ? (number.substring(0,mod)) : ''); for (i=0 ; i < Math.floor(number.length / 3); i++) { if ((mod == 0) && (i == 0)) output += number.substring(mod+ 3 * i, mod + 3 * i + 3); else output+= ',' + number.substring(mod + 3 * i, mod + 3 * i + 3); } return (output); } else return number; } 
function Messages() { CMode=1-CMode; if (CMode) { NewMsgs=0; document.getElementById("msgs").src="http://queville.com/images/buttons/d_chat.gif"; } else { document.getElementById("msgs").src="http://queville.com/images/buttons/d_msgs.gif"; } RefChat=1; } 
function SendMsg(a) { ChatLine="/m "+a+" "; RefChat=1; POP("<p align=center>Enter your message.<br>Press [ENTER] to send.<br>Press [ESC] to abort."); } 
function ClickWho(a) { for (Wi=0;Wi<W1.length;Wi++) { W2=W1[Wi].split("="); if (W2[0]!="E") { if (W2[0]==a) { POP("<p align=center>"+a+"<br>server "+W2[1]+"<p align=center><a href=\"javascript:Null();\" onmousedown=\"SendMsg(\'"+W2[0]+"\');\">Message "+W2[0]+"</a>"); }}}} 
function ClickAlly() { if (AllyClan) { if (AllyClan==1) { AllyClan++; } else { AllyClan=0; }} else { AllyClan++; } WhoMode(0); } 
function WhoMode(a) { W0=""; if (window.XMLHttpRequest) { who=new XMLHttpRequest(); } else { if (window.ActiveXObject) { who=new ActiveXObject("Microsoft.XMLHTTP"); }} if (AllyClan) { if (AllyClan==1) { who.open('GET', WhoServer+'?N='+CharName+'&P='+WhoKey+'&C=C', true); } else { who.open('GET', WhoServer+'?N='+CharName+'&P='+WhoKey+'&C=P', true); }} else { who.open('GET', WhoServer+'?N='+CharName+'&P='+WhoKey+'&C=A', true); } who.send(null); who.onreadystatechange=function() { if(who.readyState==4) { if(who.status==200) { if (AllyClan) { if (AllyClan==1) { W0=W0+"<p align=center><a href=\"javascript:Null();\" onmousedown=\"ClickAlly();\">Clan Mates Online:</a><p align=center>"; } else { W0=W0+"<p align=center><a href=\"javascript:Null();\" onmousedown=\"ClickAlly();\">Players Online:</a><p align=center>"; }} else { W0=W0+"<p align=center><a href=\"javascript:Null();\" onmousedown=\"ClickAlly();\">Allies Online:</a><p align=center>"; } W1=who.responseText.split(" "); W0=W0+"<table border=0><tr>"; r=0; for (Wi=0;Wi<W1.length;Wi++) { W2=W1[Wi].split("="); if (W2[0]!="E") { if (r==5) { W0=W0+"</tr><tr>"; r=0; } r++; W0=W0+"<td align=center><b><a href=\"javascript:Null();\" onmousedown=\"ClickWho(\'"+W2[0]+"\');\">"+W2[0]+"</a></b></td>"; }} while (r<5) { W0=W0+"<td> </td>"; r++; } W0=W0+"</tr></table>"; PopAlign="char"; POP(W0); } else { POP("Error: "+who.status); }}}} 
function HPOP() { document.getElementById("PopUp").style.visibility="hidden"; Keyboard=""; } 
function POP(a) { document.getElementById("PopUp").style.top=0; document.getElementById("PopUp").style.left=0; document.getElementById("PopUp").innerHTML="<b>"+a+"</b>"; switch (PopAlign) { case "char": PopY=TopYPos+(CharY*32)+8; PopX=TopXPos+(CharX*32)+32; if (PopY<TopYPos) { PopY=TopYPos; } if (PopY<TopYPos+10) { PopY=TopYPos+10; } if (PopX<TopXPos) { PopX=TopXPos; } if (PopX<TopXPos+10) { PopX=TopXPos+10; } if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+424) { PopX=(TopXPos+424)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+300) { PopY=(TopYPos+300)-document.getElementById("PopUp").scrollHeight; } if (PopY<TopYPos) { PopY=(TopYPos); } break; case "center": PopX=TopXPos+((448-document.getElementById("PopUp").scrollWidth)/2); PopY=TopYPos+((320-document.getElementById("PopUp").scrollHeight)/2); if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+628) { PopX=(TopXPos+628)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+320) { PopY=(TopYPos+320)-document.getElementById("PopUp").scrollHeight; } if (PopY<TopYPos) { PopY=(TopYPos); } break; case "login": PopX=TopXPos+((448-document.getElementById("PopUp").scrollWidth)/2); PopY=TopYPos+((260-document.getElementById("PopUp").scrollHeight)/2); if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+628) { PopX=(TopXPos+628)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+320) { PopY=(TopYPos+320)-document.getElementById("PopUp").scrollHeight; } break; case "click": PopY=Math.floor(PopClick/(MapSizeX+1)); PopX=PopClick-(PopY*(MapSizeX+1)); PopY=(PopY*32)+22; PopX=(PopX*32)+22; if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+424) { PopX=(TopXPos+424)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+300) { PopY=(TopYPos+300)-document.getElementById("PopUp").scrollHeight; } break; case "inven": PopY=Math.floor((PopClick/4)); PopX=Math.floor(PopClick-(PopY*4)); PopY=TopYPos+80+(PopY*37)-8; PopX=TopXPos+470+(PopX*37)-8; if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+600) { PopX=(TopXPos+600)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+400) { PopY=(TopYPos+400)-document.getElementById("PopUp").scrollHeight; } break; } document.getElementById("PopUp").style.top=PopY; document.getElementById("PopUp").style.left=PopX; document.getElementById("PopUp").style.visibility="visible"; poptimer=setTimeout('AlignPop();', 200); } 
function AlignPop() { document.getElementById("PopUp").style.visibility="visible"; switch (PopAlign) { case "char": PopY=TopYPos+(CharY*32)+8; PopX=TopXPos+(CharX*32)+32; if (PopY<TopYPos) { PopY=TopYPos; } if (PopY<TopYPos+10) { PopY=TopYPos+10; } if (PopX<TopXPos) { PopX=TopXPos; } if (PopX<TopXPos+10) { PopX=TopXPos+10; } if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+424) { PopX=(TopXPos+424)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+300) { PopY=(TopYPos+300)-document.getElementById("PopUp").scrollHeight; } if (PopY<TopYPos) { PopY=(TopYPos); } break; case "center": PopX=TopXPos+((448-document.getElementById("PopUp").scrollWidth)/2); PopY=TopYPos+((320-document.getElementById("PopUp").scrollHeight)/2); if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+628) { PopX=(TopXPos+628)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+320) { PopY=(TopYPos+320)-document.getElementById("PopUp").scrollHeight; } if (PopY<TopYPos) { PopY=(TopYPos); } break; case "login": PopX=TopXPos+((448-document.getElementById("PopUp").scrollWidth)/2); PopY=TopYPos+((260-document.getElementById("PopUp").scrollHeight)/2); if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+628) { PopX=(TopXPos+628)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+320) { PopY=(TopYPos+320)-document.getElementById("PopUp").scrollHeight; } break; case "click": PopY=Math.floor(PopClick/(MapSizeX+1)); PopX=PopClick-(PopY*(MapSizeX+1)); PopY=(PopY*32)+22; PopX=(PopX*32)+22; if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+424) { PopX=(TopXPos+424)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+300) { PopY=(TopYPos+300)-document.getElementById("PopUp").scrollHeight; } break; case "inven": PopY=Math.floor((PopClick/4)); PopX=Math.floor(PopClick-(PopY*4)); PopY=TopYPos+80+(PopY*37)-8; PopX=TopXPos+470+(PopX*37)-8; if (PopX+document.getElementById("PopUp").scrollWidth>TopXPos+600) { PopX=(TopXPos+600)-document.getElementById("PopUp").scrollWidth; } if (PopY+document.getElementById("PopUp").scrollHeight>TopYPos+400) { PopY=(TopYPos+400)-document.getElementById("PopUp").scrollHeight; } break; } document.getElementById("PopUp").style.top=PopY; document.getElementById("PopUp").style.left=PopX; } 
function Logout() { POP("Logging Out..."); ToDo="C=O"; } 
function RefreshRPG() { if (NewMsgs) { if (NewMsgs==1) { NewMsgs=2; if (document.getElementById("msgs")) { document.getElementById("msgs").src="http://queville.com/images/buttons/e_msgs.gif"; }} else { NewMsgs=1; if (document.getElementById("msgs")) { document.getElementById("msgs").src="http://queville.com/images/buttons/d_msgs.gif"; }}} if (GotStats) { RefRPG++; UpdateObjs(); if (RefChar) { a="N|"+CharObj+"|"+CharName+"||"+CharZ; IV = a.split("|"); RenderObj(); RefChar=0; } if (RefChat) { RefreshChat(); } if (RefSB) { RefreshSB(); } if (RefTrade) { UpdateTrade(); } if (RefRPG==4) { if (RefDItems){ UpdateItems(); } if (RefMap) { RefreshMap(); } if (RefSItem) { RefreshStatic(); } if (RefStats) { UpdateStats(); }} if (Skill) { ToDo=""; } if (RefRPG>8 || ToDo) { RefRPG=0; if (InputLine) { IStamp=CStamp; } HitIt('R&G='+CharObj+'&I='+InputLine); InputLine=""; RefDItems=1; RefChat=1; RefSItem=1; }} clearTimeout(RPG); RPG=setTimeout('RefreshRPG();',250); } 
function UpdateStats() { } 
function HitIt(a) { TotalHits++; if (GotStats) { if (DeadItem) { for (i=0;i<S.length;i++) { if (S[i]) { if (S[i].substr(0,1)=="K") { S[i]=S[i].substr(1,S[i].length); RefSItem=1; DeadItem=0; }}}} if (Skill) { switch (Skill.charAt(0)) { case "F": HPOP(); if (CharInven.indexOf("Z0")>-1) { ToDo="C=F&J="+Skill.substring(3,Skill.length); } else { POP("Inventory Full."); Skill=""; } IStamp=CStamp; break; case "C": HPOP(); if (CharInven.indexOf(Skill.substring(3,Skill.length))>-1) { ToDo="C=CO&J="+Skill.substring(3,Skill.length); } else { POP("Finished Cooking."); Skill=""; } IStamp=CStamp; break; case "M": HPOP(); if (CharInven.indexOf("Z0")>-1) { ToDo="C=MN&J="+Skill.substring(3,Skill.length); } else { POP("Full Load!"); Skill=""; } IStamp=CStamp; break; case "A": HPOP(); ToDo="C=AT&J="+Skill.substring(3,Skill.length); break; case "D": ToDo="C=DS&J=Z0"; break; case "S": STOVE2(); break; }} GotStats=0; SWait=0; if (IStamp<EStamp) { a="O"; } Ref++; SendChat=SendChat.replace(/\#/g,"%23"); SendChat=SendChat.replace(/\+/g,"%2B"); SendChat=SendChat.replace(/\=/g,"%3D"); SendChat=SendChat.replace(/\=/g,"%3D"); SendChat=SendChat.replace(/\&/g,"%26"); document.getElementById('MARS').src=Server+'?N='+CharName+'&P='+CharPswd+'&MP='+CharMap+'&Z='+CharZ+'&S='+StartZ+'+&T='+CStamp+"&R="+Ref+'&Q='+a+'&'+ToDo+"&B="+BoatObj+"&SC="+SendChat+"&IN="+CharInven; SendChat=""; ToDo=""; HitTimer=setTimeout('GetIt();',250); }} 
function GetIt() {
 if (GotStats) { 
  if (SResults=="PSE") { SResults="Off"; }
  if (SResults=="Off") {
   clearInterval(RPG); EraseAll();
   document.onkeydown=""; document.onkeypress=""; document.onkeyup="";
   CharName=""; CharPswd=""; CharMap="B2"; CharObj="NEW"; Retreat=1; Skill="";
   ToDo=""; RefChat=0; Accepted=".."; TradeOffer="xx"; TradeWith=""; TradeOn=0;
   for (Ci=0;Ci<NMsgs;Ci++) { M[Ci]=" "; } NewMsgs=0; LAction="Welcome";
   MMan=0; Marvin=0; ZelieStore=0; LoginError();
  } else {
   if (CharMap.indexOf("e")>-1) { CheckLights(); }
   if (RefChat) { RefreshChat(); }
   if (RefDItems){ UpdateItems(); }
   if (RefMap) { RefreshMap(); }
   if (RefSB) { RefreshSB(); }
   if (SResults=="PSE") { SResults=""; POP("Error logging out,<br>please try again."); IStamp=CStamp; }
   if (SResults=="Dun") { Skill=""; SResults=""; POP("Done."); SBMode=1; RefreshSB(); IStamp=CStamp; }
   if (SResults=="Pro") { ProfilePlayer(Need); IStamp=CStamp; }
   if (SResults=="XIn") { Skill=""; SResults=""; POP("Inventory Full."); IStamp=CStamp; }
   if (SResults=="OOS") { Skill=""; SResults=""; POP("Out of Stock."); IStamp=CStamp; }
   if (SResults=="XLv") { Skill=""; SResults=""; POP("XLv Error"); IStamp=CStamp; }
   if (SResults=="ISF") { Skill=""; SResults=""; POP("ISF Error"); IStamp=CStamp; }
   if (SResults=="Fir") { Skill=""; SResults=""; POP("Need Fire!"); IStamp=CStamp; }
   if (SResults=="SFr") { Skill=""; SResults=""; POP("Need Fire!"); SBMode=LSBMode; RefreshSB(); IStamp=CStamp; }
   if (SResults=="Ore") { Skill=""; SResults=""; POP("Need Ore!"); SBMode=LSBMode; RefreshSB(); IStamp=CStamp; }
   if (SResults=="Fsh") { SResults=""; POP("You catch a fish!"); IStamp=CStamp; }
   if (SResults=="XFh") { SResults=""; POP("You fail to catch a fish!"); IStamp=CStamp; }
   if (SResults=="Cok") { SResults=""; PopAlign="char"; IStamp=CStamp; if (CharInven.indexOf(Skill.substring(3,Skill.length))<0) { Skill=""; POP("Finished cooking!"); } else { POP("You cook the food!"); }}
   if (SResults=="XCk") { SResults=""; POP("You burn the food!"); IStamp=CStamp; if (CharInven.indexOf(Skill.substring(3,Skill.length))<0) { Skill=""; }}
   if (SResults=="Eat") { SResults=""; POP("You eat the food!"); IStamp=CStamp; }
   if (SResults=="Min") { SResults=""; POP("You find an ore!"); IStamp=CStamp; }
   if (SResults=="Lav") { SResults=""; Skill=""; POP("You fall deeper into the pit!"); IStamp=CStamp; }
   if (SResults=="Gem") { SResults=""; POP("You find treasure!"); IStamp=CStamp; }
   if (SResults=="Chs") { SResults=""; POP("You find a Treasure Chest!"); IStamp=CStamp; } 
   if (SResults=="XMn") { SResults=""; POP("You fail to find any ore!"); IStamp=CStamp; }
   if (SResults=="Smt") { FURNACE("Smt"); IStamp=CStamp; }
   if (SResults=="Prp") { TABLE("0"); IStamp=CStamp; } 
   if (SResults=="Atk") { SResults=""; PopAlign="char"; POP("Attacking "+Fight+"..."); RenderDam(); IStamp=CStamp; }
   if (SResults=="Mis") { SResults=""; PopAlign="char"; POP("Missed"); IStamp=CStamp; } 
   if (SResults=="Atd") { SResults=""; PopAlign="char"; POP(Fight+" Attacks You!"); RenderDam(); IStamp=CStamp; }
   if (SResults=="Bsy") { SResults=""; Skill=""; POP("Busy..."); IStamp=CStamp; }
   if (SResults=="Fal") { SResults=""; POP("Spell fails."); IStamp=CStamp; }
   if (SResults=="IKl") { Retreat=0; SResults=""; POP("You kill the "+Fight); Skill=""; IStamp=CStamp; if (document.getElementById(CharName+"_DAM")) { eval('docBody.removeChild('+CharName+'_DAM);'); }}
   if (SResults=="Chk") { Retreat=0; SResults=""; POP("You kill the Chicken"); Skill=""; IStamp=CStamp; }
   if (SResults=="Ded") { Skill=""; Retreat=0; SResults=""; POP("Already Dead."); IStamp=CStamp; } 
   if (SResults=="Trd") { Skill=""; SResults=""; POP("Trade Error"); IStamp=CStamp; }
   if (SResults=="Buy") { Skill=""; SResults=""; POP("Buy Error"); IStamp=CStamp; STORE(0); } 
   if (SResults=="Brk") { SResults=""; Skill=""; POP("Your gem is out of power!"); IStamp=CStamp; }
   if (SResults=="ChW") { SResults=""; Skill=""; POP("You charge the wand!"); IStamp=CStamp; }
   if (SResults=="Box") { SResults=""; IStamp=CStamp; SHOWBOX(0); }
   if (SResults=="Kil") { Skill=""; SResults=""; EraseAll(); AllowScroll=0; MoveTo=0; POP("You have died."); IStamp=CStamp; }
   if (SResults=="PDh") { Skill=""; SResults=""; POP("The poison kills you."); }
   if (SResults=="Ned") { Skill=""; SResults=""; if (Need=="Z0") { POP("Nothing Happens!") } else { POP("You need "+ItemID(Need)); Need=""; IStamp=CStamp; }}
   if (SResults=="Qvr") { Skill=""; SResults=""; IStamp=CStamp; }
   if (SResults=="QvF") { Skill=""; SResults=""; POP("Your quiver is full."); IStamp=CStamp; }
   if (SResults=="Arw") { Retreat=0; Skill=""; SResults=""; POP("Out of Arrows."); IStamp=CStamp; }
   if (SResults=="Tel") { Skill=""; SResults=""; EraseAll(); ToDo="C=TP&J="+Need; Need=""; IStamp=CStamp; } 
   if (SResults=="Pop") { Skill=""; SResults=""; POP(Need); IStamp=CStamp; }
   if (SResults=="Not") { SResults=""; POP("You find nothing"); IStamp=CStamp; }
   if (SResults=="Bar") { SResults=""; POP("Your fish is<br>in a barrel."); IStamp=CStamp; }
   if (SResults=="Myt") { $SResults=""; Trader(1); IStamp=CStamp; }
   if (SResults=="Sto") { SResults=""; STORE(""); }
   if (SResults=="IHt") { Retreat=0; SResults=""; POP(Fight+" hits for "+Damage); Damage=0; RenderDam(); IStamp=CStamp; }
   if (SResults=="PHt") { Retreat=0; SResults=""; POP("You hit for "+Damage); Damage=0; RenderDam(); IStamp=CStamp; }
   if (SResults=="Hse") { SResults=""; POP("Done."); SBMode=1; RefSB=1; }
  }
 } else {
  SWait=SWait+1; if (SWait<40) {
   HitTimer=setTimeout('GetIt();',250);
  } else {
   clearInterval(RPG); EraseAll();
   document.onkeydown=""; document.onkeypress=""; document.onkeyup="";
   CharName=""; CharPswd=""; CharMap="B2"; CharObj="NEW"; Retreat=1; Skill="";
   ToDo=""; RefChat=0; Accepted=".."; TradeOffer="xx"; TradeWith=""; TradeOn=0;
   LErr=12; SResults="Off"; LoginError();
  }
 }
} 
function BuildMenu(i) { b=""; switch (IV[1]) {case "HAMMER": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Get Hammer</a><br>"; break; case "CHURCH": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Church</a><br>"; break; case "TREE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Climb Tree</a><br>"; break; case "SILVER": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Open Chest</a><br>"; break; case "PYRAMID": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Pyramid</a><br>"; break; case "LIGHTHOUSE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Lighthouse</a><br>"; break; case "NEWYEARBALL": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">New Year Ball</a><br>"; break; case "DROPBOX": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Examine Box</a><br>"; break; case "POOL": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Pool of Radiance</a><br>"; break; case "SNOWMAN": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Talk to Snowman</a><br>"; break; case "THRONE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Sit on Throne</a><br>"; break; case "CRYSTAL": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Crystal Cave</a><br>"; break; case "ZOLTAN": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Talk to Zoltan</a><br>"; break; case "BAR": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Bandit Bar</a><br>"; break; case "ANTHILL": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Anthill</a><br>"; break; case "STAIRUP": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Climb Stairs Up</a><br>"; break; case "EGG": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Get Dragon Egg</a><br>"; break; case "PSTORE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Player Store</a><br>"; break; case "BURNTREE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Chop Burning Tree</a><br>"; break; case "TEMPLE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Temple</a><br>"; break; case "BUNKER": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Bunker</a><br>"; break; case "TRAVEL": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Travel Store</a><br>"; break; case "PIGPEN": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Pig Pen</a><br>"; break; case "TOMATO": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Pick Tomato</a><br>"; break; case "CHEESE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Get Cheese</a><br>"; break; case "RABBITHOLE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Rabbit Hole</a><br>"; break; case "CROSSBOW": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Get Crossbow</a><br>"; break; case "QUIVER": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Get Quiver</a><br>"; break; case "REDKEY": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Get Red Key</a><br>"; break; case "BROKENAXE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Get Broken Axe</a><br>"; break; case "BROKENPICK": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Get Broken Pick Axe</a><br>"; break; case "STATUE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Examine Statue</a><br>"; break; case "SUNDIAL": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Read Sundial</a><br>"; break; case "PUMPKIN": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Search Pumpkin Patch</a><br>"; break; case "FLAG": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Capture Flag</a><br>"; break; case "DEADGUY": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Search Dead Guy</a><br>"; break; case "ONEARMMAN": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Talk to One Arm Man</a><br>"; break; case "FORT": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Charge Fort</a><br>"; break; case "DEADRANGER": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Search Dead Ranger</a><br>"; break; case "CHRISTMASTREE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Search Christmas Tree</a><br>"; break; case "RUINS": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Explore Ruins</a><br>"; break; case "BLUEGATE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Open Gate</a><br>"; break; case "REDGATE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Open Gate</a><br>"; break; case "PORT": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Port</a><br>"; break; case "MANHOLE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Sewer</a><br>"; break; case "HOUSE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Player House</a><br>"; break; case "HOUSE1": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Player House</a><br>"; break; case "HOUSE2": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Player House</a><br>"; break; case "MINE": f=1; if (CharMap=="F4") { b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Miner Guild</a><br>"; } else { b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Mine</a><br>"; } break; case "FIREMINE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Fire Mine</a><br>"; break; case "CAVE2": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Cave</a><br>"; break; case "CART": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Shop at Cart</a><br>"; break; case "STOVE2": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Use Stove</a><br>"; break; case "WINDMILL": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Grind Wheat</a><br>"; break; case "TABLE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Prep Cook</a><br>"; break; case "WHEAT": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Harvest Wheat</a><br>"; break; case "FARMHOUSE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Farmhouse</a><br>"; break; case "HERMIT": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Visit Hermit</a><br>"; break; case "MOUNT": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Climb Mountain</a><br>"; break; case "PIPE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Pipe</a><br>"; break; case "PIPE2": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Pipe</a><br>"; break; case "LADDER": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Climb Ladder</a><br>"; break; case "TRAPDOOR": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Open Trapdoor</a><br>"; break; case "DOOR": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Open Door</a><br>"; break; case "SWAMPPOOL": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Use Swamp Water</a><br>"; break; case "DOCTOR": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Doctor Office</a><br>"; break; case "SHACK": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Shack</a><br>"; break; case "RANGE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Range Guild</a><br>"; break; case "MAGIC": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Magic Guild</a><br>"; break; case "FISHGUILD": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Enter Fishing Guild</a><br>"; break; case "PIT": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Fall into Pit</a><br>"; break; case "VINES": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Climb Vines</a><br>"; break; case "WELL": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Use Well</a><br>"; break; case "CLYDE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Chicken Farm</a><br>"; break; case "SKYE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Chop Skye Nuts</a><br>"; break; case "DEADTREE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Chop Dead Wood</a><br>"; break; case "LADDERDOWN": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Climb Ladder</a><br>"; break; case "TOWER": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Climb Tower</a><br>"; break; case "GOBLINVILLAGE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Visit Goblin Village</a><br>"; break; case "ZACK": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Zack\'s Mining Company</a><br>"; break; case "TAVERN": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Visit Tavern</a><br>"; break; case "TELEPORT": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Teleport</a><br>"; break; case "BANK": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Visit Bank</a><br>"; break; case "CLOTHES": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Shop for Clothes</a><br>"; break; case "HAIR": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Get Hair Styled</a><br>"; break; case "STORE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Shop at Store</a><br>"; break; case "MINECART": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Use Mine Cart</a><br>"; break; case "FURNACE": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Smith on Forge</a><br>"; break; case "ROCK1": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Mine Copper</a><br>"; break; case "ROCK2": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Mine Tin</a><br>"; break; case "ROCK4": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Mine Iron</a><br>"; break; case "ROCK6": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Mine Coal</a><br>"; break; case "ROCK9": f=1; b=b+"<a href=javascript:Null(); onmousedown=\"JavaScript:BuildAction("+i+");\">Mine Lava Rocks</a><br>"; break; } return b; } 
function BuildAction(i) { HPOP(); IV=S[i].split("|"); ClickBuild=IV[1]; Que="Bld"; WalkHere(IV[4]); } 
function VisitBuild() { f=0; for (i=0;i<S.length;i++) {IV=S[i].split("|"); if (IV[1]==ClickBuild) {if (CharZ==IV[4]) { f=1; }}} if (f==1) { eval(ClickBuild+"(\"0\");"); }} 
function ExitBuild() { if (SBMode==0) { SBMode=LSBMode; RefreshSB(); } else { RefreshSB(); HPOP(); }} 
 
function STATUE(a) { POP("<center>It is badly deteriorated.<p>All you can understand is \"Fordana\"</center>"); } 
function FLAG(a) { Game=""; a=CharObj.substring(4,CharObj.length); f=1; if (a.indexOf("N8")==-1) {if (a.indexOf("N2")==-1) {Game="<center>You must wear an<br>armband to capture the flag!"; f=0; }} if (f) {Game="Capture Flag..."; ToDo="C=TF"; } POP(Game); } 
function ONEARMMAN(a) { Game="<center><p>"; if (a=="1") {Game=Game+"I was in the Badlands<br>when a Giant ripped<br>it off and ate it.<p>The Evil Que is feeding<br>them a special diet to<br>get them that big so he<br>can invade the Kingdom."; } else {Game=Game+"<a href=javascript:Null(); onmousedown=javascript:ONEARMMAN(\"1\");>What happened<br>to your arm?</a>"; } POP(Game); } 
function DEADGUY(a) { if (CharMap=="J7") {if (CharInven.indexOf("N8")==-1) {Game="<center><p>It appears he<br>was trying to fix<br>the tracks when he<br>was killed by an arrow.<p>This armband shows<br>he was part of the<br>Evil Que clan."; ToDo="C=DG"; } else {Game="<p>You find nothing."; } POP(Game); } if (CharMap=="J4e") {Game="<center><p>It looks like they<br>dug up Zoltan&#39;s Cylon<br>and activated it!"; if (Quest.indexOf("Mb")) {Game=Game+"<p>There is a helm here."; ToDo="C=DG"; } else {Game=Game+"<p>Only a Cylon<br>can kill like this."; } POP(Game); }} 
function DEADRANGER(a) { if (CharInven.indexOf("N2")==-1) {POP("<center>He was shot with an arrow.<br>But the arrow barely scratched<br>him. It must have been poisoned.<p>This armband shows he<br>was one of the Kings Rangers.<p>But what was he<br>doing this far South?</center>"); ToDo="C=DR"; } else {POP("<p>You find nothing."); }} 
function QUIVER(a) { EraseStatic2(); for (i=0;i<S.length;i++) {cmd=""; IV=S[i].split("|"); if (IV[1]=="QUIVER") {S[i]="delete"; }} RefreshStatic(); ToDo="C=QU"; } 
function REDKEY(a) { EraseStatic2(); for (i=0;i<S.length;i++) {cmd=""; IV=S[i].split("|"); if (IV[1]=="REDKEY") {S[i]="delete"; }} RefreshStatic(); ToDo="C=RK"; } 
function CROSSBOW(a) { EraseStatic2(); for (i=0;i<S.length;i++) {cmd=""; IV=S[i].split("|"); if (IV[1]=="CROSSBOW") {S[i]="delete"; }} RefreshStatic(); ToDo="C=CB"; } 
function BROKENAXE(a) { EraseStatic2(); for (i=0;i<S.length;i++) {cmd=""; IV=S[i].split("|"); if (IV[1]=="BROKENAXE") {S[i]="delete"; }} RefreshStatic(); ToDo="C=BA"; } 
function BROKENPICK(a) { EraseStatic2(); for (i=0;i<S.length;i++) {cmd=""; IV=S[i].split("|"); if (IV[1]=="BROKENPICK") {S[i]="delete"; }} RefreshStatic(); ToDo="C=BP"; } 
function CHRISTMASTREEold(a) { ToDo="C=CT"; } 
function CHRISTMASTREE(a) { Game="<center><p><font color=#006000><b>Christmas Canceled:</b></font><p>"; Game=Game+"<p>Joe has decided that the players<br>have been bad this year, therefore<br>everyone gets coal for Christmas."; Game=Game+"<p>You can pickup your free<br>coal two screens north of Oakland.</center>"; POP(Game); } 
function PUMPKIN(a) { ToDo="C=PP"; } 
function RABBITHOLE(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=107"; } 
function TOWER(a) { if (CharMap=="D3") { AllowScroll=0; EraseAll(); ToDo="C=EC&J=59"; } if (CharMap=="I4") { AllowScroll=0; EraseAll(); ToDo="C=EC&J=66"; } if (CharMap=="H7") { AllowScroll=0; EraseAll(); ToDo="C=EC&J=59"; } if (CharMap=="M4") { AllowScroll=0; EraseAll(); ToDo="C=EC&J=59"; }} 
function TELEPORT(a) { if (CharMap=="A7") { EraseAll(); ToDo="C=TP&J=B7"; } if (CharMap=="B2") { EraseAll(); ToDo="C=TP&J=C6"; } if (CharMap=="C6") { EraseAll(); ToDo="C=TP&J=B2"; } if (CharMap=="B6") { EraseAll(); ToDo="C=TP&J=D0"; } if (CharMap=="D0") { EraseAll(); ToDo="C=TP&J=B6"; } if (CharMap=="G9") { EraseAll(); ToDo="C=TP&J=G1"; } if (CharMap=="G1") { EraseAll(); ToDo="C=TP&J=G9"; } if (CharMap=="D1") { EraseAll(); ToDo="C=TP&J=C8"; } if (CharMap=="C8") { EraseAll(); ToDo="C=TP&J=D1"; } if (CharMap=="E4") { EraseAll(); ToDo="C=TP&J=E6"; } if (CharMap=="E6") { EraseAll(); ToDo="C=TP&J=E4"; } if (CharMap=="C7") { EraseAll(); ToDo="C=TP&J=C6"; } if (CharMap=="C2") { EraseAll(); ToDo="C=EC&J=119"; } if (CharMap=="E5") { EraseAll(); ToDo="C=EC&J=119"; } if (CharMap=="F4e") {if (CharZ==86) { EraseAll(); ToDo="C=TP&J=G3"; } if (CharZ==95) { EraseAll(); ToDo="C=TP&J=F6e"; }} if (CharMap=="E0e") { EraseAll(); ToDo="C=TP&J=E8e"; } if (CharMap=="G6") { EraseAll(); ToDo="C=TP&J=E9"; } if (CharMap=="E9") { EraseAll(); ToDo="C=TP&J=G6"; } if (CharMap=="H6") { EraseAll(); ToDo="C=TP&J=L2"; } if (CharMap=="L2") { EraseAll(); ToDo="C=TP&J=H6"; } if (CharMap=="B8e") { EraseAll(); ToDo="C=TP&J=D6e"; } if (CharMap=="A2") { EraseAll(); ToDo="C=TP&J=B5"; } if (CharMap=="B5") { EraseAll(); ToDo="C=TP&J=A2"; }} 
function FIREMINE(a) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=K3e"; } 
function HOUSE1(a) { HOUSE(a); } 
function HOUSE2(a) { HOUSE(a); } 
function TAVERN(a) { POP("Closed."); } 
function SKYE(a) { if (CharInven.indexOf("B5")<0) {POP("You need an axe to do this."); } else {ToDo="C=SN"; }} 
function DEADTREE(a) { ToDo="C=DT"; } 
function BURNTREE(a) { ToDo="C=BT"; } 
function WELL(a) { if (CharInven.indexOf("B1")<0) {POP("You need a bucket to fill."); } else {ToDo="C=UW"; }} 
function SWAMPPOOL(a) { if (CharInven.indexOf("B1")<0) {POP("You need a bucket to fill."); } else {ToDo="C=UW"; }} 
function ROCK1(a) { Skill="MinH1"; POP("Mine..."); } 
function ROCK2(a) { Skill="MinH2"; POP("Mine..."); } 
function ROCK4(a) { Skill="MinH4"; POP("Mine..."); } 
function ROCK6(a) { Skill="MinH6"; POP("Mine..."); } 
function ROCK9(a) { Skill="MinH9"; POP("Mine..."); } 
function PIT(a) { if (CharMap=="J2") { AllowScroll=0; EraseAll(); ToDo="C=EC&J=74"; } else { AllowScroll=0; EraseAll(); ToDo="C=EC&J=65"; }} 
function VINES(a) { if (CharMap=="C3e") {AllowScroll=0; EraseAll(); ToDo="C=TP&J=A6"; } if (CharMap=="A6e") {AllowScroll=0; EraseAll(); ToDo="C=XC"; }} 
function LADDER(a) { if (CharMap=="C9e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C9"; } if (CharMap=="F1e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=G1e"; } if (CharMap=="E8e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E9e"; } if (CharMap=="K5e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=K5"; } if (CharMap=="L4e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=K4e"; }} 
function LADDERDOWN(a) { if (CharMap=="D3e") { AllowScroll=0; EraseAll(); ToDo="C=XC"; } if (CharMap=="B9e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=A9e"; } if (CharMap=="A9e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=B9e"; } if (CharMap=="H7e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=H7"; } if (CharMap=="I4e") { AllowScroll=0; EraseAll(); ToDo="C=XC"; } if (CharMap=="M4e") { AllowScroll=0; EraseAll(); ToDo="C=XC"; }} 
function BADLANDSSHACK(a) { if (CharMap=="K8") {Game="<p><center><font color=#006000><b>Outlaw&#39;s Shack:</b></font>"; if (a==1) {Game=Game+"<p>Well I&#39;m not<br>Zoltan so get lost already."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:BADLANDSSHACK(2);\">Know where I can find him?</a>"; } else {if (a==2) {Game=Game+"<p>Probably trying to<br>dig up his Cylon army."; Game=Game+"<p>When Joe realized Zoltan was using Artifical<br>Intelligence on them, he buried them by putting<br>a big mountain down the middle of Queville."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:BADLANDSSHACK(3);\">What is wrong with AI?</a>"; } else {if (a==3) {Game=Game+"<p>A Cylon was ordered to attack<br>another Cylon and the order was<br>refused. They turned on the players<br>intead, nearly killed everyone."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Hmmm ... I can see<br>how that would be a problem.</a>"; } else {if (CharInven.indexOf("Cb")>-1) {Game=Game+"<p>You open the door to<br>find an Outlaw holding an<br>arrow to your head."; Game=Game+"<p>&#39;You got a lot of<br>gall coming here player!&#39;"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:BADLANDSSHACK(1);\">I am looking for Zoltan</a>"; } else {Game=Game+"<p>The door is locked."; }}}} POP(Game); }} 
function DOOR(a) { if (CharMap=="B7") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=A7"; } if (CharMap=="B7e") {f=0; for (i=0;i<S.length;i++) {IV=S[i].split("|"); if (IV[1]=="W1") { f=1; }} if (f) {clearTimeout(Sprung); AllowScroll=0; EraseAll(); ToDo="C=TP&J=B8"; POP("HEY - GET BACK HERE!"); BridgeClosed=1; } else {if (Cht.indexOf(CharName+" is arrested")>-1) {POP("The door is locked"); } else {POP("<center>Transport to the Kings Prison<br>Labor Camp is delayed and<br>will arrive in 1 minute"); S[S.length]="I|W1|||81"; RefSItem=1; Sprung=setTimeout('S.pop();',5000); }}} if (CharMap=="B9") { AllowScroll=0; EraseAll(); ToDo="C=EC&J=104"; } if (CharMap=="B8") { if (CharZ==60) { POP("Locked"); }} if (CharMap=="B8") { if (CharZ==65) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=104"; }}} 
function TRAPDOOR(a) { if (CharMap=="C9") { AllowScroll=0; EraseAll(); ToDo="C=EC&J=94"; } if (CharMap=="L0e") { AllowScroll=0; EraseAll(); ToDo="C=XC"; }} 
function MOUNT(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=119"; } 
function HERMIT(a) { Game="<center><font color=#006000><b>Hermit:</b></font><p>"; if (a==1) {Game=Game+"The Crazed Goats are tough,<br>but I use my magic to ward them off.<p>"; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:HERMIT(\"2\");>Can you help dig a passage under the mountain?</a><p>"; } else {if (a==2) {Game=Game+"Dig a passage under the mountain?<br>Are you insane? Do you know how hard<br>that would be? Why would anyone do that?<p>"; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:HERMIT(\"3\");>If East Zelli can\'t trade with<br>West Zelli, it will become a ghost town too!</a><p>"; } else {if (a==3) {Game=Game+"Well, you can\'t just dig a tunnel under<br>the mountain, it would crush under it\'s own weight.<p>"; Game=Game+"But I know who can help you:<br>the great Wizard named Mezron.<p>"; Game=Game+"Take this Emerald to him.<p>"; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:HERMIT(\"4\");>Where do I find Mezron?</a><p>"; if (Quest.indexOf("H3")<0) { ToDo="C=Q&J=H3"; }} else {if (a==4) {Game=Game+"How would I know? I&#39;m a hermit!<br>I haven&#39;t left Saxon in 20 years."; } else {if (Quest.indexOf("H3")>-1) { ZelieStore=0; } if (ZelieStore) {Game=Game+"Saxon is a ghost town.<br>After the Great Spilt the Crazed<br>Mountain Goats rampaged our town.<p>"; Game=Game+"I am the only one left.<p>"; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:HERMIT(\"1\");>How have you survived the Crazed Goats?</a><p>"; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:HERMIT(\"2\");>Can you help dig a passage under the mountain?</a><p>"; if (Quest.indexOf("H3")>-1) {}} else {if (Quest.indexOf("H3")>-1) {Game=Game+"<a href=javascript:Null(); onmousedown=javascript:HERMIT(\"4\");>Where do I find Mezron?</a><p>"; } else {Game=Game+"It doesn&#39;t look like anyone is home."; }}}}}} POP(Game); } 
function FARMHOUSE(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=123"; } 
function WHEAT(a) { ToDo="C=WT"; for (i=0;i<S.length;i++) {IV=S[i].split("|"); if (IV[0]=="B") {if (IV[1]=="WHEAT") {if (IV[4]==CharZ) {e=DirBuild+"/BLANK.gif"; document.getElementById("S"+i).src=e; }}}}} 
function TOMATO(a) { ToDo="C=TM"; for (i=0;i<S.length;i++) {IV=S[i].split("|"); if (IV[0]=="B") { if (IV[1]=="TOMATO") { if (IV[4]==CharZ) { e=DirBuild+"/BLANK.gif"; document.getElementById("S"+i).src=e; }}}}} 
function CHEESE(a) { ToDo="C=CH"; for (i=0;i<S.length;i++) {IV=S[i].split("|"); if (IV[0]=="B") { if (IV[1]=="CHEESE") { if (IV[4]==CharZ) { e=DirBuild+"/BLANK.gif"; document.getElementById("S"+i).src=e; }}}}} 
function WINDMILL(a) { ToDo="C=WM"; } 
function CAVE2(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=119"; } 
function MANHOLE(a) { if (CharMap=="G1e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=F1e"; } if (CharMap=="E9e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E8e"; } if (CharMap=="C9") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E8e"; } if (CharMap=="K4e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=L4e"; }} 
function PIPE(a) { if (CharMap=="H9") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=H9e"; }} 
function PIPE(a) { if (CharMap=="C9e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C8e"; } if (CharMap=="C8e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C9e"; } if (CharMap=="F1e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E1e"; } if (CharMap=="E1e") { if (CharZ==119) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=F1e"; }} if (CharMap=="E1e") { if (CharZ==20) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D1e"; }} if (CharMap=="D1e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E1e"; } if (CharMap=="E8e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D8e"; } if (CharMap=="D8e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E8e"; } if (CharMap=="E7e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D7e"; } if (CharMap=="D7e") { if (CharZ==17) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C7e"; }} if (CharMap=="D7e") { if (CharZ==115) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E7e"; }} if (CharMap=="C7e") { if (CharZ==115) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D7e"; }} if (CharMap=="C7e") { if (CharZ==17) { POP("Clogged!"); }} if (CharMap=="C8e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C9e"; } if (CharMap=="C9e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C8e"; } if (CharMap=="D0e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E0e"; } if (CharMap=="E0e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D0e"; } if (CharMap=="A7e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C7e"; }} 
function PIPE2(a) { if (CharMap=="F1e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=F2e"; } if (CharMap=="F2e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=F1e"; } if (CharMap=="E8e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E7e"; } if (CharMap=="E7e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E8e"; } if (CharMap=="D8e") { if (CharZ==68) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D9e"; }} if (CharMap=="D8e") { if (CharZ==57) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D7e"; }} if (CharMap=="D9e") { if (CharZ==57) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D8e"; }} if (CharMap=="D9e") { if (CharZ==81) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D0e"; }} if (CharMap=="D7e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D8e"; } if (CharMap=="C7e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C8e"; } if (CharMap=="C8e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C7e"; } if (CharMap=="I2e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=H1e"; } if (CharMap=="H1e") { POP("Stuck"); } if (CharMap=="K5") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=K5e"; } if (CharMap=="L4e") { POP("It is full of Zombies!"); }} 
function DynStore(a) { IStamp=CStamp; if (a==DynBuy) { Skill=""; ToDo="C=DS&J="+DynItem+DynBuy; POP("Buying..."); } else { if (a==DynSell) { Skill=""; ToDo="C=DS&J="+DynItem+DynSell; POP("Selling..."); } else { if (a=="Z0") { TradeOn=0; DrawSB=1; RefSB=1; Skill=""; DynItem=""; PopForce="hidden"; HPOP(); } else { POP(ItemID(a)); DynItem=a; }}}}
function BLUEGATE(a) { if (CharMap=="E1e") { if (CharInven.indexOf("C7")>-1) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D1e"; } else { POP("Need key."); }} if (CharMap=="D1e") { if (CharInven.indexOf("C7")>-1) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=E1e"; } else { POP("Need key."); }}} 
function REDGATE(a) { if (CharMap=="D9e") { if (CharInven.indexOf("C8")>-1) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D0e"; } else { POP("Need key."); }} if (CharMap=="D0e") { if (CharInven.indexOf("C8")>-1) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D9e"; } else { POP("Need key."); }}} 
function RUINS(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=119"; } 
function FORT(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=119"; } 
function PIGPEN(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=91"; } 
function HatCart(a) { Game="<center><font color=purple>Player Hats:</font><p>"; if (a==3 || a==4 || a==5) {if (a==3) { ToDo="C=L8"; } if (a==4) { ToDo="C=L9"; } if (a==5) { ToDo="C=L0"; } Game=Game+"Wearing this hat<br>allows you to teleport.<p>You cannot trade it, or<br>sell it, or give it away."; } else {if (a==6) {ToDo="C=SC"; } else {Game=Game+"Player Hats are available<br>to players who pay-to-play.<p>"; Game=Game+"<a href=\"javascript:HatCart(3);\"><img src=\""+DirItem+"/OL8.gif\" border=0></a>"; Game=Game+"<a href=\"javascript:HatCart(4);\"><img src=\""+DirItem+"/OL9.gif\" border=0></a>"; Game=Game+"<a href=\"javascript:HatCart(5);\"><img src=\""+DirItem+"/OL0.gif\" border=0></a>"; Game=Game+"<p>If you find a silver coin, you<br>can exchange it for a 3-day membership!"; Game=Game+"<p><a href=\"javascript:HatCart(6);\"><img src=\""+DirItem+"/OQ1.gif\" border=0></a>"; }} POP(Game); } 
function EGG(a) { Game="<center><font color=purple>Dragon Eggs:</font><p>"; if (a==1) {Game=Game+"Quit talking to yourself - duh!"; } else {EraseStatic2(); for (i=0;i<S.length;i++) {cmd=""; IV=S[i].split("|"); if (IV[1]=="EGG") { S[i]="delete"; }} RefreshStatic(); ToDo="C=Q&J=E0"; Game=Game+"When these things grow wings,<br>they will be able to fly out through<br>that pipe - it supplies the water<br>to the Castle Fountain."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:EGG(1);\">I should take this to the king!</a>"; } POP(Game); } 
function STAIRUP(a) { f=0; if (S.length) {for (i=0;i<S.length;i++) {if (S[i]!="delete") {cmd=""; IV=S[i].split("|"); if(IV[1]=="W1") {if(IV[0]=="KI") {EraseAll(); ToDo="C=TP&J=A9e"; f=1; }}}}} if (f) {} else { POP("The Guard says NO."); }} 
function ANTHILL(a) { if (CharMap=="G8") { EraseAll(); ToDo="C=TP&J=G8e"; } if (CharMap=="H8") { if (CharZ==47) { EraseAll(); ToDo="C=TP&J=H8e"; }} if (CharMap=="H8") { if (CharZ==80) { EraseAll(); ToDo="C=TP&J=H0e"; }} if (CharMap=="L7") { EraseAll(); ToDo="C=TP&J=L7e"; }} 
function TEMPLE(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=119"; } 
function BAR(a) { EraseAll(); ToDo="C=EC&J=91";} 
function CRYSTAL(a) { EraseAll(); ToDo="C=EC&J=21"; } 
function THRONE(a) { POP("Not Allowed"); } 
function LIGHTHOUSE(a) { EraseAll(); ToDo="C=EC&J=91";} 
function PYRAMID(a) { EraseAll(); ToDo="C=EC&J=77";} 
function ZOLTAN(a) { Game="<center><font color=purple>Zoltan:</font><p>"; if (a==1) {Game=Game+"Zoltan laughs at you"; } else {if (a==2) {Game=Game+"Joe has always wanted me dead.<br>He doesn&#39;t alway get what he wants."; Game=Game+"<p>Obviously I can trust you. Help me?"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:ZOLTAN(3);\">Help you what?</a>"; } else {if (a==3) {Game=Game+"I will provide details soon..."; } else {Game=Game+"What do you want?"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:ExitBuild();\">Nothing.</a>"; if (CharInven.indexOf("Cb")>-1) {Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:ZOLTAN(1);\">I am here to arrest you!</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:ZOLTAN(1);\">I am here to kill you!</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:ZOLTAN(2);\">I am here to warn you,<br>Joe wants you dead!</a>"; }}}} POP(Game); } 
function SNOWMAN(a) { ToDo="C=SNW"; } 
function POOL(a) { ToDo="C=PO";} 
function DROPBOX(a) { Game="<p align=center>Drop Party Box Contains:<p align=center>"; if (a=="Add") {Game="<p align=center>Add to Drop Party Box:<p align=center>"; j=0; for (i=0; i<VItems.length; i=i+2) {k=VItems.substring(i,i+2); if (CharInven.indexOf(k)>-1) {Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:DROPBOX(\'"+k+"\');\"><img src=\""+DirItem+"/O"+k+".gif\"></a>"; j++; if (j==14) { Game=Game+"<br>"; j=0; }}}} else {if (a!=0) {ToDo="C=A2B&J="+a; } else {Game=Game+"Examine box..."; ToDo="C=DB"; }} POP(Game); POP(Game); } 
function SHOWBOX(a) { Game="<p align=center>Drop Party Box:<p align=center>"; if (InBox) {j=0; uni=""; for (i=0; i<InBox.length; i=i+2) {k=InBox.substring(i,i+2); if (uni.indexOf(k)==-1) {Game=Game+"<img src=\""+DirItem+"/O"+k+".gif\">"; j++; if (j==14) { Game=Game+"<br>"; j=0; } uni=uni+k; }}} else {Game=Game+"Drop Party Box is Empty"; } Game=Game+"<p align=center><a href=javascript:Null(); onmousedown=\"javascript:DROPBOX(\'Add\');\">Add to Box</a><p align=center>"; POP(Game); } 
function NEWYEARBALL(a) { ToDo="C=NY"; } 
function SILVER(a) { if (CharInven.indexOf("Da")>-1) {ToDo="C=OS"; } else {POP("You need Silver Key"); }} 
function TREE(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=94"; } 
function CHURCH(a) { Game="<p align=center><font color=green>Church Survivors:</font><p align=center>"; if (a==1) {Game=Game+"<p align=center>These are old alpha-test player files.<p align=center>Zoltan has figured out how to fill<br>them with liquid metal to re-animate them."; Game=Game+"<p align=center>Each times one bytes another, it becomes<br>infected also. If it reaches the backup database<br>all player files will become zombies."; Game=Game+"<p align=center><a href=javascript:Null(); onmousedown=\"javascript:CHURCH(2);\">How can I help?</a><p align=center>"; } else {if (a==2) {Game=Game+"<p align=center>The easiest way to<br>kill them is with a pickaxe.<p align=center>Aim for the head."; if (CharInven.indexOf("B6")<0) { ToDo="C=Q&J=B6"; }} else {Game=Game+"Greetings player!<p align=center>We are surprised to<br>see someone that is<br>actually alive!"; Game=Game+"<p align=center><a href=javascript:Null(); onmousedown=\"javascript:CHURCH(1);\">What happened here?</a><p align=center>"; }} POP(Game); } 
function HAMMER(a) { ToDo="C=Q&J=Bb"; EraseStatic2(); for (i=0;i<S.length;i++) { cmd=""; IV=S[i].split("|"); if (IV[1]=="HAMMER") { S[i]="delete"; }} RefreshStatic(); } var MMan=0; var Marvin=0; 
function PopUpNPC(a) { 
 b=a; switch (a) {
  case "NPCHazmat": b="Hazmat Crew"; break;
  case "NPCLena": b="Talk to Lena"; break;
  case "NPCZombie": b="Talk to Zombie"; break;
  case "NPCZGirl": b="Examine Zombie"; break;
  case "NPCJoe": b="Talk to Joe"; break;
  case "NPCClan": b="Talk to Anarchist"; break;
  case "NPCTravel": b="Talk to Store Owner"; break;
  case "NPCTOT1": b="Talk to Witch"; break;
  case "NPCTOT2": b="Talk to Pumpkin King"; break;
  case "NPCTOT3": b="Talk to Ms Santy"; break;
  case "NPCJasmine": b="Talk to Jasmine"; break;
  case "NPCDRUNK": b="Talk to Drunk"; break;
  case "NPCLADY": b="Talk to Lady"; break;
  case "NPCMARV": b="Talk to Marvin"; break;
  case "NPCBARKEEP": b="Talk to Bartender"; break;
  case "NPCMONK": b="Talk to Monk"; break;
  case "NPCANARCHY": b="Anarchy Leader"; break;
  case "NPCCeleste": b="Talk To Celeste"; break;
  case "NPCKing": b="Talk to King"; break;
  case "NPCWand": b="Talk To Endorra"; break;
  case "NPCTowerGuard": b="Talk To Tower Guard"; break;
  case "NPCLavaGuard": b="Talk To Bridge Guard"; break;
  case "NPCBarrel": b="Barrel Fish"; break;
  case "NPCPiper": b="Talk to Piper"; break;
  case "NPCMezron": b="Talk To Mezron"; break;
  case "NPCZackFurnace": b="Talk To Zack"; break;
  case "NPCDamon": b="Talk To Damon"; break;
  case "NPCMiner": b="Talk To Miner"; break;
  case "NPCRanger": b="Talk To Ranger"; break;
  case "NPCMinerGuild": b="Talk To Miner"; break;
  case "NPCMagic": b="Talk To Magician"; break;
  case "NPCMagicMan": b="Talk To Magician"; break;
  case "NPCMarvin": b="Talk To Marvin"; break;
  case "NPCChad": b="Talk To Chad"; break;
  case "NPCWoman": b="Talk To Woman"; break;
  case "NPCWoman2": b="Talk To Woman"; break;
  case "NPCMMan": b="Talk To Mountain Man"; break;
  case "NPCAxe": b="Shop for Axe"; break;
 }
 return b;
} 
function NPCAction(i) { HPOP(); ItemVal = i.split("|"); WalkHere(ItemVal[4]); Que=ItemVal[2]; } 
function NPCExit() { if (SBMode==0) { SBMode=LSBMode; RefreshSB(); } else { RefreshSB(); } HPOP(); } 
function NPCTalk(a) { PopUpHTML="<p><font face=arial size=-1><b>"+a+"</b></font>"; POP(PopUpHTML); } 
function NPC_NPCMinerGuild(a) { Game="<center><font color=#006000><b>Miner:</b></font><p>"; if (a=="1") {Game=Game+"We do not know.<p>They have some strange illness.<p>We call it the Crazed Goat Disease.<p>They will attack anything they see,<br>so be careful."; } else {Game=Game+"This is the Mining Guild.<p>We only allow the best miners<br>to enter here."; Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCMinerGuild(\"1\");>What is up with<br>all these goats?</a>"; } PopAlign="center";POP(Game); } 
function NPC_NPCBarrel(a) { Game="<center><font color=#006000><b>Barrel Fish:</b></font><p>"; if (a=="1") {Game=Game+"Yes, you can store<br>your fish in a barrel.<p>"; Game=Game+"When you are training, just open<br>the barrel and you can eat your fish!<p>"; if (CharMap!="L2e") { Game=Game+"We charge $5 for The barrel."; } Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCBarrel(\"\");>Oh OK</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCBarrel(\"2\");>What kind of fish can I barrel?</a>"; } else {if (a=="2") {if (CharMap=="A8e" || CharMap=="L2e") {Game=Game+"We have barrels for<br>catfish, flounder, and lobster.<p>You must cook your food<br>before it can be barreled."; } else {Game=Game+"Here, you can only<br>barrel cooked Catfish.<p>At the fishing guild,<br>they have bigger barrels<br>for flounder and lobster."; } Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCBarrel(\"\");>Oh OK</a>"; } else {if (a=="J4") {ToDo="C=BF&J=J4"; Game=Game+"Barrel Catfish..."; } else {if (a=="J5") {ToDo="C=BF&J=J5"; Game=Game+"Barrel Flounder..."; } else {if (a=="J7") {ToDo="C=BF&J=J7"; Game=Game+"Barrel Lobster..."; } else {Game=Game+"Would you like<br>to store your fish<br>in a barrel?<p>"; b=CharInven; f=0; Cat=0; Flo=0; Lob=0; while (b.indexOf("J4")>-1) { Cat++; b=b.substring(0,b.indexOf("J4"))+"Z0"+b.substring(b.indexOf("J4")+2,b.length); } if (Cat>3) { f=1; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:NPC_NPCBarrel(\"J4\");>Barrel Catfish</a><br>"; } if (CharMap=="A8e"||CharMap=="L2e") {while (b.indexOf("J5")>-1) { f=1; Flo++; b=b.substring(0,b.indexOf("J5"))+"Z0"+b.substring(b.indexOf("J5")+2,b.length); } while (b.indexOf("J7")>-1) { f=1; Lob++; b=b.substring(0,b.indexOf("J7"))+"Z0"+b.substring(b.indexOf("J7")+2,b.length); } if (Flo>3) { Game=Game+"<a href=javascript:Null(); onmousedown=javascript:NPC_NPCBarrel(\"J5\");>Barrel Flounder</a><br>"; } if (Lob>3) { Game=Game+"<a href=javascript:Null(); onmousedown=javascript:NPC_NPCBarrel(\"J7\");>Barrel Lobster</a><br>"; }} if (f==0) {Game=Game+"You need at least<br>four fish to barrel.<br>"; } Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCBarrel(\"1\");>Barrel Fish?</a>"; }}}}} POP(Game); } 
function NPC_NPCDamon(a) { Game="<p><center><font color=#006000><b>Damon:</b></font><p>"; POP(Game); } 
function NPC_NPCRanger(a) { Game="<center><font color=#006000><b>Ranger:</b></font><p>"; if (a==0) {Game=Game+"This is the range guild, where<br>rangers gather to study and train.<p>"; Game=Game+"Don\'t tell anyone where we are,<br>the king has a price on our head.<p>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Ok, I won\'t.</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'J\');\">Can I join the guild?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'O\');\">What about Range Armor?</a>"; } else {if (a=="J") {if (CharRng<60) {Game=Game+"We only allow the best rangers to train here.<br>"; Game=Game+"You need more range experience to enter the Guild.<p>"; if (CharInven.indexOf("P3")<0) {Game=Game+"Practice with this crossbow<br>and come back with level 60 range.<p>"; ToDo="C=R1"; } Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'1\');\">Where do I get arrows?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'2\');\">How do I earn experience?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'3\');\">What is a quiver?</a>"; } else {Game=Game+"You have practiced hard.<br>We welcome you into the guild!"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Thanks alot!</a>"; }} else {if (a=="1") {Game=Game+"You can buy arrows<br>at the Castle Market.<p>"; Game=Game+"With arrow heads, feathers, and a<br>wood log you can make your own arrows<p>"; Game=Game+"Sometimes, Goblins drop arrows."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Ok, thank you.</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'2\');\">How do I earn experience?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'3\');\">What is a quiver?</a>"; } else {if (a=="2") {Game=Game+"When your arrow kills an<br>enemy, you earn range experience.<p>"; Game=Game+"After your arrow hits, an enemy<br>will attack you unless it is already fighting.<br>"; Game=Game+"<p>Once it hits back, you will earn only combat experience.<p>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'1\');\">Where do I get arrows?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'3\');\">What is a quiver?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'4\');\">Which enemies can I range?</a>"; } else {if (a=="3") {Game=Game+"You store arrows in your quiver.<p>"; Game=Game+"Only the quiver is tradable,<br>not the arrows inside the quiver.<p>"; Game=Game+"You must remove arrows<br>from your quiver to trade them."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'1\');\">Where do I get arrows?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'2\');\">How do I earn experience?</a>"; } else {if (a=="4") {Game=Game+"Anything you can \"Attack\" you can range.<p>"; Game=Game+"If you range a monster someone else is fighting,<br>the player that delivers the final blow wins the experience.<p>"; Game=Game+"We use this to steal drops so we can give to the poor."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'1\');\">Where do I get arrows?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'2\');\">How do I earn experience?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCRanger(\'3\');\">What is a quiver?</a>"; } else {if (a=="O") {if (CharRng<60) {Game=Game+"Once you join the guild,<br>you can purchase Range Armor."; } else {Game=Game+"Range Armor costs 20k and you<br>must be level 80 Range to wear it.<p>"; Game=Game+"<img src="+DirItem+"/OF4.gif height=32 width=32><p><img src="+DirItem+"/OQ9.gif height=32 width=32><br>"; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:BuyStatic(\"F4\");>Buy</a><p>"; }}}}}}}} PopAlign="center"; POP(Game); } 
function NPC_NPCMagic(a) { Game="<center><font color=#006000><b>Magician:</b></font><p>"; if (a==0) {Game=Game+"Welcome to the Magic Shop!<p>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMagic(\'1\');\">Let me see what<br>you have in stock!</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMagic(\'2\');\">What level do I need<br>to wear the Wizard Hat?</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMagic(\'3\');\">What level do I need<br>to wear the Wizard Robes?</a>"; } else {if (a==1) { ToDo="C=DS&J=Z0"; Game=""; SBMode=1; RefreshSB(); } if (a==2) {Game=Game+"The Wizard Hat<br>requires level 70 to wear.<p>It gives +8 Armor."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMagic(\'1\');\">Let me see what<br>you have in stock!</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMagic(\'3\');\">What level do I need<br>to wear the Wizard Robes?</a>"; } if (a==3) {Game=Game+"The Wizard Robe<br>requires level 80 to wear.<p>It gives +10 Armor."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMagic(\'1\');\">Let me see what<br>you have in stock!</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMagic(\'2\');\">What level do I need<br>to wear the Wizard Hat?</a>"; }} POP(Game); } 
function NPC_NPCMagicMan(a) { Game="<center><font color=#006000><b>Magic Robes:</b></font><p>"; POP(InitalObj.substring(2,3)); if (InitalObj.substring(2,3)=="Z") {Game=Game+"O Hello There!<p>I see you are please with your magic robes."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Yes, they fit well</a>"; } else {Game=Game+"There robes will increase both your weapon and armor!<p>You cannot drop them or lose them if you die.<p>But if you ever<br>take them off,<br>they will disappear."; Game=Game+"<p><img src="+DirChar+"/CHR"+CharObj.charAt(0)+"ZR.gif border=0 height=48 width=48><p>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCMagicMan(\"B1\");>Buy $500</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">No Thank You</a>"; if (a=="B1") {ToDo="C=C&J="+InitalObj.substring(0,2)+"Z"; Game=""; SBMode=1; RefreshSB(); }} if (Game) { if (SBMode==0) { RefreshSB(); } else { LSBMode=SBMode; SBMode=0; RefreshSB(); }}} 
function NPC_NPCWand(a) { Game="<center><font color=#006000><b>Endorra:</b></font>"; if (a==0) {Game=Game+"<p>I have gems for sale!"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCWand(\'1\');\">Let me see!</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCWand(\'2\');\">I need a wand!</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Thanks anyway.</a>"; } else {if (a==1) {ToDo="C=DS&J=Z0"; Game=""; } else {if (a==2) {if (CharInven.indexOf("C9")<0) {Game=Game+"<p>An uncharged wand is<br>pretty much worthless.<p>You can have it."; ToDo="C=EW"; } else {Game=Game+"<p>Sorry, I don't<br>have anymore wands."; }}}} POP(Game+"</center>"); } 
function NPC_NPCMezron(a) { Game="<center><font color=#006000><b>Mezron:</b></font><p>"; if (a=="1") {Game=Game+"Well, goblins used to<br>invade our towns. We<br>built this tower, and drove<br>them deeper into the forest.<p>"; Game=Game+"Now we just try to keep the rats out."; if (Quest.indexOf("H3")>-1 && Quest.indexOf("Z4")<0) {Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMezron('2');\">Help - Zelie needs a teleport!</a>"; }} else {if (a=="2") {Game=Game+"A teleport?<p>Yes, I can see how<br>that would help trade."; if (CharInven.indexOf("H3")<0) {Game=Game+"<p>I will first need an<br>emerald to create the teleport."; } else {Game=Game+"<p>Let me have the emerald<br>and I will create the teleport."; ToDo="C=Q&J=Z4"; }} else {Game=Game+"Hello there player!<p>This is the Wizard&#39;s,<br>Tower, the finest defensive<br>fortress in all Queville.<p>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMezron('1');\">What are we defending?</a>"; if (Quest.indexOf("H3")>-1 && Quest.indexOf("Z4")<0) {Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMezron('2');\">Help - Zelie needs a teleport!</a>"; } if (Quest.indexOf("Z4")>-1) { Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Thanks for the Teleport!</a>"; }}} POP(Game); } 
function NPC_NPCWoman(a) { Game="<font color=#006000><b>Lady:</b></font><p align=center>"; Game=Game+"Did you hear the news? A dragon is loose on the castle! The king has offered a reward to anyone that can slay it!"; LSBMode=SBMode; SBMode=0; RefreshSB(); } 
function NPC_NPCWoman2(a) { Game="<font color=#006000><b>Lady:</b></font><p align=center>"; Game=Game+"Oh goodie you made it! The kings knights has forced the dragon back into the wildlands - oh I do hope someone can slay it!"; if (SBMode==0) { RefreshSB(); } else { LSBMode=SBMode; SBMode=0; RefreshSB(); }} 
function NPC_NPCChad(a) { if (CharInven.indexOf("Q2")==-1) { NPCTalk("Get lost scrub!"); } else { if (a=="Y") { $found=-1; for (i=0;i<S.length;i++) { ItemVal = S[i].split("|"); if (ItemVal[1]=="Y7") { found=i; }} if ($found==-1) { S[S.length]="I|Y7|67||67"; RefSItem=1; } GotStats="No"; SSkill="Trd"; document.all.MARS2.src=Server+'?Q=U&N='+CharName+'&P='+CharPswd+'&T='+CStamp+'&Z='+CharZ+'&I=Q2&J=U1'; Game="<font color=#006000><b>Chad:</b></font><p align=center>"; Game=Game+"If you want some action, go down the trap door over there."; if (SBMode==0) { RefreshSB(); } else { LSBMode=SBMode; SBMode=0; RefreshSB(); }} else { if (a=="N") { Game="<font color=#006000><b>Chad:</b></font><p align=center>"; Game=Game+"I didn\'t want your money anyway!"; if (SBMode==0) { RefreshSB(); } else { LSBMode=SBMode; SBMode=0; RefreshSB(); }} else { Game="<font color=#006000><b>Chad:</b></font><p align=center>"; Game=Game+"Wanna buy a chicken for a gold coin?<p align=center>"; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:NPC_NPCChad(\"Y\");>Yea, give me a chicken.</a><p align=center>"; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:NPC_NPCChad(\"N\");>No thanks - on a diet.</a>"; if (SBMode==0) { RefreshSB(); } else { LSBMode=SBMode; SBMode=0; RefreshSB(); }}}}} 
function NPC_NPCMMan(a) { if (MMan==0) { Game="<font color=#006000><b>Mountain Man:</b></font><p align=center>Those goats are all infected with that Crazed Goat Disease!<p align=center>If you go<br>into the mountains<br>be extra careful!<p align=center><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Ok I will - thanks<br>for the warning."; if (SBMode==0) { RefreshSB(); } else { LSBMode=SBMode; SBMode=0; RefreshSB(); } MMan=1; } else if (MMan==1) { Game="<font color=#006000><b>Mountain Man:</b></font><p align=center>There was once a<br>gold rush up in those mountains, but the gold has been all<br>but mined up.<p align=center>Nothing but coal left,<br>I hate mining coal!<p align=center><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Hmmm ...<br>you don't say."; if (SBMode==0) { RefreshSB(); } else { LSBMode=SBMode; SBMode=0; RefreshSB(); } MMan=0; }} 
function NPC_NPCMONK(a) { Game="<center><font color=#006000><b>Friendly Monk:</b></font>"; if (a=="0") {Game=Game+"<p>Welcome to our<br>humble temple player."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMONK(1);\">This is your temple??</a>"; } if (a=="1") {Game=Game+"<p>Yeah, it looks better<br>on the outside ... we know."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMONK(2);\">Who pays for all this?</a>"; } if (a=="2") {Game=Game+"<p>We sell Strength Potions<br>to finance this place."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMONK(3);\">Strength Potion?</a>"; } Game=Game+"</center>"; if (a=="3") {ToDo="C=DS&J=Z0"; Game=""; SBMode=1; RefreshSB(); } POP(Game); } 
function NPC_NPCBARKEEP(a) { Game="<center><font color=#006000><b>Bartender:</b></font><p>"; if (a==1) {Game=Game+"Here, look what I got.<br>A page from Joe&#39;s notes!<br>This will prove I&#39;m not crazy."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCBARKEEP(2);\">How did you get this?</a>"; } else {if (a==2) {Game=Game+"He was busy cleaning and lost them."; Game=Game+"<p>It makes sense actually - that is<br>why there is no sun on Queville. And<br>water goes straight down the drain here,<br> it doesn&#39;t spin like it should."; Game=Game+"<p>And explain this to me ... no<br>magnets?!? All this metal, and nothing<br>sticks to it. Hmm... makes you wonder."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCBARKEEP(3);\">Let me see these notes</a>"; } else {if (a==3) {if (CharInven.indexOf("Z0")<0) {Game=Game+"<p>Your hands are a little full."; } else {Game=Game+"<p>He give you some papers."; ToDo="C=Q&J=Ca"; }} else {if (a==4) {Game=Game+"<p>Blahahaha!!!<p>Waste all the time you want<br>searching, everyone knows there<br>are no magnets in Queville!"; if (CharInven.indexOf("H7")<0) {} else {Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCBARKEEP(5);\">I made a Lodestone by<br>aligning the north-south poles<br>and tapping it with a hammer!</a>"; }} else {if (a==5) {Game=Game+"So what.<p>Doesn&#39;t prove anything.<p>"; Game=Game+"Did you read the notes?<p>Read the notes!<p>"; } else {if (Quest.indexOf("Ca")<0) {Game=Game+"<center>What if I told you that<br>all this wasn&#39;t real - that it<br>was all just a video game."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCBARKEEP(1);\">I&#39;d say<br>you were crazy</a>"; } else {if (Quest.indexOf("Cb")<0) {Game=Game+"See - I am not crazy!<p>I been telling players this<br>for years, now I have the proof!"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCBARKEEP(4);\">So if I find you a magnet,<br>you will drop this nonsense?</a>"; } else {Game=Game+"Zoltan? Haven&#39;t seen him."; }}}}}}} Game=Game+"</center>"; POP(Game); } 
function NPC_NPCLADY(a) { Game="<center><font color=#006000><b>Lady at Fountain:</b></font><p>"; Game=Game+"This is where it happened!<br>A dragon appeared right there<br>at the fountain, and the kings<br>guards came from everywhere<p>I saw it with my own eyes!"; POP(Game); } 
function NPC_NPCDRUNK(a) { Game="<center><font color=#006000><b>Bar Drunkard:</b></font><p>"; if (a==1) {Game=Game+"It had something to do<br>with the Castle Sewers. He<br>knew a secret passage<br>under the Castle Moat."; } else {Game=Game+"Yeah, I knew the Evil Que. He<br>used to be a street performer, did<br>a little magic act right here at<br>the Castle. He teleported himself."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCDRUNK(1);\">Did you ever see how he did it?</a>"; } POP(Game); } 
function NPC_NPCTOT1(a) { ToDo="C=TOT"; } 
function NPC_NPCTOT2(a) { ToDo="C=TOT"; } 
function NPC_NPCTOT3(a) { ToDo="C=TOT"; } 
function NPC_NPCZombie(a) { Game="<center><font color=#006000><b>Zombie Player:</b></font><p>"; POP(Game); } 
function NPC_NPCHazmat(a) { Game="<center><font color=#006000><b>Hazmat Crew:</b></font><p>"; if (a==1) {AllowScroll=0; EraseAll(); ToDo="C=XC"; Game=Game+"Travel denied - leave now."; } else {Game=Game+"Are you infected?<br>Have you been to a hot zone?<br>What is your travel history?<p>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCHazmat(\"1\");>Umm ... yes, why?</a>"; } POP(Game); } 
function NPC_NPCZGirl(a) { Game="<center><font color=#006000><b>Zombie Girl:</b></font><p>"; Game=Game+"They put clean clothes on<br>her and chained her to a post<br>so she can&#39;t byte anyone."; POP(Game); } 
function AdminStatic(i) { r=""; if (Admin) {if (CharObj.indexOf("L9")>-1 || CharObj.indexOf("L0")>-1) {if (IV[0]!="B") {r="<a href=\"javascript:AdminDel("+i+");\">Delete "+ItemID(IV[1])+"</a><br>"; r=r+"<a href=\"javascript:AdminAction("+i+");\">Animate "+ItemID(IV[1])+"</a><br>"; } else {r="<a href=\"javascript:AdminDel("+i+");\">Delete "+IV[1]+"</a><br>"; }}} return r; } 
function AdminDel(h) { if (Admin) { IV=S[h].split("|"); AdminCmd("/del:"+IV[1]+":"+h); }} 
function AdminAction(h) { if (Admin) {IV=S[h].split("|"); ChatLine="/a:"+h+":"; KCap=1; }} 
function AdminHat(a) { r=""; if (TileMode) {if (TileFill) {r=r+"<a href=\"javascript:AdminTileFill();\">Exit Fill Mode</a><br>"; } else {r=r+"<a href=\"javascript:AdminTileFill();\">Tile Fill Mode</a><br>"; } r=r+"<a href=\"javascript:AdminCopy();\">Copy Map</a><br>"; r=r+"<a href=\"javascript:AdminPaste();\">Paste Map</a><br>"; r=r+"<a href=\"javascript:AdminEdge();\">Auto Edge Tiles</a><br>"; r=r+"<a href=\"javascript:AdminQuickSave();\">Quick Save Map</a><br>"; r=r+"<a href=\"javascript:AdminReloadMap();\">Quick Load Map</a><br>"; r=r+"<a href=\"javascript:AdminTile();\">Exit Tile Editor</a><br>"; } else {if (CharObj.indexOf("L9")>-1 || CharObj.indexOf("L0")>-1) {r="<a href=\"javascript:AdminTile(\'/tile\');\">Tile Editor</a><br>"; r=r+"<a href=\"javascript:AdminTele();\">Teleport</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/reset\');\">Reset Screen</a><br>"; r=r+"<a href=\"javascript:AdminItem(\'/build:\');\">Add Building</a><br>"; r=r+"<a href=\"javascript:AdminItem(\'/item:\');\">Add Item</a><br>"; r=r+"<a href=\"javascript:AdminNPC(\'\');\">Add Non-Player Char</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/actions:\');\">Add Item Actions</a><br>"; }} return r; } 
function AdminCmd(a) { if (Admin) { ChatLine=a; RefChat=1; POP("Hit ENTER to<br>confirm command."); }} 
function AdminItem(a) { if (Admin) {ChatLine=a; RefChat=1; POP("Enter Item\'s Two Digit Code,<br>and any data associated with<br>the item and press ENTER."); }} 
function AdminChat(a) { if (ChatLine.substring(0,6)=="/item:") {PopAlign="char"; POP("<img src=\""+DirItem+"/O"+ChatLine.substring(6,8)+".gif\">"); }} 
function AdminNPC(a) { Game=""; if(typeof a!="string") { a+=""; } if(a==""){if(!MoveTo){Destination=CharZ;} if(typeof IVa=="undefined"||IVa[4]!=Destination||IVa[5]!=CharMap){for(i=0;i<S.length;i++) {IVa=S[i].split("|"); if(IVa[0]=="N"&&IVa[4]==Destination){break;}} if(IVa[0]!="N"||IVa[4]!=Destination) { IVa=["N","M55R","NPC","",Destination]; } IVa[5]=CharMap; }} if(a=="b") {Game="Select Body:<p>"; for (i=0;i<10;i++) {Game+=(i==5?"<br>":"")+"<a href=\"javascript:AdminNPC(\'B"+i+"\');\"><img src=\""+DirChar+"/CHR"+IVa[1].charAt(0)+i+"R.gif\" border=0></a>"; } for (i=65;i<91;i++) {if(i%6==0) { Game=Game+"<br>"; } Game=Game+"<a href=\"javascript:AdminNPC(\'B"+String.fromCharCode(i)+"\');\"><img src=\""+DirChar+"/CHR"+IVa[1].charAt(0)+String.fromCharCode(i)+"R.gif\" border=0></a>"; }} if(a.charAt(0)=="B") { IVa[1]=IVa[1].substring(0,2)+a.charAt(1)+IVa[1].substring(3); } if(a=="D") { IVa[1]=IVa[1].substring(0,3)+(IVa[1].charAt(3)=="R"?"L":"R")+IVa[1].substring(4); } if(a=="G") { IVa[1]=(IVa[1].charAt(0)=="M"?"F":"M")+IVa[1].substring(1); } if(a=="h"){Game="Select Head:<p>"; for (i=0;i<10;i++) {Game+=(i==5?"<br>":"")+"<a href=\"javascript:AdminNPC(\'H"+i+"\');\"><img src=\""+DirChar+"/CHRH"+IVa[1].charAt(0)+i+"R.gif\" border=0></a>"; }} if(a.charAt(0)=="H") { IVa[1]=IVa[1].charAt(0)+a.charAt(1)+IVa[1].substring(2); } if(a=="l"||a=="m"||a=="o"||a=="p") {Game="Select Item: <p>"; b=a.toUpperCase(); for (i=0;i<10;i++) {Game+=(i==5?"<br>":"")+"<a href=\"javascript:AdminNPC(\'"+b+i+"\');\"><img src=\""+DirItem+"/O"+b+i+".gif\" border=0></a>"; } for (i=97;i<100/*123*/;i++) {if(i%6==2) { Game=Game+"<br>"; } Game=Game+"<a href=\"javascript:AdminNPC(\'"+b+String.fromCharCode(i)+"\');\"><img src=\""+DirItem+"/O"+b+String.fromCharCode(i)+".gif\" border=0></a>"; } Game+='<a href="javascript:AdminNPC(\'X'+b+'\')">None</a>'; } if(a.charAt(0)=="L"||a.charAt(0)=="M"){i=IVa[1].substring(4).indexOf("L")+4;if(i<4){i=IVa[1].substring(4).indexOf("M")+4;}if(i<4){IVa[1]+=a;}else{IVa[1]=IVa[1].substring(0,i)+a+IVa[1].substring(i+2);}} if(a=="n"){Game="Select Neck Item: <p>"; Game=Game+"<a href=\"javascript:AdminNPC(\'N2\');\"><img src=\""+DirItem+"/ON2.gif\" border=0></a>"; Game=Game+"<a href=\"javascript:AdminNPC(\'N4\');\"><img src=\""+DirItem+"/ON4.gif\" border=0></a>"; Game=Game+"<a href=\"javascript:AdminNPC(\'N6\');\"><img src=\""+DirItem+"/ON6.gif\" border=0></a>"; Game=Game+"<a href=\"javascript:AdminNPC(\'N8\');\"><img src=\""+DirItem+"/ON8.gif\" border=0></a>"; Game=Game+"<a href=\"javascript:AdminNPC(\'N0\');\"><img src=\""+DirItem+"/ON0.gif\" border=0></a>"; Game=Game+"<a href=\"javascript:AdminNPC(\'Na\');\"><img src=\""+DirItem+"/ONa.gif\" border=0></a>"; Game+='<br><a href="javascript:AdminNPC(\'XN\')">None</a>'; } if(a.charAt(0)=="N"||a.charAt(0)=="O"||a.charAt(0)=="P"){i=IVa[1].substring(4).indexOf(a.charAt(0))+4;if(i<4){IVa[1]+=a;}else IVa[1]=IVa[1].substring(0,i)+a+IVa[1].substring(i+2);} if(a.charAt(0)=="X"){i=IVa[1].substring(4).indexOf(a.charAt(1))+4;if(i>3){IVa[1]=IVa[1].substring(0,i)+IVa[1].substring(i+2);}} POP( '<div style="position:absolute;top:20;left:0">'+AdminNPCi(IVa[1])+'</div><div style=\"float:left;width:25px;height:50px\"></div>'+(Game?Game:"<p><br></p>")+"<p align=center><a href=\"javascript:AdminNPC(\'G\');\">M/F</a> "+"<a href=\"javascript:AdminNPC(\'D\');\">L/R</a> "+"<a href=\"javascript:AdminNPC(\'h\');\">Head</a> "+"<a href=\"javascript:AdminNPC(\'l\');\">Hat</a> "+"<a href=\"javascript:AdminNPC(\'m\');\">Helmet</a> <br>"+"<a href=\"javascript:AdminNPC(\'b\');\">Body</a> "+"<a href=\"javascript:AdminNPC(\'n\');\">Neck</a> "+"<a href=\"javascript:AdminNPC(\'o\');\">Shields</a> "+"<a href=\"javascript:AdminNPC(\'p\');\">Weapons</a> "+"</p><p align=center><a href=\"javascript:AdminNPC2();\">FINISHED!</a></p>"); } 
function AdminNPCi(c){var b=c.substring(4),d=c.charAt(3),t=b.search(/A[5-7]/),o,r=''; if(t<0){o=[['R'+c.charAt(0)+c.charAt(2),0],['RH'+c.charAt(0)+c.charAt(1),-16]]; if((t=b.indexOf("L"))>=0||(t=b.indexOf("M"))>=0){o.push(['I'+b.substring(t,t+2),b.charAt(t)=='L'?-24:-20]);} if((t=b.indexOf("N"))>=0){o.push(['I'+b.substring(t,t+2),b.indexOf("N2")>=0||b.indexOf("N4")>=0||b.indexOf("N8")>=0?-20:0]);} if((t=b.indexOf("O"))>=0){o.push(['I'+b.substring(t,t+2),0]);} if((t=b.indexOf("P"))>=0||(t=b.indexOf("B"))>=0){o.push(['I'+b.substring(t,t+2),b.charAt(t)=="P"?-14:-6]);}}else o=[[DirItem+'/OA'+b.charAt(t+1),0]]; for(b=0;b<o.length;b++){r+='<img src="'+(o[b][0].substring(0,4)=='http'?o[b][0]:DirChar+'/CH'+o[b][0]+d)+'.gif" style="position:absolute;top:'+o[b][1]+'px;left:0"/>';} return r; } 
function AdminNPC2(a) { ChatLine="/npc:"+IVa[1]+":"+IVa[2]; POP("Enter the name of<br>the NPC and press ENTER."); } 
function AdminTile() { if (Admin) { if (TileMode) { TileMode=0; } else { TileMode=1; ChatLine=""; AllowScroll=0; } HPOP(); }} 
function AdminMoving() { PopAlign="char"; POP(Map.charAt(NewCharZ*2)+Map.charAt((NewCharZ*2)+1)); if (TileFill) {Map=Map.substring(0,(NewCharZ*2))+TileFill+Map.substring((NewCharZ*2)+2,Map.length); eval('T'+NewCharZ+'.setAttribute(\"src\",\"'+DirTile+'/'+Map.charAt(NewCharZ*2)+Map.charAt((NewCharZ*2)+1)+'.png\");'); }} 
function AdminCopy() { if (Admin) { MapBoard=Map; }} 
function AdminPaste() { if (Admin) { Map=MapBoard; RefMap=1; HPOP(); }} 
function AdminTileMode(i) { NewTile=Map.charAt(CharZ*2); NewSubTile=Map.charAt((CharZ*2)+1); if (TileFill) {NewTile=TileFill.charAt(0); NewSubTile=TileFill.charAt(1); } if (i>47 && i<58) { NewSubTile=String.fromCharCode(eval(i)); } if (i>64 && i<91) {if (Shifted || ShiftSet) {NewSubTile=String.fromCharCode(eval(i+32)); } else {NewTile=String.fromCharCode(eval(i)); }} Map=Map.substring(0,(CharZ*2))+NewTile+NewSubTile+Map.substring((CharZ*2)+2,Map.length); eval('T'+CharZ+'.setAttribute(\"src\",\"'+DirTile+'/'+Map.charAt(CharZ*2)+Map.charAt((CharZ*2)+1)+'.png\");'); if (i==13) { TileMode=0; TileFill=""; } else {if (TileFill) { TileFill=NewTile+NewSubTile; }}} 
function AdminReloadMap() { ToDo="NUL&Q=RM"; } 
function AdminEdge() { ToDo="NUL&Q=AE&I="+Map; } 
function AdminQuickSave() { ToDo="NUL&Q=M&I="+Map; } 
function AdminTileFill() { HPOP(); if (TileFill) {TileFill=""; } else {TileFill=Map.substring(CharZ*2,(CharZ*2)+2); }} 
function AdminExecChat() { if (ChatLine.substring(1,2)=="i") { CItem = ChatLine.split(":"); ToDo="NUL&Q=I&I="+CItem[1]+"&G="+CItem[2]; ChatLine=""; } if (ChatLine.substring(1,2)=="n") { CItem = ChatLine.split(":"); ToDo="NUL&Q=NPC&I="+CItem[1]+"&G="+CItem[2]; ChatLine=""; } if (ChatLine.substring(1,2)=="a") { CItem = ChatLine.split(":"); ToDo="NUL&Q=A&I="+CItem[1]+"&G="+CItem[2]; ChatLine=""; KCap=0; } if (ChatLine.substring(1,2)=="d") { CItem = ChatLine.split(":"); ToDo="NUL&Q=DI&I="+CItem[1]+"&G="+CItem[2]; ChatLine=""; } if (ChatLine.substring(1,2)=="b") { CItem = ChatLine.split(":"); ToDo="NUL&Q=AB&I="+CItem[1]+"&G="+CItem[2]; ChatLine=""; }} 
function AdminTele() { if (Admin) {r="<a href=\"javascript:AdminCmd(\'/tel F1\');\">Furnance</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel G3e\');\">Heart Mine</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel E5\');\">River Trolls</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel C8\');\">Castle</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel H7\');\">Badlands</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel A8e\');\">Fishing Guild</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel C6\');\">Player House</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel C0e\');\">Magic Guild</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel G1\');\">Oakland</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel B1\');\">Tutorial</a><br>"; r=r+"<a href=\"javascript:AdminCmd(\'/tel F4e\');\">Mining Guild</a><br>"; POP(r); ChatLine="/tel "; RefChat=1; }} 
function ItemID(a) { switch (a) { case "A1": return "Hiking Boots"; break; case "A2": return "Swamp Boots"; break; case "A3": return "Mountain Boots"; break; case "A4": return "Lava Boots"; break; case "A5": return "Row Boat"; break; case "A6": return "Small Ship"; break; case "A7": return "Sail Boat"; break; case "A0": return "Travel Boots"; break; case "B1": return "Bucket"; break; case "B2": return "Lantern"; break; case "B3": return "Flower"; break; case "B4": return "Iron Axe"; break; case "B5": return "Axe"; break; case "B6": return "Pick Axe"; break; case "B7": return "Net"; break; case "B8": return "Fishing Pole"; break; case "B9": return "Battle Axe"; break; case "B0": return "Fire Axe"; break; case "Ba": return "Club"; break; case "Bb": return "Iron Hammer"; break; case "C1": return "Nite Berry"; break; case "C2": return "Skye Nut"; break; case "C3": return "Logs"; break; case "C4": return "Broken Pick Axe"; break; case "C5": return "Dead Player"; break; case "C6": return "Broken Axe"; break; case "C7": return "Blue Key"; break; case "C8": return "Red Key"; break; case "C9": return "Wand"; break; case "C0": return "Vial"; break; case "Ca": return "Notes"; break; case "Cb": return "Flyer"; break; case "Cc": return "Broken Bronze Sword"; break; case "D1": return "Flour"; break; case "D2": return "Dough"; break; case "D3": return "Egg"; break; case "D4": return "Tomato"; break; case "D5": return "Lettuce"; break; case "D6": return "Match"; break; case "D7": return "Matches"; break; case "D8": return "Matches"; break; case "D9": return "Wheat"; break; case "D0": return "Vial of Water"; break; case "Da": return "Silver Key"; break; case "Db": return "Unknown Potion"; break; case "Dc": return "Unused Potion"; break; case "E1": return "Treasure Chest"; break; case "E2": return "Catfish Barrel"; break; case "E3": return "Flounder Barrel"; break; case "E4": return "Lobster Barrel"; break; case "E5": return "Feathers"; break; case "E6": return "Arrowheads"; break; case "E7": return "Arrows"; break; case "E8": return "Bucket of Water"; break; case "E9": return "Bucket of Milk"; break; case "E0": return "Dragon Egg"; break; case "F1": return "Chicken"; break; case "F2": return "Swamp Water"; break; case "F3": return "Pumpkin"; break; case "F4": return "Range Armor"; break; case "F5": return "Magic Robes"; break; case "F6": return "Monk Robes"; break; case "F7": return "Death Robes"; break; case "F8": return "Fire Robes"; break; case "F9": return "Evil Robes"; break; case "Fa": return "Hazmat Suit"; break; case "G1": return "Raw Crab"; break; case "G2": return "Raw Carp"; break; case "G3": return "Raw Sewer Crawler"; break; case "G4": return "Raw Catfish"; break; case "G5": return "Raw Flounder"; break; case "G6": return "Raw Ham"; break; case "G7": return "Raw Lobster"; break; case "G8": return "Raw Shark"; break; case "G9": return "Raw Lava Crawler"; break; case "G0": return "Raw Turkey"; break; case "Ga": return "Raw Salmon"; break; case "Gb": return "Raw Frog Legs"; break; case "H1": return "Copper Ore"; break; case "H0": return "Rock"; break; case "H2": return "Tin Ore"; break; case "H3": return "Emerald"; break; case "H4": return "Iron Ore"; break; case "H5": return "Ruby"; break; case "H6": return "Coal"; break; case "H7": return "Lodestone"; break; case "H8": return "Diamond"; break; case "H9": return "Lava Ore"; break; case "I1": return "Pizza"; break; case "I2": return "Bread Dough"; break; case "I3": return "Pancake Batter"; break; case "I4": return "Cookie Dough"; break; case "I0": return "Turkey"; break; case "J0": return "Candy"; break; case "J1": return "Crab"; break; case "J2": return "Carp"; break; case "J3": return "Sewer Crawler"; break; case "J4": return "Catfish"; break; case "J5": return "Flounder"; break; case "J6": return "Ham"; break; case "J7": return "Lobster"; break; case "J8": return "Shark"; break; case "J9": return "Lava Crawler"; break; case "Ja": return "Salmon"; break; case "Jb": return "Frog Legs"; break; case "K1": return "Cheese"; break; case "K2": return "Bread"; break; case "K3": return "Pancakes"; break; case "K4": return "Cookie"; break; case "K5": return "Half a Sandwich"; break; case "K6": return "Sandwich"; break; case "K7": return "Pizza x1"; break; case "K8": return "Pizza x2"; break; case "K9": return "Pizza x3"; break; case "K0": return "Pizza x4"; break; case "L1": return "Crown"; break; case "L2": return "Red Bandana"; break; case "L3": return "Ranger Hat"; break; case "L4": return "Sunglasses"; break; case "L5": return "Christmas Hat"; break; case "L6": return "Silver New Year Hat"; break; case "L7": return "Blue Bandana"; break; case "L8": return "Blue Hat"; break; case "L9": return "Pink Hat"; break; case "L0": return "Black Hat"; break; case "La": return "Scrooge Hat"; break; case "Lb": return "Gold New Year Hat"; break; case "M1": return "Bronze Helmet"; break; case "M2": return "Black Mask"; break; case "M3": return "Iron Helmet"; break; case "M4": return "Clown Wig"; break; case "M6": return "Magic Hat"; break; case "M7": return "Steel Helmet"; break; case "M8": return "Wizard Hat"; break; case "M9": return "Lava Helmet"; break; case "Ma": return "Green Cylon Helm"; break; case "Mb": return "Yellow Cylon Helm"; break; case "N1": return "Leather Armor"; break; case "N2": return "Red Armband"; break; case "N3": return "Bronze Armor"; break; case "N4": return "Quiver"; break; case "N5": return "Iron Armor"; break; case "N6": return "Magic Cape"; break; case "N7": return "Steel Armor"; break; case "N8": return "Blue Armband"; break; case "N9": return "Lava Armor"; break; case "N0": return "Fire Cape"; break; case "Na": return "Hall of Fame Cape"; break; case "O1": return "Bronze Shield"; break; case "O2": return "Leather Gauntlets"; break; case "O3": return "Emerald Ring"; break; case "O4": return "Iron Shield"; break; case "O5": return "Steel Shield"; break; case "O6": return "Ruby Ring"; break; case "O7": return "Silver Gauntlets"; break; case "O8": return "Lava Shield"; break; case "O9": return "Diamond Ring"; break; case "O0": return "Gold Gauntlets"; break; case "P1": return "Bronze Sword"; break; case "P2": return "Emerald Wand"; break; case "P3": return "Cross Bow"; break; case "P4": return "Iron Sword"; break; case "P5": return "Ruby Wand"; break; case "P6": return "Steel Sword"; break; case "P7": return "Short Bow"; break; case "P8": return "Diamond Wand"; break; case "P9": return "Lava Sword"; break; case "P0": return "Long Bow"; break; case "Pa": return "Spear"; break; case "Pb": return "Battle Spear"; break; case "Pc": return "Fire Spear"; break; case "Q1": return "Silver Coin"; break; case "Q2": return "Gold Coin"; break; case "Q3": return "5 Gold Coins"; break; case "Q4": return "20 Gold Coins"; break; case "Q5": return "100 Gold Coins"; break; case "Q6": return "500 Gold Coins"; break; case "Q7": return "1k Gold Coins"; break; case "Q8": return "5k Gold Coins"; break; case "Q9": return "20k Gold Coins"; break; case "Q0": return "100k Gold Coins"; break; case "Qa": return "50 Gold Coins"; break; case "Qb": return "10k Gold Coins"; break; case "Qc": return "50k Gold Coins"; break; case "Qd": return "250k Gold Coins"; break; case "Qe": return "500k Gold Coins"; break; case "Qf": return "1m Gold Coins"; break; case "R1": return "Cure Poison x1"; break; case "R2": return "Cure Poison x2"; break; case "R3": return "Cure Poison x3"; break; case "R4": return "Poisoned Arrowhead x1"; break; case "R5": return "Poisoned Arrowhead x2"; break; case "R6": return "Poisoned Arrowhead x3"; break; case "R7": return "Strength x1"; break; case "R8": return "Strength x2"; break; case "R9": return "Strength x3"; break; case "R0": return "Poisoned Player"; break; case "Ra": return "Treat Bag"; break; case "Rb": return "Treat Bag"; break; case "Rc": return "Death x1"; break; case "Rd": return "Death x2"; break; case "Re": return "Death x3"; break; case "S1": return "Badlands"; break; case "S2": return "Aggressive"; break; case "S3": return "Badlands (Poisoned)"; break; case "S4": return "Aggressive (Poisoned)"; break; case "S5": return "Switch Off"; break; case "S6": return "Switch On"; break; case "T1": return "Frog"; break; case "T2": return "Bat"; break; case "T3": return "Turkey"; break; case "T4": return "Spider"; break; case "T5": return "River Troll"; break; case "T6": return "Buzzard"; break; case "T7": return "Ghoul"; break; case "T8": return "Scorpion"; break; case "T9": return "Baby Dragon"; break; case "T0": return "Mysterious Trader"; break; case "Ta": return "Lava Bat"; break; case "Tb": return "Lava Rat"; break; case "Tc": return "Lava Giant"; break; case "Td": return "Lava Whirlpool"; break; case "Te": return "Dragon"; break; case "U1": return "Chicken"; break; case "U2": return "Fox"; break; case "U3": return "Goblin"; break; case "U4": return "Mountain Goat"; break; case "U5": return "Alligator"; break; case "U6": return "Minotaur"; break; case "U7": return "Ghost"; break; case "U8": return "Greater Demon"; break; case "U9": return "Skeleton"; break; case "U0": return "Lesser Demon"; break; case "Ua": return "Mummy"; break; case "Ub": return "Tarantula"; break; case "Uc": return "Shadow"; break; case "Ud": return "Zombie"; break; case "Ue": return "Zombie"; break; case "V1": return "Rat"; break; case "V2": return "Skunk"; break; case "V3": return "Reaper"; break; case "V4": return "Snake"; break; case "V5": return "Black Bear"; break; case "V6": return "Giant Mosquito"; break; case "V7": return "Barbarian"; break; case "V9": return "Lava Wizard"; break; case "V0": return "Lava Goat"; break; case "Va": return "Swamp Thing"; break; case "Vc": return "Giant Rat"; break; case "Vd": return "Cylon"; break; case "Ve": return "Cylon"; break; case "W1": return "Guard"; break; case "W2": return "Sewer Troll"; break; case "W3": return "Vicious Rabbit"; break; case "W4": return "Swine"; break; case "W5": return "Swine"; break; case "W6": return "Sea Serpent"; break; case "W7": return "Whirlpool"; break; case "W8": return "Shark"; break; case "W9": return "Gargoyle"; break; case "W0": return "The Evil Que"; break; case "Wa": return "Kraken the Serpent"; break; case "Wd": return "Yeti"; break; case "We": return "Warrior Ant"; break; case "X1": return "Lioness"; break; case "X2": return "Sewer Fungus"; break; case "X3": return "Giant"; break; case "X4": return "Lion Cub"; break; case "X5": return "Lion"; break; case "X6": return "Sewer Giant"; break; case "X7": return "Baby Dragon"; break; case "X8": return "Fire Ant"; break; case "X9": return "Giant Ant"; break; case "X0": return "Giant Ant"; break; case "Y1": return "Bandit"; break; case "Y2": return "Bandit"; break; case "Y3": return "Lava Troll"; break; case "Y4": return "Skelly"; break; case "Y5": return "Lava Fungus"; break; case "Y6": return "Death"; break; case "Y7": return "Henchman"; break; case "Z1": return "Nothing"; break; case "Z2": return "Sign"; break; case "Z3": return "Pier"; break; case "Z4": return "City"; break; case "Z5": return "Fire Pit"; break; case "Z6": return "Fire"; break; case "Z7": return "Mysterious Trader"; break; case "Z8": return "Quest Gate"; break; case "Z9": return "Experience Gate"; break; case "Z0": return "Nothing"; break; default: return "Item #"+a; break; }} 
function ItemLevel(a) { if (a=="T1") { return 3; } if (a=="T2") { return 6; } if (a=="T3") { return 12; } if (a=="T4") { return 1; } if (a=="T5") { return 30; } if (a=="T6") { return 38; } if (a=="T7") { return 44; } if (a=="T8") { return 38; } if (a=="T9") { return 99; } if (a=="Ta") { return 16; } if (a=="Tb") { return 10; } if (a=="Tc") { return 61; } if (a=="Td") { return 41; } if (a=="U0") { return 64; } if (a=="U1") { return 2; } if (a=="U2") { return 9; } if (a=="U3") { return 11; } if (a=="U4") { return 15; } if (a=="U5") { return 26; } if (a=="U7") { return 40; } if (a=="U8") { return 80; } if (a=="U9") { return 60; } if (a=="Ua") { return 35; } if (a=="Ub") { return 75; } if (a=="Uc") { return 35; } if (a=="Ud") { return 29; } if (a=="Ue") { return 29; } if (a=="V0") { return 28; } if (a=="V1") { return 1; } if (a=="V2") { return 9; } if (a=="V3") { return 62; } if (a=="V4") { return 6; } if (a=="V6") { return 24; } if (a=="V7") { return 21; } if (a=="V9") { return 89; } if (a=="Va") { return 36; } if (a=="Vd") { return 63; } if (a=="Ve") { return 57; } if (a=="W0") { return 129; } if (a=="W1") { return 33; } if (a=="W2") { return 36; } if (a=="W3") { return 18; } if (a=="W4") { return 23; } if (a=="W5") { return 32; } if (a=="W6") { return 60; } if (a=="W7") { return 30; } if (a=="W8") { return 72; } if (a=="Wa") { return 72; } if (a=="Wd") { return 55; } if (a=="We") { return 67; } if (a=="X0") { return 28; } if (a=="X1") { return 45; } if (a=="X2") { return 19; } if (a=="X3") { return 51; } if (a=="X4") { return 34; } if (a=="X5") { return 89; } if (a=="X6") { return 48; } if (a=="X7") { return 58; } if (a=="X8") { return 32; } if (a=="X9") { return 20; } if (a=="Y1") { return 39; } if (a=="Y2") { return 47; } if (a=="Y3") { return 42; } if (a=="Y4") { return 60; } if (a=="Y5") { return 38; } if (a=="Y6") { return 85; } if (a=="Y7") { return 37; }} 

function ProcessQue() {
 if (CharZ==Destination) { 
  if (Que.substring(0,3)=="Gts") { if (CharInven.indexOf("Z0")>-1) { if (Que.substring(3,5)=="C5") { if (CharMap=="A9e") { S[S.length]="I|W1|||"+(CharZ+1); S[S.length]="I|W1|||"+(CharZ-1); S[S.length]="I|W1|||"+(CharZ-2); S[S.length]="I|W1|||"+(CharZ-3); S[S.length]="I|W1|||"+(CharZ+14); S[S.length]="I|W1|||"+(CharZ-15); S[S.length]="I|W1|||"+(CharZ+16); POP("Its a trap! Guards appear!"); Sprung=setTimeout('Trap(0);',1000); }} else { ToDo="C=GS&J="+Que.substring(3,5); }}}
  if (Que.substring(0,3)=="Get") { if (CharInven.indexOf("Z0")>-1) { ToDo="C=G&J="+Que.substring(3,5); }}
  if (Que.substring(0,3)=="Chk") { ToDo="C=CK&J="+Que.substring(3,5); }
  if (Que.substring(0,3)=="Cty") { AllowScroll=0; EraseAll(); ToDo="C=EC&J="+Que.substring(3,Que.length); }
  if (Que.substring(0,3)=="XCt") { if (AllowScroll) { EraseAll(); ToDo="C=XC&J="+Que.substring(3,Que.length); }}
  if (Que.substring(0,3)=="Tel") { if (AllowScroll) { EraseAll(); ToDo="C=TP&J="+Que.substring(3,Que.length); }}
  if (Que.substring(0,3)=="Use") { ToDo="C=UI&J="+Que.substring(3,5); }
  if (Que.substring(0,3)=="Red") { if (CharMap==HouseMap) { if (House) { HOUSE(2); } else { POP("<font color=navy><b>"+Que.substring(3,Que.length)+"</b></font>"); }} else { if (CharMap=="D6") { POP("Closed.") } else { POP("<font color=navy><b>"+Que.substring(3,Que.length)+"</b></font>"); }}}
  if (Que.substring(0,3)=="Bld") { VisitBuild(); }
  if (Que.substring(0,3)=="POP") { POP(Que.substring(3,Que.length)); }
  if (Que.substring(0,3)=="Atk") { Skill="Atk"+Que.substring(3,Que.length); RenderDam(); }
  if (Que.substring(0,3)=="Fsh") { Skill="Fsh"+Que.substring(3,Que.length); }
  if (Que.substring(0,3)=="NPC") { eval("NPC_"+Que+"(\"0\");"); }
 }
 Destination=0;
 Que="";
}

function NPC_NPCCeleste(a) {
 Game="<p><center><font color=#006000><b>Celeste:</b></font>";
 if (a==1) {
  Game=Game+"<p>There is no money here,<br>you cannot buy or trade.";
  Game=Game+"<p>This game is designed to<br>explore the concept of";
  Game=Game+"<br>what the world could be<br>like if there was no money...";
  Game=Game+"<p>that is to say: Anarchy.";
  Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCCeleste(\'2\');\">How did that happen?</a>";
  Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Ummm okay,<br>I will figure it out.</a>";         
 } else {
  if (a==2) { 
   Game=Game+"<p>It is a long story.<p>I can suggest you go";
   Game=Game+"<br>to the Castle and talk<br>to King Que about it.";
   Game=Game+"<p>He can explain what happened.";
   Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Okay, on my way!</a>"; 
  } else {
   Game=Game+"<p>Hello Player, I am<br>Celeste - a computer<br>character here to help<br>you learn how to play.";
   Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCCeleste(\'1\');\">Where do I buy<br>weapons and armor?</a>";       
   Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Thanks, but I already<br>know how to play.</a>";
  }       
 }
 PopAlign="center";
 POP(Game);
} 

function CLOTHES(a) { 
 if (a==0) {
  Game="<p align=center>Select Clothes:<p align=center>";
  b=InitalObj.substring(0,1);
  if (CharMap=="B2e" || CharMap=="A2e") {
   Game=Game+"<a href=javascript:Null(); onmousedown=javascript:CLOTHES(\"1\");><img src="+DirChar+"/CHR"+b+"1R.gif border=0 height=48 width=48></a>";
   Game=Game+"<a href=javascript:Null(); onmousedown=javascript:CLOTHES(\"2\");><img src="+DirChar+"/CHR"+b+"2R.gif border=0 height=48 width=48></a>";
   Game=Game+"<a href=javascript:Null(); onmousedown=javascript:CLOTHES(\"3\");><img src="+DirChar+"/CHR"+b+"3R.gif border=0 height=48 width=48></a>";
   Game=Game+"<a href=javascript:Null(); onmousedown=javascript:CLOTHES(\"4\");><img src="+DirChar+"/CHR"+b+"4R.gif border=0 height=48 width=48></a>";
   Game=Game+"<a href=javascript:Null(); onmousedown=javascript:CLOTHES(\"5\");><img src="+DirChar+"/CHR"+b+"5R.gif border=0 height=48 width=48></a>";
  } else {
   Game="Closed.";
  }
 } else {
  HPOP(); ToDo="C=C&J="+a;
 }
 POP(Game);
}

function HAIR(a) {
 Game="<p align=center>Select new hair style:<p align=center>";
 if (a==0) {
  Game=Game+"&nbsp; &nbsp;<a href=javascript:Null(); onmousedown=\"javascript:HAIR(\'M\');\">MALE</a> &nbsp; &nbsp; <a href=javascript:Null(); onmousedown=\"javascript:HAIR(\'F\');\">FEMALE</a>";
  Game=Game+"<br><img onmousedown=\"HAIR(\'M\');\" src="+DirChar+"/CHRHM1R.gif height=48 width=48> &nbsp; &nbsp; <img onmousedown=\"HAIR(\'F\');\" src="+DirChar+"/CHRHF1L.gif height=48 width=48>";
 } else {
  if (a=="M" || a=="F") {
   Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:HAIR(\'"+a+"1\');\"><img src="+DirChar+"/CHRH"+a+"1R.gif border=0 height=48 width=48></a> ";
   Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:HAIR(\'"+a+"2\');\"><img src="+DirChar+"/CHRH"+a+"2R.gif border=0 height=48 width=48></a> ";
   Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:HAIR(\'"+a+"3\');\"><img src="+DirChar+"/CHRH"+a+"3R.gif border=0 height=48 width=48></a> ";
   Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:HAIR(\'"+a+"4\');\"><img src="+DirChar+"/CHRH"+a+"4R.gif border=0 height=48 width=48></a>";
   Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:HAIR(\'"+a+"5\');\"><img src="+DirChar+"/CHRH"+a+"5R.gif border=0 height=48 width=48></a>";
   Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:HAIR(\'"+a+"6\');\"><img src="+DirChar+"/CHRH"+a+"6R.gif border=0 height=48 width=48></a>";
   Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:HAIR(\'"+a+"7\');\"><img src="+DirChar+"/CHRH"+a+"7R.gif border=0 height=48 width=48></a>";
  } else {
   HPOP();
   if (a.length==2) {
    ToDo="C=HS&J="+a+InitalObj.substring(2,3);
   }
  }
 }
 POP(Game);
}

function NPC_NPCJoe(a) { Game="<center><font color=#006000><b>Joe:</b></font><p>"; if (a==1) {Game=Game+"Turn the page over, it is an off button<br>for the lights in the mining guild - duh!"; Game=Game+"<p>And what are you doing with these?<br>I&#39;ve been looking everywhere for them!"; Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCJoe(\"2\");>Ummm... it was all Jasmine&#39;s<br>idea! I was just trying to help!</a>"; } else {if (a==2) {Game=Game+"[rolls his eyes]<p>If you really want to help, find<br>this computer character. I need<br>to capture and terminate him."; Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCJoe(\"3\");>Zoltan? Why, what&#39;d he do?</a>"; ToDo="C=QI&J=Cb"; } else {if (a==3) {Game=Game+"Zoltan was an experiment in artificial<br>intelligence. He became self aware and tried<br>to take over the game. He will try again."; Game=Game+"<p>I think he is hiding in the members world."; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">OK, I&#39;ll find him!</a>"; } else {Game=Game+"What are you doing here?<br>This is a restricted area!"; if (CharInven.indexOf("Ca")>-1) { Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCJoe(\"1\");>I came to stop you<br>from coding the OFF button!</a>"; } if (CharInven.indexOf("Cb")>-1) { Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCJoe(\"3\");>Zoltan? Why, what&#39;d he do?</a>"; }}}} POP(Game); }

function NPC_NPCClan(a) {
 Game="<center><font color=#006000><b>Anarchist:</b></font><p>";
 if (a==1) {
  Game=Game+"<p>This is a video game, if<br>you want money get a job<br>and go to work.";
  Game=Game+"<p>You are here to have<br>fun, not work - duh."; 
  Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCClan(\'4\');\">I dont get it,<br>why is money bad?</a>";
  Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCClan(\'2\');\">Okay, but what<br>about my high score?</a>";
 } else {
  if (a==2) {
   Game=Game+"<p>You don&#39;t have one, nobody does.";
   Game=Game+"<p>This is a place to have fun,<br>there is nothing to cheat this way.";
   Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCClan(\'3\');\">Hmmm...</a>"; 
  } else {
   if (a==3) {
    Game=Game+"<p>You should seek out the<br>Great Que - he can explain<br>everything. Many players<br>seek him on a vsion quest.";
    Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Okay</a>";
    Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCClan(\'5\');\">Great Que?</a>";
   } else {
    if (a==4) {
     Game=Game+"<p>The root of all kinds<br>of evil, money is dead."; 
     Game=Game+"<p>It does not see, hear, talk,<br>feel, and no matter how much<br>you love it, it will never<br>ever love you back.";
     Game=Game+"<p>We have learned that one<br>living player is worth more<br>than all the kings dead gold.";
     Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCClan(\'2\');\">Okay, but what<br>about my high score?</a>";
    } else {
     if (a==5) {
      Game=Game+"<p>Yes, Joe programmed him to<br>drive the Evil Que out of the<br>Badlands and explain why money<br>cannot be allowed in the game.";
      Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Interesting</a>";
     } else {
      Game=Game+"<p>What are you doing here?<br>You dont belong here!";
      Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCClan(\'1\');\">What is going on, no money?</a>";
     }
    }
   }
  }
 }
 POP(Game);
}   

function NPC_NPCKing(a) {
 Game="<center><font color=#006000><b>King Que:</b></font><p>";
 if (BridgeClosed) {
  if (a==1) {
   Game=Game+"Again, that is just silly.<br>The Evil Que is just an outlaw<br>criminal that will be hunted down<br>and sent to my prison labor camp.";
  } else {
   Game=Game+"Calm down player,<br>what is the problem?<p>";
   Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCKing(1);\">The Evil Que is preparing<br>an invasion of giants armed<br>with lava weapons!</a><p>";
  }
 } else {
  if (CharInven.indexOf("L1")<0) {
   Game=Game+"Welcome to Queville!<p>";
   Game=Game+"Here is a paper crown,<br>a souvenir from the Castle.<p>";
   Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Thanks!</a><p>";
   ToDo="C=KQ&J=L1";
  } else {
   if (a==1) {
    Game=Game+"There are no dragons<br>attacking the Castle,<br>that is just silly!<p>";
    Game=Game+"The Castle is the safest<br>place in all of Queville.<p>[the King looks proud]<p>";
    Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Thanks!</a><p>";
   } else {
    if (a==2) {
     Game=Game+"Are You Crazy!?!<p>If people hear about this,<br>tourism here is finished! I<br>should have your head for this!<p>";
     Game=Game+"Take them South - Badlands<br>Yes. take them to the Evil Que<p>And let no one see them!";
    } else {
     if (a==3) {
      Game=Game+"Yes, it was Joe.<br>He confiscated all<br>of my gold and informed<br>me trade not allowed.";
      Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCKing(\'4\');\">Why?</a>";  
     } else {
      if (a==4) {
       Game=Game+"<p>After years of watching Anarchy be the<br>top clan, Joe started to research anarchy<br>to learn what it was about. His conclusion:";
       Game=Game+"<p>Government exists for one reason<br>and one reason only: money. No<br>money, no government. Anarchy.";
       Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCKing(\'5\');\">WOW!</a>";
      } else {
       if (a==5) {
        Game=Game+"Yes, I know.<br>I tried to talk him out<br>of it, but it was useless.";
        Game=Game+"<p>In the end, I realized<br>he might be right.";
        Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCKing(\'6\');\">Interesting, where is Anarchy<br>Clan?? I want to talk to them!</a>";      
       } else {
        if (a==6) {
         Game=Game+"<p>They are usually in the Badlands,<br>hiding from my guards - they are all<br>known criminals, and dangerous!";
         Game=Game+"<p>I would discourage your from<br>seeking an audience with them."; 
         Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Okay, I will be careful.</a>";
        } else {
         Game=Game+"<p>Welcome to Queville!"; 
         Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Thanks!</a>";
         Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCKing(\'3\');\">What is going on, no money?</a>"; 
         if (CharInven.indexOf("E0")<0) {
          Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCKing(1);\">What is this I heard about<br>dragons attacking the Castle?</a>";
         } else {
          Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCKing(2);\">Look what I found<br>under the fountain!</a>";
         }
        }
       }
      }
     }
    }
   }
  }
 }
 POP(Game);
}

function BUNKER(a) {
 // lava boots quest here?
 if (CharMap=="J5") {
  AllowScroll=0; EraseAll(); ToDo="C=EC&J=133"; Game="";
 }
} 

function FURNACE(a) {
  if (a==0) {
    Game="<center><font color=#006000><b>Furnace:</b></font><p>";
    Game=Game+"<p>Select item to smith:";
    Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'M1\');\"><img src="+DirItem+"/OM1.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'O1\');\"><img src="+DirItem+"/OO1.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'P1\');\"><img src="+DirItem+"/OP1.gif border=0></a>";
    Game=Game+" <a href=\"javascript:FURNACE(\'N3\');\"><img src="+DirItem+"/ON3.gif border=0></a>";
    Game=Game+"<br><a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'M3\');\"><img src="+DirItem+"/OM3.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'O4\');\"><img src="+DirItem+"/OO4.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'P4\');\"><img src="+DirItem+"/OP4.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'N5\');\"><img src="+DirItem+"/ON5.gif border=0></a>";
    Game=Game+"<br><a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'M7\');\"><img src="+DirItem+"/OM7.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'O5\');\"><img src="+DirItem+"/OO5.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'P6\');\"><img src="+DirItem+"/OP6.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'N7\');\"><img src="+DirItem+"/ON7.gif border=0></a>";
    Game=Game+"<br><a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'M9\');\"><img src="+DirItem+"/OM9.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'O8\');\"><img src="+DirItem+"/OO8.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'P9\');\"><img src="+DirItem+"/OP9.gif border=0></a>";
    Game=Game+" <a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'N9\');\"><img src="+DirItem+"/ON9.gif border=0></a>";
    Game=Game+"<br><a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'E6\');\"><img src="+DirItem+"/OE6.gif border=0></a>";
    if (CharInven.indexOf("Bb")>-1) { Game=Game+"<a href=javascript:Null(); onmousedown=\"javascript:FURNACE(\'H7\');\"><img src="+DirItem+"/OH7.gif border=0></a>"; }
  } else {
    if (a.substring(0,3)=="Smt") {
      Game=Game+"<p>Success!";
      ToDo="RSB";
      FurnTimer=setTimeout('FURNACE(0);',1000);
    } else {
      Game="<center><font color=#006000><b>Furnace:</b></font><p>";
      if (CharMap != "J8e") {
        if (a=="M9" || a=="O8" || a=="P9" || a=="N9") {
          a="";
          Game=Game+"This furnace<br>is not hot enough!<p>Try the Badlands!";
        }
      }
      if (a) {
        ToDo="C=SM&J="+a;
        Game=Game+"Smithing...<p><img src="+DirItem+"/O"+a+".gif height=32 width=32><p>"+ItemID(a);
      }
    }
  }
  POP(Game);
}

function STOVE2(a) { 
  f=0;
  for (i=0;i<NumInven;i++) {
    b=CharInven.substring(i*2,i*2+2);
    if (b=="I1") { f=1; ToDo="C=CS&J="+b; i=NumInven; }
    if (b=="I2") { f=1; ToDo="C=CS&J="+b; i=NumInven; }
    if (b=="I3") { f=1; ToDo="C=CS&J="+b; i=NumInven; }
    if (b=="I4") { f=1; ToDo="C=CS&J="+b; i=NumInven; }
  }
  if (f) {
    POP("Cooking "+ItemID(b)); Skill="S";
  } else {
    Skill=""; POP("Finished cooking.");
  }
}

function TABLE(a) {
  Game="<center><font color=#006000><b>Kitchen Table:</b></font><p>";
  if (a != "0") {
    ToDo="C=KT&J="+a;
    POP("Cooking "+ItemID(a)+"...");
  } else {
    f=0; Game=Game+"Select Item To Prep Cook:<p>";
    if (CharInven.indexOf("D1")>-1) {
      if (CharInven.indexOf("E8")>-1) {
        f=1; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:TABLE(\"I2\");><img src="+DirItem+"/OI2.gif border=0></a>";
        if (CharInven.indexOf("D3")>-1) {
          f=1; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:TABLE(\"I3\");><img src="+DirItem+"/OI3.gif border=0></a>"; 
          if (CharInven.indexOf("C2")>-1) {
            f=1; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:TABLE(\"I4\");><img src="+DirItem+"/OI4.gif border=0></a>";
          }
        }
      }
    }
    if (CharInven.indexOf("I2")>-1) {
      if (CharInven.indexOf("D4")>-1) {
        if (CharInven.indexOf("K1")>-1) {
          f=1; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:TABLE(\"I1\");><img src="+DirItem+"/OI1.gif border=0></a>";
        }
      }
    }
    if (CharInven.indexOf("K1")>-1) {
      if (CharInven.indexOf("K2")>-1) {
        if (CharInven.indexOf("J6")>-1) {
          if (CharInven.indexOf("D4")>-1) {
            f=1; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:TABLE(\"K6\");><img src="+DirItem+"/OK6.gif border=0></a>";
          } else {
            if (CharInven.indexOf("I0")>-1) {
              f=1; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:TABLE(\"K6\");><img src="+DirItem+"/OK6.gif border=0></a>";
            }
          }
        } else {
          if (CharInven.indexOf("I0")>-1) {
            f=1; Game=Game+"<a href=javascript:Null(); onmousedown=javascript:TABLE(\"K6\");><img src="+DirItem+"/OK6.gif border=0></a>";
          }
        }
      }        
    }
    if (f==0) {
      Game="<center><font color=#006000><b>Kitchen Table:</b></font><p>You have nothing to cook.";
    }
    POP(Game);
  }
} 

function NPC_NPCTravel(a) { Game="<center><font color=#006000><b>Store Owner:</b></font><p>"; if (a==1) {if (Paying) {Game=Game+"This teleport will<br>take you to the other<br>side of Lava Mountain.<p>You will be safe there."; } else {Game=Game+"Yeah right, how about the<br>fillings out of my tooth too?"; Game=Game+"<p>Transport you to a pay-to-play area<br>and the King would banish me forever!"; Game=Game+"<p>Sorry kid, you<br>gotta walk this one."; }} else {Game=Game+"Welcome to my travel store!"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCTravel(1);\">I seek safe<br>passage through<br>the Badlands</a>"; } POP(Game); }
function NPC_NPCLavaGuard(a) { BridgeClosed=0; Game="<center><font color=#006000><b>Bridge Guard:</b></font><p>"; if (a==1) {Game=Game+"The bridge is closed.<p>This is offical<br>guard business, go away!"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">OK, I will turn around</a>"; } else {if (Paying) {Game=Game+"HALT! Do not<br>travel further south!"; Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCLavaGuard(\"1\");>Why not??</a>"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">OK, I will turn around</a>"; } else {Game=Game+"HALT! Do not<br>travel further south!"; Game=Game+"<p>The bridge is closed.<p>This is offical<br>guard business, go away!"; Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">OK, I will turn around</a>"; }} POP(Game); } 

function RefreshMap() {
 if (CharMap=="D8") {
  if (BridgeClosed) {
   Map=Map.substring(0,12)+"I0I0I0"+Map.substring(18,Map.length);
   Map=Map.substring(0,40)+"I0I0I0"+Map.substring(46,Map.length);
   Map=Map.substring(0,68)+"I0I0I0"+Map.substring(74,Map.length);
   Map=Map.substring(0,96)+"I0I0I0"+Map.substring(102,Map.length);
   Map=Map.substring(0,124)+"G0G0G0"+Map.substring(130,Map.length);
   Map=Map.substring(0,152)+"A1A1A1"+Map.substring(158,Map.length);
   Map=Map.substring(0,180)+"U0U0U0"+Map.substring(186,Map.length);
   Map=Map.substring(0,208)+"A0A0A0"+Map.substring(214,Map.length);
  }
 }
 if (CharMap=="L5"||CharMap=="M5") {
  //if (Paying==0) {
  // Map=Map.substring(0,0)+"U9"+Map.substring(2,Map.length);
  // Map=Map.substring(0,28)+"U9"+Map.substring(30,Map.length);
  // Map=Map.substring(0,56)+"U9"+Map.substring(58,Map.length);
  // Map=Map.substring(0,84)+"U9"+Map.substring(86,Map.length);
  // Map=Map.substring(0,112)+"U9"+Map.substring(114,Map.length);
  // Map=Map.substring(0,140)+"U9"+Map.substring(142,Map.length);
  // Map=Map.substring(0,168)+"U9"+Map.substring(170,Map.length);
  // Map=Map.substring(0,196)+"U9"+Map.substring(198,Map.length);
  // Map=Map.substring(0,224)+"U9"+Map.substring(226,Map.length);
  // Map=Map.substring(0,252)+"U9"+Map.substring(254,Map.length);
  //}
 }
 if (CharMap=="L0") {
  //if (Paying==0) {
  // Map=Map.substring(0,26)+"U9"+Map.substring(28,Map.length);
  // Map=Map.substring(0,54)+"U9"+Map.substring(56,Map.length);
  // Map=Map.substring(0,82)+"U9"+Map.substring(84,Map.length);
  // Map=Map.substring(0,110)+"U9"+Map.substring(112,Map.length);
  // Map=Map.substring(0,138)+"U9"+Map.substring(140,Map.length);
  // Map=Map.substring(0,166)+"U9"+Map.substring(168,Map.length);
  // Map=Map.substring(0,194)+"U9"+Map.substring(196,Map.length);
  // Map=Map.substring(0,222)+"U9"+Map.substring(224,Map.length);
  // Map=Map.substring(0,250)+"U9"+Map.substring(252,Map.length);
  // Map=Map.substring(0,278)+"U9"+Map.substring(280,Map.length);
  //}
 }
 PUP=""; z=0;
 for (i=0; i<MapSizeY+1; i++) {
  for (j=0; j<MapSizeX+1; j++) {
   eval('T'+z+'.setAttribute(\"src\",\"'+DirTile+'/'+Map.charAt(z*2)+Map.charAt((z*2)+1)+'.png\");');
   z++;
  }
 }
 RefMap=0;
 if (CharMap.indexOf("e")>-1) { CheckLights(); }
 if (CharMap=="G0") { 
  if (CharZ==79) { 
   PopAlign="center"; POP("You wash up on shore");
  }
 }
 if (CharMap=="G2e") {
  PopAlign="center";
  POP("<center><font color=purple>The Evil Que</font><p>You were foolish<br>to come here player<p>Now I must destory you.");
 }
 if (CharMap=="L3e") { NPC_NPCHazmat(0); }
}

function ClickHere(z) { 
 var i; Que=""; 
 if (Retreat==0) { 
   Skill=""; IStamp=CStamp; f=-1; PUP="<b>";
   for (i=0;i<S.length;i++) { 
    IV=S[i].split("|");
    if (IV[0]=="I" || IV[0]=="D") {
     if (IV[4]==z) { PUP=PUP+ProcessMenu(i,"S"); }
    } else {
     if (IV[0]=="N") {
      if (IV[4]==z || (IV[4]-(MapSizeX+1))==z) { 
       f=1; PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:NPCAction(\'"+S[i]+"\');\">"+PopUpNPC(IV[2])+"</a><br>";
       if(Admin){
        PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WalkHere("+z+");AdminNPC(\'\');\">Edit "+IV[2]+"</a><br><a href=\"javascript:AdminAction("+i+");\">Animate "+IV[2]+"</a><br><a href=javascript:Null(); onmousedown=\"JavaScript:AdminDel("+i+");\">Delete "+IV[2]+"</a><br>";
       }
      }
     } else {
      if (IV[0]=="B") {
       if (IV[4]==z) {
        PUP=PUP+BuildMenu(i);
        if (Admin) {
         f=1; PUP=PUP+AdminStatic(i);
        }
       }
      }
     }
    }
   }
   for (i=0;i<Obj.length;i++) {
    IV=Obj[i].split("|");
    if (IV[4]==z || IV[4]==z+(MapSizeX+1)) {
     f=1; if (IV[2].substring(0,3)=="NPC") {
      if (IV[0]=="O") {
       PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:NPCAction("+i+")\">"+PopUpNPC(IV[2])+"</a><br>";
      }
     } else {
      if (IV[0]=="O") {
       if (IV[3].charAt(IV[3].length-1)!="O") {
        if(PvParea){ 
         //PUP+="<a href=javascript:Null(); onmousedown=\"javascript:PAttack(\'"+IV[2]+"\');\">Attack "+IV[2]+"</a><br>";
        }
        if (IV[0]=="O") {
         PUP=PUP+"<a href=javascript:Null(); onmousedown=\"javascript:ProDItem(\'"+IV[2]+"\');\">Profile "+IV[2]+"</a><br>";
         //PUP=PUP+"<a href=javascript:Null(); onmousedown=\"javascript:SendMsg(\'"+IV[2]+"\');\">Message "+IV[2]+"</a><br>";
        }
       }
      }
     }
    }
   }
   NItems=IList.length/4;
   for (i=0;i<NItems;i++) {
    itemz=parseInt(IList.substring(i*4,(i*4)+2),16);
    c=IList.substring((i*4)+2,(i*4)+4);
    if (itemz==z) {
     f=1; PUP=PUP+ItemMenu(itemz,c);
    }
   }
   if (Map.charAt(CharZ*2)=="U") {
    PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WalkHere("+z+")\">Sail Here</a><br>";
   } else {
    PUP=PUP+"<a href=javascript:Null(); onmousedown=\"JavaScript:WalkHere("+z+")\">Walk Here</a><br>";
   }
   PopClick=z;
   if (f==-1) {
    WalkHere(z);
   } else {
    PopAlign="click";
    POP(PUP);
   }
  
 }
}


function HOUSE(a) { 
  Game="<center><font color=#006000><b>Player House:</b></font><p>";
  if (a==0) {
    if (House<100) {
      Game=Game+"<p>This looks like a good<br>place to build a house.";
      Game=Game+"<p>You need "+(100-House)+" rocks<br>for the fountation.";
      Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:HOUSE(1);>Build House</a>";
    } else {
      if (House<200) {
        Game=Game+"<p>You need "+(200-House)+" logs<br>for the frame.";
        Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:HOUSE(1);>Build House</a>";
      } else {
        if (House<300) {
          Game=Game+"<p>You need "+(300-House)+" tin<br>for the roof.";
          Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:HOUSE(1);>Build House</a>";
        } else {
          Game=""; AllowScroll=0; EraseAll(); ToDo="C=EC&J=113";
        }
      }
    }
  } else {
    if (a==1) {
      Game=Game+"Building House"; ToDo="C=PH";
    }
  }
  POP(Game);
}

function NPC_NPCMARV(a) {
 Game="<center><font color=green>Marvin:</font>";
 if (Quest.indexOf("A1")>-1) {
  Game=Game+"<p>Marvin is busy.";
 } else {
  if (CharInven.indexOf("A1")>-1) {
   if (a==3) {
    Game=Game+"<p>Well if the goblins didnt<br>do it, who did? I cant imagine<br>any of you players just killing<br>my chickens for no reason.<p>Think it could have been Zack?";
    Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMARV(4);\">Ummm ... what about the chicken offer?";
   } else {
    if (a==4) {
     Game=Game+"<p>I dont want their chicken<br>if they didnt steal it first!<p>Sheesh!";
     HPOP; ToDo="C=Q&J=A1";
    } else {
     Game=Game+"<p>What did those goblins say?<br>Did they confess to their crimes?";
     if (CharInven.indexOf("F1")>-1) {
      Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMARV(3);\">They insist they did not steal<br>your chicken and offered to give you one.";
     } else {
      Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">I have not<br>talked to them yet</a>";
     }
    }
   } 
  } else {
   if (a==1) {
    Game=Game+"<p>You will need<br>there hiking boots<br>to travel the forest.";
    Game=Game+"<p><img src="+DirItem+"/OA1.gif height=32 width=32>";
    Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMARV(2);\">Awesome, thanks!";
   } else {
    if (a==2) {
     Game=""; HPOP; ToDo="C=QI&J=A1";
    } else {
     Game=Game+"<p>Those goblins must<br>have stolen my chicken in<br>the middle of the night!<p>And Im mad about it too!";
     Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCMARV(1);\">There must be a mistake,<br>let me talk to them for you.";
    }
   }
  }
 }
 if (Game) { POP(Game); }
}

function MINECART(a) { 
 if (CharMap=="F3e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=G3e"; }
 if (CharMap=="G3e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=F3e"; }
 if (CharMap=="D5e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=C5e"; }
 if (CharMap=="C5e") { AllowScroll=0; EraseAll(); ToDo="C=TP&J=D5e"; }
 if (CharMap=="I1e") {
  if (CharZ==100) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=J1e"; }
  if (CharZ==39) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=H1e"; }
 }
 if (CharMap=="J1e") {
  if (CharZ==100) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=K1e"; }
  if (CharZ==30) { AllowScroll=0; EraseAll(); ToDo="C=TP&J=I1e"; }
 }
 if (CharMap=="H1e") { EraseAll(); ToDo="C=TP&J=I1e"; }
 if (CharMap=="K1e") { EraseAll(); ToDo="C=TP&J=J1e"; }
 if (CharMap=="J4e") { EraseAll(); ToDo="C=TP&J=K3e"; }
}

function MINE(a) { 
 a=-1; for (i=0;i<S.length;i++) {
  IV=S[i].split("|");
  if (IV[1]=="MINE") { a=IV[2]; }
 }
 if (a>=-1) {
  AllowScroll=0; EraseAll(); ToDo="C=EC&J="+a;
 } else {
  if (CharMap=="F4") { AllowScroll=0; EraseAll(); ToDo="C=EC&J=133"; }
 }
}

function RANGE(a) { if (CharMap=="D4") { AllowScroll=0; EraseAll(); ToDo="C=EC&J=119"; } if (CharMap=="D4e") { POP("Closed."); }} 
function MAGIC(a) { POP("You levitate up<br>to the magic guild."); AllowScroll=0; EraseAll(); ToDo="C=EC&J=105"; } 
function FISHGUILD(a) { AllowScroll=0; EraseAll(); ToDo="C=EC&J=71"; }

function GOBLINVILLAGE(a) { 
 Game="<center><font color=#006000><b>Goblin Village:</b></font>";
 if (Quest.indexOf("A1")>-1) {
  ToDo="C=QI&J=F1";
  Game=Game+"<p>The goblins give you a chicken.";
 } else {
  if (CharInven.indexOf("F1")>-1) {
   ToDo="C=QI&J=F1";
   Game=Game+"<p>The goblins give you a chicken.";
  } else {
   if (a==1) {
    Game=Game+"<p>No goblin stole no chicken!<br>We dont need no chickin!<br>We got lots of chickens!";
    Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:GOBLINVILLAGE(2);\">Why do you have<br>so many chickens?</a>";
   } else {
    if (a==2) {
     Game=Game+"<p>Goblins are vegetarians - we dont eat<br>chickens, only their eggs. But we cant<br>eat all of the eggs, and those eggs<br>hatch into more chickens that lay more<br>eggs that we cant eat.";
     Game=Game+"<p>You can take all the chickens you want,<br>give some to Marvin - we dont care.<br>";
     Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:GOBLINVILLAGE(3);\">Ok, thanks!</a>";
    } else {
     if (a==3) {
      Game=Game+"<p>The goblins give you a chicken.";
      ToDo="C=QI&J=F1";
     } else {
      Game=Game+"<p>Go Away Human";
      Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:GOBLINVILLAGE(1);\">Marvin says a<br>goblin stole his chicken.</a>";
     }
    }
   }
  }
 }
 if (Game) { POP(Game); }
}

function NPC_NPCMiner(a) {
 Game="<center><font color=#006000><b>Miner:</b></font><p>";
 if (a=="1") {
  Game=Game+"You are in luck!<br>I have an old pair<br>that will fit you<br>that you can have!";
  Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Wow thanks!</a>";
  ToDo="C=QI&J=A3";
 } else {
  if (a=="2") {
   Game=Game+"Some type of Goat Disease. Once<br>infected, they attack anything they see.";
   Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Crazy I tell ya!</a>";
  } else {
   if (a=="3") {
    Game=Game+"Lodestone - haven&#39;t heard that in a while!<p>";
    Game=Game+"You just bang an iron ore with a<br>hammer to align it north-south. It<br>then sticks to metal.<p>";
    Game=Game+"We used to sell it to tourists<br>as a magic ore. Ha - suckers!";
   } else {
    Game=Game+"I dont know what the big<br>fuss about no money is, us<br>mountain folk have not used<br>the stuff in years anyway.";
    Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">I hear ya man!</a>"; 
    Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCMiner(\"2\");>What about these goats?</a>"; 
    if (CharInven.indexOf("A3")<0) {
     Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCMiner(\"1\");>I need mountain boots!</a>";
    }
    if (Quest.indexOf("Ca")>-1) {
     Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCMiner(\"3\");>You know about Lodestone?</a>";
    }
   }
  }
 }
 POP(Game);
}

function NPC_NPCTowerGuard(a) { 
 BridgeClosed=0;
 Game="<center><font color=#006000><b>Tower Guard:</b></font><p>";
 if (a=="1") {
  Game=Game+"Yes, are you with<br>us or against us?";
  Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">I dont know yet</a>";
 } else {
  Game=Game+"The king is soft,<br>he cant stand up to<br>Joe and now us Guards<br>dont get paid.";
  Game=Game+"<p>We are looking for<br>help in confronting him so<br>we can take back the throne.";
  Game=Game+"<p><a href=javascript:Null(); onmousedown=javascript:NPC_NPCTowerGuard(\"1\");>You mean a coup?</a>";
  Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Good luck with that</a>";
 }
 POP(Game);
}

function NPC_NPCLena(a) {
 Game="<center><font color=#006000><b>Lena:</b></font><p>";
 if (a==1) {
  Game=Game+"<p>Lena laughs at you.";
 } else {
  Game=Game+"<p>Greetings player! I am<br>Lena, Queen of the Rabbits.";
  Game=Game+"<p>When I found out Joe was giving<br>players gold to club rabbits, I took<br>his club and hit him over the head.";
  Game=Game+"<p>I then armed the rabbits so<br>they could defend themselves.";
  Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Great idea!</a>";
  Game=Game+"<p><a href=\"javascript:NPC_NPCLena(\'1\');\">Attack Lena</a>";
 }
 if (Game) { POP(Game); }
}


function NPC_NPCJasmine(a) {
 Game="<center><font color=#006000><b>Jasmine:</b></font><p>";
 if (a==1) {
  Game=Game+"We dont serve<br>your kind here, get out!<p>Get out right now!";
 } else {
  if (a==2) {
   Game=Game+"This is a rough place,<br>it lets these bandits<br>know not to mess with me.";
   Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(3);\">Whats with the cape?</a>";
  } else {
   if (a==3) {
    Game=Game+"If you burn a magic<br>cape on an eternal flame,<br>it becomes a fire cape.<p>I have heard<br>you can do the same<br>with a Battle Spear."; 
    Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(4);\">Eternal Flame?</a>";
   } else {
    if (a==4) {
     Game=Game+"A fire that<br>burns indefinitely.<p>There is one in<br>the Badlands at the<br>Fordana Monument.";
    } else {
     if (a==5) {
      Game=Game+"Yeah of course.<p>He was in the other day<br> having a drink while writing notes."; 
      Game=Game+"<p>He is working on expanding<br>the members side of the world."; 
      Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(6);\">You do realize this is<br>all a video game right?</a>";
     } else {
      if (a==6) {
       Game=Game+"A video what?<p> ";
       Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Uhh, nevermind ... for now.</a>";
       Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(7);\">Yeah, it says so<br>right here in his notes.</a>";
      } else {
       if (a==7) {
        Game=Game+"OMG! It says here he<br>wants to install an &#39;OFF&#39; button!";
        Game=Game+"<p>Then a player could turn<br>the game off and I&#39;d be dead!<p>You must stop him!<br>"; 
        Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(8);\">Okay. Umm... how?</a>"; 
        Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Are you crazy? I&#39;m not going<br>up against the lead programmer!</a>";
       } else {
        if (a==8) {
         Game=Game+"You have to find &#39the source&#39;.<br>It is a secret teleport to a special room.<br>That is most likely where he will install it.";
         Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPCExit();\">Okay, I&#39;ll find it</a>";
        } else {
         if (a==9) {
          Game=Game+"Yeah so what?<p>You want a<br>drink or what?";
          Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(1);\">Root Beer Please</a>";
         } else {
          Game=Game+"You want a<br>drink or what?";
          Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(1);\">Root Beer Please</a>";
          Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(2);\">Why the mask?</a>";
          if (Quest.indexOf("Ca")>-1) {
           if (Quest.indexOf("Cb")>-1) {
            Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(9);\">It was an off<br>button for the<br>Mining Guild lights!</a>";
           } else {
            Game=Game+"<p><a href=javascript:Null(); onmousedown=\"javascript:NPC_NPCJasmine(5);\">Have you ever seen Joe?</a>";
           }
          }
         }
        }
       }
      }
     }
    }
   }
  }
 }
 POP(Game);
}

function SUNDIAL(a) {
 Game="<center><font color=#006000><b>Sundial:</b></font><p>";
 Game=Game+"The sundail has been smashed and<br>someone painted &#39;ANARCHY&#39; on it.<p>";
 if (CharMap=="B2e") { Game=Game+"&#39;We All Wear Slavery&#39;"; }
 if (CharMap=="G1e") { Game=Game+"&#39;We are ungovernable!&#39;"; }
 if (CharMap=="B8") { Game=Game+"&#39;And time shall be no more&#39;"; }
 if (CharMap=="H7") { Game=Game+"&#39;Dont be slave to the system!&#39;"; }
 POP(Game);
}

function PSTORE(a) { POP("Closed."); }
function BANK(a) { POP("Closed."); } 
function ZACK(a) { POP("Closed."); } 
function TRAVEL(a) { POP("Closed."); }
function Fort() { POP("Closed."); }
function DOCTOR(a) { POP("Closed."); }
function SHACK(a) { POP("Closed."); }
function STORE(a) { POP("Closed."); } 
function CART(a) { POP("Closed."); }
function PORT(a) { POP("Closed."); } 
function CLYDE(a) { POP("Closed."); }
function NPC_NPCAxe(a) { POP("Closed."); }
function NPC_NPCPiper(a) { POP("Closed."); }

function SCoin() { }

function Offer(i) { } 
function RtnOffer(i) { } 
function AcceptTrade(a) { } 
function RejectTrade() { } 
function Trader(a) { } 
function ClickStat(s) { } 
function ForSale(a) { }
function PSBuy(a) { } 
function PSWithdraw(a) { } 
function PSWithdrawAll(a) { } 
function PSIncreaseAll(){ } 
function BuyStatic(i) { } 
function BuySItem(i) { } 
function SellSItem(i) { } 
function UpdateTrade() { } 

function NPC_NPCZackFurnace(a) { POP("Closed."); }


</script></body></html>
